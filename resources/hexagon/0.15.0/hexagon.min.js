!function(){window.hx=hx=window.hx||{},hx.version="0.15.0",hx.theme={dropdown:{spacing:"0"},palette:{defaultCol:"#6582A6",positiveCol:"#6FB365",warningCol:"#CB9856",negativeCol:"#C74967",infoCol:"#A36FA9",complimentCol:"#FDFDFD",contrastCol:"#3D3D3D",lightTextCol:"#F3F3F3",darkTextCol:"#3D3D3D",disabledCol:"#939393",disabledBackgroundCol:"#FAFAFA"},plot:{colors:["rgb(177,119,190)","rgb(90,155,212)","rgb(241,90,113)","rgb(151,195,102)","rgb(250,169,91)","rgb(226,212,64)"],warmCol:"rgb(250,169,91)",ambientCol:"rgb(226,212,64)",coldCol:"rgb(90,155,212)",positiveCol:"rgb(151,195,102)",warningCol:"rgb(226,212,64)",negativeCol:"rgb(241,90,113)"},paginator:{arrowButton:"",defaultButton:"hx-compliment",selectedButton:"hx-positive"}},function(){var t,e,n,i,r,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};r="\x00",i=r.charCodeAt(0),n=function(t){return r+t},e=function(t){return t&&t.charCodeAt(0)===i},t=function(){function t(t){var e,n,i;if(this.size=0,this.nan=!1,this.items={},t)for(e=0,n=t.length;n>e;e++)i=t[e],this.add(i)}return t.prototype.add=function(t){var e,i,r;return"number"==typeof t&&isNaN(t)?this.nan||(this.size++,this.nan=!0):(i=n(t),null==(e=this.items)[i]&&(e[i]=[]),r=this.items[i],o.call(r,t)<0&&(this.size++,r.push(t))),this},t.prototype.clear=function(){return this.items={},this.nan=!1,void(this.size=0)},t.prototype["delete"]=function(t){var e,i,r,o;return"number"==typeof t&&isNaN(t)?this.nan?(this.size--,this.nan=!1):void 0:(r=n(t),r in this.items?(o=this.items[r],e=o.indexOf(t),i=-1!==e,i&&(this.size--,o.splice(e,1),o.length||delete this.items[r]),i):!1)},t.prototype.entries=function(){var t,n,i,r;t=[],i=this.items;for(n in i)r=i[n],e(n)&&(t=t.concat(r.map(function(t){return[t,t]})));return this.nan&&t.push([NaN,NaN]),t},t.prototype.forEach=function(t,e){var n,i,r,o;for(null==e&&(e=this),r=this.entries(),n=0,i=r.length;i>n;n++)o=r[n],t.call(e,o[1]);return void 0},t.prototype.has=function(t){var e;return"number"==typeof t&&isNaN(t)?this.nan:(e=n(t),e in this.items&&o.call(this.items[e],t)>=0)},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){var t,e,n,i,r;for(n=this.entries(),i=[],t=0,e=n.length;e>t;t++)r=n[t],i.push(r[1]);return i},t}(),hx.Set=t}(),function(){var t,e,n,i,r;r="\x00",i=r.charCodeAt(0),n=function(t){return r+t},e=function(t){return t&&t.charCodeAt(0)===i},t=function(){function t(t){var e,n,i;if(this.size=0,this.items={},this.nan=void 0,t)for(e=0,n=t.length;n>e;e++)i=t[e],this.set(i[0],i[1])}return t.prototype.clear=function(){return this.items={},this.nan=void 0,this.size=0},t.prototype["delete"]=function(t){var e,i,r,o;return"number"==typeof t&&isNaN(t)?void 0!==this.nan&&(this.size--,this.nan=void 0):(i=n(t),o=this.items[i],e=null!=o&&null!=(r=o.keys)?r.indexOf(t):void 0,null!=e&&-1!==e&&(o.keys.splice(e,1),o.values.splice(e,1),o.keys.length||delete this.items[i],this.size--)),this},t.prototype.entries=function(){var t,n,i,r;t=[],i=this.items;for(n in i)r=i[n],e(n)&&(t=t.concat(r.keys.map(function(t,e){return[t,r.values[e]]})));return void 0!==this.nan&&t.push([NaN,this.nan]),t},t.prototype.forEach=function(t,e){var n,i,r,o;for(null==e&&(e=this),r=this.entries(),n=0,i=r.length;i>n;n++)o=r[n],t.call(e,o[0],o[1]);return this},t.prototype.get=function(t){var e,i,r,o;return"number"==typeof t&&isNaN(t)?this.nan:(i=n(t),o=this.items[i],e=null!=o&&null!=(r=o.keys)?r.indexOf(t):void 0,null!=e&&-1!==e?o.values[e]:void 0)},t.prototype.has=function(t){var e,i,r;return"number"==typeof t&&isNaN(t)?void 0!==this.nan:(e=null!=(i=this.items[n(t)])&&null!=(r=i.keys)?r.indexOf(t):void 0,null!=e&&-1!==e)},t.prototype.keys=function(){var t,e,n,i,r;for(n=this.entries(),i=[],t=0,e=n.length;e>t;t++)r=n[t],i.push(r[0]);return i},t.prototype.set=function(t,e){var i,r,o,s,a;return"number"==typeof t&&isNaN(t)?(void 0===this.nan&&this.size++,this.nan=e):(s=n(t),r={keys:[],values:[]},a=null!=(i=this.items)[s]?i[s]:i[s]=r,o=a.keys.indexOf(t),-1!==o?a.values[o]=e:(this.size++,a.keys.push(t),a.values.push(e))),this},t.prototype.values=function(){var t,e,n,i,r;for(n=this.entries(),i=[],t=0,e=n.length;e>t;t++)r=n[t],i.push(r[1]);return i},t}(),hx.Map=t}(),function(){var t;t=function(){function t(t){this.list=null!=t?t:[],this.size=this.list.length}return t.prototype.add=function(t){return this.list.push(t),this.size++,this},t.prototype.clear=function(){return this.list=[],this.size=0,this},t.prototype["delete"]=function(t){return t>=0&&t<this.list.length?(this.list.splice(t,1),this.size--,!0):!1},t.prototype.entries=function(){return this.list},t.prototype.forEach=function(t,e){var n,i,r,o;for(null==e&&(e=this),o=this.list,i=0,r=o.length;r>i;i++)n=o[i],t.call(e,n);return void 0},t.prototype.get=function(t){return t>=0&&t<this.list.length?this.list[t]:void 0},t.prototype.has=function(t){return-1!==this.list.indexOf(t)},t.prototype.remove=function(t){var e;return-1!==(e=this.list.indexOf(t))?(this.list.splice(e,1),this.size--,!0):!1},t.prototype.removeAll=function(t){var e,n;for(n=0;-1!==(e=this.list.indexOf(t));)this.list.splice(e,1),this.size--,n++;return n},t.prototype.values=function(){return this.list},t}(),hx.List=t}(),function(){var t,e,n,i,r,o,s,a=[].slice;hx.deprecatedWarning=function(){var t,e,n;return t=arguments[0],n=2<=arguments.length?a.call(arguments,1):[],e="Deprecation Warning: "+t,n=["Alternatives:"].concat(n.map(function(t){return"  "+t})),n=n.map(function(t){return"  "+t}),console.warn([e].concat(n).join("\n")),console.trace("Stack Trace")},hx.consoleWarning=function(){var t,e;return t=arguments[0],e=2<=arguments.length?a.call(arguments,1):[],e=e.map(function(t){return"  "+t}),console.warn([t].concat(e).join("\n")),console.trace("Stack Trace")},hx.hash=function(t,e){var n,i,r,o,s;for(s=0,r=t.length-1,n=i=0,o=r;o>=i;n=i+=1)s=31*s+t.charCodeAt(n),s&=s;return e?Math.abs(s)%e:s},hx.transpose=function(t){var e,n,i,r,o,s,a,l,h;if(null==t.length)return void 0;if(h=t.length,0===h||null==t[0].length)return t;for(e=t[0].length,l=new Array(e),n=r=0,s=e;s>r;n=r+=1)for(l[n]=new Array(h),i=o=0,a=h;a>o;i=o+=1)l[n][i]=t[i][n];return l},o=void 0,r=void 0,hx.supports=function(t){var e;switch(t){case"touch":return null!=o?o:o="ontouchstart"in window;case"date":return void 0===r&&(e=document.createElement("input"),e.setAttribute("type","date"),r="text"!==e.type),r}},hx.debounce=function(t,e){var n;return n=void 0,function(){var i;return n&&clearTimeout(n),i=function(){return n=void 0,e()},n=setTimeout(i,t)}},hx.clamp=function(t,e,n){return Math.min(e,Math.max(t,n))},hx.clampUnit=function(t){return hx.clamp(0,1,t)},hx.randomId=function(t,e){var n,i,r;return null==t&&(t=16),null==e&&(e="ABCEDEF0123456789"),r=e.split(""),i=r.length,function(){var e,o,s;for(s=[],n=e=0,o=t;o>e;n=e+=1)s.push(r[Math.floor(Math.random()*i)]);return s}().join("")},hx.min=function(t){return Math.min.apply(null,null!=t?t.filter(hx.defined):void 0)},hx.minBy=function(t,e){var n,i,r,o,s,a,l,h,c;if(null==t||0===t.length)return void 0;if(e){for(a=t[0],l=e(a),i=r=1,h=t.length-1;h>r;i=r+=1)c=t[i],void 0!==c&&(n=e(c),void 0!==n&&l>n&&(a=c,l=n));return a}for(a=t[0],s=0,o=t.length;o>s;s++)c=t[s],void 0!==c&&a>c&&(a=c);return a},hx.max=function(t){return Math.max.apply(null,null!=t?t.filter(hx.defined):void 0)},hx.maxBy=function(t,e){var n,i,r,o,s,a,l,h,c;if(null==t||0===t.length)return void 0;if(e){for(a=t[0],l=e(a),i=r=1,h=t.length-1;h>r;i=r+=1)c=t[i],void 0!==c&&(n=e(c),void 0!==n&&n>l&&(a=c,l=n));return a}for(a=t[0],s=0,o=t.length;o>s;s++)c=t[s],void 0!==c&&c>a&&(a=c);return a},hx.range=function(t){var e,n,i,r;for(i=[],r=e=0,n=t;n>e;r=e+=1)i.push(r);return i},hx.sum=function(t,e){return t.reduce(function(t,e){return t+e},0)},hx.flatten=function(t){return[].concat.apply([],t)},hx.cycle=function(t,e){return t[e%t.length]},hx.hashList=function(t,e){return t[hx.hash(e,t.length)]},hx.find=function(t,e){var n,i,r;for(i=0,r=t.length;r>i;i++)if(n=t[i],e(n))return n;return void 0},hx.isString=function(t){return"string"==typeof t||t instanceof String},hx.isFunction=function(t){return"function"==typeof t},hx.isArray=function(t){return t instanceof Array},hx.isObject=function(t){return"object"==typeof t&&!hx.isArray(t)},hx.isBoolean=function(t){return t===!0||t===!1||"boolean"==typeof t},hx.isPlainObject=function(t){return"object"==typeof t&&null!==t&&!t.nodeType&&t.constructor&&t.constructor.prototype.hasOwnProperty("isPrototypeOf")},hx.groupBy=function(t,e){var n,i,r,o,s,a;for(o=new hx.Map,i=0,r=t.length;r>i;i++)a=t[i],n=e(a),o.has(n)||o.set(n,new hx.List),o.get(n).add(a);return s=o.entries(),s.forEach(function(t){return t[1]=t[1].entries()}),s},hx.unique=function(t){return new hx.Set(t).values()},hx.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},hx.startsWith=function(t,e){return 0===t.lastIndexOf(e,0)},hx.tween=function(t,e,n){return t+(e-t)*n},hx.defined=function(t){return void 0!==t},hx.zip=function(t){var e,n,i,r,o;if(t){if(t.length>0){if(i=hx.min(t.map(function(t){return t.length||0})),i>0){for(o=[],e=n=0,r=i;r>n;e=n+=1)o.push(t.map(function(t){return t[e]}));return o}return[]}return[]}return[]},t=function(e,n,i){var r,o,s;o=[];for(r in n)s=n[r],hx.isPlainObject(s)?(null==e[r]&&(e[r]={}),o.push(t(e[r],s,i))):void 0!==s||i?o.push(e[r]=hx.clone(s)):o.push(void 0);return o},e=function(e,n,i){var r,o,s,a,l,h,c,u;if(e){for(c={},o=0,s=i.length;s>o;o++)h=i[o],hx.isPlainObject(h)&&t(c,h,n);return c}for(c={},l=0,a=i.length;a>l;l++)if(h=i[l],hx.isPlainObject(h))for(r in h)u=h[r],(void 0!==u||n)&&(c[r]=u);return c},hx.merge=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],e(!0,!0,t)},hx.merge.defined=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],e(!0,!1,t)},hx.shallowMerge=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],e(!1,!0,t)},hx.shallowMerge.defined=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],e(!1,!1,t)},hx.clone=function(t){return hx.isArray(t)?t.map(hx.clone):hx.isPlainObject(t)?hx.merge({},t):hx.isObject(t)&&null!==t?{}:t},hx.shallowClone=function(t){return hx.isArray(t)?t.slice():hx.isPlainObject(t)?hx.shallowMerge({},t):hx.isObject(t)&&null!==t?{}:t},s=["webkit","ms","moz","Moz","o","O"],hx.vendor=function(t,e){var n,i,r,o;if(e in t)return t[e];for(n=0,i=s.length;i>n;n++)if(r=s[n],(o=r+e.charAt(0)+e.slice(1))in t)return t[o]},hx.identity=function(t){return t},n=null,hx.parseHTML=function(t){var e,i;if(!n)try{document.createRange().createContextualFragment(""),n=function(t){return document.createRange().createContextualFragment(t)}}catch(i){e=i,n=function(t){var e,n,i;for(n=document.createDocumentFragment(),i=document.createElement("div"),i.innerHTML=t;e=i.firstChild;)n.appendChild(e);return n}}return n(t)},hx.cleanNode=function(t,e){var n,i;for(null==e&&(e=!0),i=t.childNodes.length-1;i>=0;)n=t.childNodes[i],3===n.nodeType&&/\s/.test(n.nodeValue)?t.removeChild(n):1===n.nodeType&&e&&hx.cleanNode(n),i-=1;return t},i=void 0,hx.scrollbarSize=function(){var t,e,n,r;return null==i&&(t=document.createElement("p"),t.style.width="100%",t.style.height="200px",e=document.createElement("div"),t=hx.detached("p").style("width","100%").style("height","200px"),e=hx.detached("div").style("position","absolute").style("top","0").style("left","0").style("visiblity","hidden").style("width","200px").style("height","150px").style("overflow","hidden"),e.append(t),hx.select("body").append(e),n=t.node().offsetWidth,e.style("overflow","scroll"),r=t.node().offsetWidth,n===r&&(r=e.node().clientWidth),e.remove(),i=n-r),i}}(),function(){var t,e,n;t=function(){function t(){this.callbacks=new hx.Map,this.allCallbacks=new hx.List}return t.prototype.emit=function(t,e){var n,i,r,o,s,a,l;if(this.callbacks.has(t))for(a=this.callbacks.get(t).entries(),i=0,o=a.length;o>i;i++)(n=a[i])(e);for(l=this.allCallbacks.entries(),r=0,s=l.length;s>r;r++)(n=l[r])(t,e);return this},t.prototype.on=function(t,e){return t?(this.callbacks.has(t)||this.callbacks.set(t,new hx.List),this.callbacks.get(t).add(e)):this.allCallbacks.add(e),this},t.prototype.has=function(t){return this.allCallbacks.size>0||this.callbacks.has(t)&&this.callbacks.get(t).size>0},t.prototype.off=function(t,e){var n;return e?t?null!=(n=this.callbacks.get(t))&&n.remove(e):this.allCallbacks.remove(e):t?this.callbacks.set(t,new hx.List):(this.callbacks=new hx.Map,this.allCallbacks=new hx.List),this},t.prototype.pipe=function(t,e,n){var i;return i=n?function(t){return-1!==n.indexOf(t)}:function(t){return!0},e?this.on(null,function(n,r){return i(n)?t.emit(e+"."+n,r):void 0}):this.on(null,function(e,n){return i(e)?t.emit(e,n):void 0}),this},t}(),e=function(){function e(){this.suppressedMap=new hx.Map,this.emitters=new hx.List,this.emittersMap=new hx.Map,this.global=i(this,"default")}var i,r;return i=function(e,n){var i;return i=new t,e.emittersMap.set(n,i),e.emitters.add(i),i},r=function(t,e){return t.emittersMap.has(e)&&(t.emittersMap["delete"](e),t.emitters.remove(t)),t},e.prototype.emit=function(t,e){var n,i,r,o,s;if(!this.suppressedMap.get(t)){if(null!=this.deprecatedEvents)for(n in this.deprecatedEvents)this.deprecatedEvents[n].event===t&&this.emit(n,e);for(s=this.emitters.entries(),r=0,o=s.length;o>r;r++)i=s[r],i.emit(t,e)}return this},e.prototype.suppressed=function(t,e){return arguments.length>1?(this.suppressedMap.set(t,!!e),this):!!this.suppressedMap.get(t)},e.prototype.on=function(t,e,r){var o,s,a;return null!=(o=null!=(a=this.deprecatedEvents)?a[t]:void 0)&&(n(o.module,t,o.event),t=o.event),"default"===e?(hx.consoleWarning('"default" is a reserved namespace. It can not be used as a namespace name.'),this):(hx.isString(e)?(s=this.emittersMap.get(e),s||(s=i(this,e)),s.on(t,r)):this.global.on(t,e),this)},e.prototype.has=function(t){var e,n,i,r;if(this.global.has(t))return!0;for(r=this.emitters.entries(),n=0,i=r.length;i>n;n++)if(e=r[n],e.has(t))return!0;return!1},e.prototype.off=function(t,e,n){var i,r,o,s,a;if(hx.isString(e))null!=(s=this.emittersMap.get(e))&&s.off(t,n);else for(a=this.emitters.entries(),r=0,o=a.length;o>r;r++)i=a[r],i.off(t,n);return this},e.prototype.pipe=function(t,e,n){return this.global.pipe(t,e,n),this},e}(),hx.EventEmitter=e,n=function(t,e,n){var i;return i=e===n?"Check the docs for alternatives.":"Use "+n+" instead.",hx.deprecatedWarning(t+": "+e,i)}}(),function(){var t,e,n;t=function(){function t(t,e,n,i,r,o,s){this.r=null!=t?t:0,this.g=null!=e?e:0,this.b=null!=n?n:0,this.a=null!=i?i:1,this.h=null!=r?r:0,this.s=null!=o?o:0,this.l=null!=s?s:0}var e,n,i,r;return i=function(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t},e=function(t){var e;return e=t.toString(16),1===e.length?"0"+e:e},r=function(t){var e,n,r,o,s,a,l,h;return r=t[0],h=t[1],o=t[2],h=hx.clampUnit(h),o=hx.clampUnit(o),0===h?l=n=e=o:(a=.5>o?o*(1+h):o+h-o*h,s=2*o-a,l=i(s,a,r+1/3),n=i(s,a,r),e=i(s,a,r-1/3)),l*=255,n*=255,e*=255,[l,n,e]},n=function(t){var e,n,i,r,o,s,a,l,h;if(l=t[0]/255,i=t[1]/255,e=t[2]/255,s=Math.max(l,i,e),a=Math.min(l,i,e),o=(s+a)/2,n=s-a,s===a)r=h=0;else{switch(h=o>.5?n/(2-s-a):n/(s+a),s){case l:r=(i-e)/n+(e>i?6:0);break;case i:r=(e-l)/n+2;break;case e:r=(l-i)/n+4}r/=6}return[r,h,o]},t.prototype.getTextCol=function(){var t;return t=(299*this.r+587*this.g+114*this.b)/1e3,t>=128?"black":"white"},t.prototype.setRGB=function(t,e){return null==t&&(t=[]),null==t[0]&&(t[0]=this.r),null==t[1]&&(t[1]=this.g),null==t[2]&&(t[2]=this.b),null==t[3]&&(t[3]=this.a),this.r=Math.round(Number(t[0])),this.g=Math.round(Number(t[1])),this.b=Math.round(Number(t[2])),this.a=Math.round(100*Number(t[3]))/100,e||this.setHSL(n([this.r,this.g,this.b]),1),this},t.prototype.setHSL=function(t,e){return null==t&&(t=[]),null==t[0]&&(t[0]=this.h),null==t[1]&&(t[1]=this.s),null==t[2]&&(t[2]=this.l),null==t[3]&&(t[3]=this.a),t[0]>1&&(t[0]/=360),t[1]>1&&(t[1]/=100),t[2]>1&&(t[2]/=100),this.h=Number(t[0]),this.s=Number(t[1]),this.l=Number(t[2]),this.a=Math.round(100*Number(t[3]))/100,e||this.setRGB(r([this.h,this.s,this.l]),1),this},t.prototype.toString=function(t){var n,i,r;switch(n=Math.round(360*this.h),r=Math.round(100*this.s),i=Math.round(100*this.l),t){case"hsl":return"hsl("+n+","+r+"%,"+i+"%)";case"hsla":return"hsla("+n+","+r+"%,"+i+"%,"+this.a+")";case"rgb":return"rgb("+this.r+","+this.g+","+this.b+")";case"rgba":return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")";default:return 1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"#"+e(this.r)+e(this.g)+e(this.b)}},t.prototype.toArray=function(){return[this.r,this.g,this.b,this.a]},t.prototype.mix=function(t,e){var n,i,r,o;return null==e&&(e=.5),o=this.r*(1-e)+t.r*e,r=this.g*(1-e)+t.g*e,i=this.b*(1-e)+t.b*e,n=this.a*(1-e)+t.a*e,this.setRGB([o,r,i,n])},t.prototype.range=function(t,e,n,i){var r,o,s,a,l;return null==t&&(t=3),null==e&&(e=3),null==n&&(n=.5),l=n/Math.max(t,e,1),a=this,o=hx.range(t+1).map(function(t){return a.clone().lighten(l*t)}),r=hx.range(e).reverse().map(function(t){return a.clone().darken(l*(t+1))}),s=r.concat(o),i?"array"===i?s.map(function(t){return t.toArray()}):s.map(function(t){return t.toString(i)}):s},t.prototype.saturate=function(t){return this.s=this.s+this.s*t,this.setHSL([this.h,this.s,this.l])},t.prototype.desaturate=function(t){return this.s=this.s-this.s*t,this.setHSL([this.h,this.s,this.l])},t.prototype.saturation=function(t){return 0!==this.s&&(this.s=t),this.setHSL([this.h,this.s,this.l])},t.prototype.lighten=function(t){return this.l=this.l+this.l*t,this.setHSL([this.h,this.s,this.l])},t.prototype.darken=function(t){return this.l=this.l-this.l*t,this.setHSL([this.h,this.s,this.l])},t.prototype.lightness=function(t){return this.l=t,this.setHSL([this.h,this.s,this.l])},t.prototype.fadeIn=function(t){return this.a=Math.round(100*(this.a+this.a*t))/100,this.a>1&&(this.a=1),this},t.prototype.fadeOut=function(t){return this.a=Math.round(100*(this.a-this.a*t))/100,this.a<0&&(this.a=0),this},t.prototype.alpha=function(t){return this.a=t,this},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a,this.h,this.s,this.l)},t}(),n=function(e){var n,i,r,o,s,a,l,h,c;if(!hx.isString(e))return void 0;if(-1!==e.indexOf("#"))e=e.substring(1),s=3===e.length?1:2,h=[e.substring(0,s),e.substring(s,2*s),e.substring(2*s,3*s)],1===s&&(h[0]+=""+h[0],h[1]+=""+h[1],h[2]+=""+h[2]),a=parseInt(h[0],16),r=parseInt(h[1],16),i=parseInt(h[2],16),n=1,l=[a,r,i,n];else{if(-1===e.indexOf("rgb"))return-1!==e.indexOf("hsl")?(c=e.replace("hsl(","").replace("hsla(","").replace(")","").replace("%","").replace("%","").replace("%",""),o=c.split(","),o.some(function(t){return isNaN(Number(t))})?void 0:(null==o[3]&&(o[3]=1),(new t).setHSL(o))):void 0;c=e.replace("rgb(","").replace("rgba(","").replace(")",""),l=c.split(",")}return null==l[3]&&(l[3]=1),l.some(function(t){return isNaN(Number(t))})?void 0:(new t).setRGB(l)},e=function(e){return e[0]=hx.clamp(0,255,e[0]),e[1]=hx.clamp(0,255,e[1]),e[2]=hx.clamp(0,255,e[2]),null==e[3]&&(e[3]=1),e[3]=hx.clamp(0,1,e[3]),(new t).setRGB(e)},hx.color=function(){return 4===arguments.length?(new t).setRGB([arguments[0],arguments[1],arguments[2],arguments[3]]):3===arguments.length?(new t).setRGB([arguments[0],arguments[1],arguments[2],1]):1===arguments.length?Array.isArray(arguments[0])?e(arguments[0]):n(arguments[0]):new t},hx.color.isColorString=function(t){return void 0!==n(t)},hx.color.isColor=function(e){return e instanceof t}}(),function(){var t,e,n,i,r,o,s,a,l,h,c,u,d;l={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},a=function(t,e){return t===window?window[e]:t instanceof Document?Document.prototype[e]:Element.prototype[e]},d=function(t,e){return a(e,"querySelector").call(e,t)},u=function(t,e){return a(e,"querySelectorAll").call(e,t)},"function"==typeof Sizzle&&(d=function(t,e){return Sizzle(t,e)[0]||null},u=Sizzle),s=function(t,e){return null==e&&(e=!0),e?(null==t.__hx__&&(t.__hx__={}),t.__hx__):t.__hx__?t.__hx__:void 0},t=function(){function t(){this.elements=new hx.List,this.ids=new hx.Set}return t.prototype.add=function(t){var e,n;return e=s(t),null==e.id&&(e.id=hx.randomId()),n=e.id,this.ids.has(n)?void 0:(this.ids.add(n),this.elements.add(t))},t.prototype.remove=function(t){var e;return e=s(t,!1),e&&e.id&&this.ids.has(e.id)?(this.elements.remove(t),this.ids["delete"](e.id)):void 0},t.prototype.entries=function(){return this.elements.entries()},t.prototype.has=function(t){var e;return e=s(t),e&&e.id&&this.ids.has(e.id)||!1},t}(),r=function(t,e){var n;for(e=e.parentNode,n=function(){if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";if(e.mozMatchesSelector)return"mozMatchesSelector";if(e.webkitMatchesSelector)return"webkitMatchesSelector";if(e.oMatchesSelector)return"oMatchesSelector";if(e.msMatchesSelector)return"msMatchesSelector";throw new Error("Dom matches method is not available (and is needed for closest())")}();e&&e!==document;){if(a(e,n).call(e,t))return e;e=e.parentNode}return void 0},o=function(e){var n,i,r,o,s,a,l;for(l=new t,n=0,r=e.length;r>n;n++)for(a=e[n],i=0,o=a.length;o>i;i++)s=a[i],l.add(s);return l.entries()},i=function(t,e,n){var i,r,o,s,a,l,h,c;if(c=hx.select(t),i=c.attr("class"),h=e.split(" ").filter(function(t){return""!==t}),!i)return void(n&&c.attr("class",h.join(" ")));for(o=i.split(" "),a=0,l=h.length;l>a;a++)r=h[a],""!==r&&(s=o.indexOf(r),n&&-1===s?o.push(r):n||-1===s||o.splice(s,1),c.attr("class",o.join(" ")))},h=function(t,e){return t?0===e.length?void 0:1===e.length?e[0]:e:e},n=[],e=function(){function t(t){this.nodes=t,this.nodes=this.nodes.filter(function(t){return null!=t}),this.singleSelection=!1}var e,p;return t.prototype.select=function(e){var n;return hx.isString(e)?(n=new t(this.nodes.map(function(t){return d(e,t)})),n.singleSelection=this.singleSelection,n):(hx.consoleWarning("Selection.select was passed the wrong argument type","Selection.select only accepts a string argument, you supplied:",e),new t([]))},t.prototype.selectAll=function(e){return hx.isString(e)?new t(o(this.nodes.map(function(t){return u(e,t)}))):(hx.consoleWarning("Selection.selectAll was passed the wrong argument type","Selection.selectAll only accepts a string argument, you supplied:",e),new t([]))},t.prototype.closest=function(e){var n;return n=hx.isString(e)?new t(this.nodes.map(function(t){return r(e,t)})):(hx.consoleWarning("Selection.closest was passed the wrong argument type","Selection.closest only accepts a string argument, you supplied:",e),new t([])),n.singleSelection=this.singleSelection,n},p=function(t,e,n){var i,r,o,s,a,h,c;if(e instanceof HTMLElement)return t.singleSelection?1===t.nodes.length?(n(t.nodes[0],e),[e]):[]:(hx.consoleWarning("Selection Api error when attaching element","You can not attach an existing element to a selection with multiple elements"),[]);for(h=t.nodes,c=[],i=0,r=h.length;r>i;i++)a=h[i],o=l.hasOwnProperty(e)?l[e]:a.namespaceURI,s=a.ownerDocument.createElementNS(o,e),n(a,s),c.push(s);return c},e=function(e,n,i,r){var o,s,a,l,h,c;return null==r&&(r=!1),c=e.singleSelection,a=n instanceof t?(c=c&&n.singleSelection,o=r?-1:1,l=function(){var t,r,a,l,h;for(l=n.nodes,a=o,h=[],a>0?(t=0,r=l.length):t=l.length-1;a>0?r>t:t>=0;t+=a)s=l[t],h.push(p(e,s,i));return h}(),hx.flatten(r?l.reverse():l)):hx.isArray(n)?(c=!1,o=r?-1:1,l=function(){var t,r,a,l;for(a=o,l=[],a>0?(t=0,r=n.length):t=n.length-1;a>0?r>t:t>=0;t+=a)s=n[t],l.push(p(e,s,i));return l}(),hx.flatten(r?l.reverse():l)):p(e,n,i),h=new t(a),h.singleSelection=c,h},t.prototype.prepend=function(t){return e(this,t,function(t,e){return t.insertBefore(e,t.firstChild)},!0)},t.prototype.append=function(t){return e(this,t,function(t,e){return t.appendChild(e)})},t.prototype.add=function(t){return this.append(t),this},t.prototype.insertBefore=function(t){return e(this,t,function(t,e){return t.parentNode.insertBefore(e,t)})},t.prototype.insertAfter=function(t){return e(this,t,function(t,e){return t.parentNode.insertBefore(e,t.nextSibling)},!0)},t.prototype.remove=function(){var t,e,n,i,r,o;for(i=this.nodes,o=[],t=0,e=i.length;e>t;t++)n=i[t],o.push(null!=(r=n.parentNode)?r.removeChild(n):void 0);return o},t.prototype.clear=function(){var t,e,n,i;for(i=this.nodes,t=0,e=i.length;e>t;t++)for(n=i[t];n.firstChild;)a(n,"removeChild").call(n,n.firstChild);return this},t.prototype.node=function(t){return null==t&&(t=0),this.nodes[t]},t.prototype.clone=function(e){var n,i,r;return null==e&&(e=!0),n=function(){var t,n,r,o;for(r=this.nodes,o=[],t=0,n=r.length;n>t;t++)i=r[t],o.push(a(i,"cloneNode").call(i,e));return o}.call(this),r=new t(n),r.singleSelection=this.singleSelection,r},t.prototype.prop=function(t,e){var n,i,r,o;if(2===arguments.length){if(null!=e)for(o=this.nodes,n=0,i=o.length;i>n;n++)r=o[n],r[t]=e;return this}return h(this.singleSelection,function(){var e,n,i,o;for(i=this.nodes,o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push(r[t]);return o}.call(this))},t.prototype.attr=function(t,e){var n,i,r,o,s,c,u;if(t.indexOf(":")>=0?(c=t.split(":"),o=l[c[0]],n=c[1]):n=t,2===arguments.length){for(u=this.nodes,i=0,r=u.length;r>i;i++)s=u[i],o?void 0!==e?a(s,"setAttributeNS").call(s,o,n,e):a(s,"removeAttributeNS").call(s,o,n):void 0!==e?a(s,"setAttribute").call(s,n,e):a(s,"removeAttribute").call(s,n);return this}return o?h(this.singleSelection,function(){var t,e,i,r;for(i=this.nodes,r=[],t=0,e=i.length;e>t;t++)s=i[t],r.push(a(s,"getAttributeNS").call(s,o,n));return r}.call(this)):h(this.singleSelection,function(){var t,e,i,r;for(i=this.nodes,r=[],t=0,e=i.length;e>t;t++)s=i[t],r.push(a(s,"getAttribute").call(s,n));return r}.call(this))},t.prototype.style=function(t,e){var n,i,r,o;if(2===arguments.length){for(o=this.nodes,n=0,i=o.length;i>n;n++)r=o[n],void 0!==e?r.style.setProperty(t,e):r.style.removeProperty(t);return this}return h(this.singleSelection,function(){var e,n,i,o;for(i=this.nodes,o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push(window.getComputedStyle(r,null).getPropertyValue(t));return o}.call(this))},t.prototype.text=function(t){var e,n,i,r;if(1===arguments.length){for(r=this.nodes,e=0,n=r.length;n>e;e++)i=r[e],i.textContent=null!=t?t:"";return this}return h(this.singleSelection,function(){var t,e,n,r;for(n=this.nodes,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.textContent||"");return r}.call(this))},t.prototype.html=function(t){var e,n,i,r;if(1===arguments.length){for(r=this.nodes,e=0,n=r.length;n>e;e++)i=r[e],i.innerHTML=t||"";return this}return h(this.singleSelection,function(){var t,e,n,r;for(n=this.nodes,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.innerHTML||"");return r}.call(this))},t.prototype["class"]=function(t){var e,n,i,r;if(1===arguments.length){for(r=this.nodes,e=0,n=r.length;n>e;e++)i=r[e],a(i,"setAttribute").call(i,"class",t||"");return this}return h(this.singleSelection,function(){var t,e,n,r;for(n=this.nodes,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(a(i,"getAttribute").call(i,"class")||"");return r}.call(this))},t.prototype.classed=function(t,e){var n,r,o,s,l,c;if(1===arguments.length)return n=function(){var t,e,n,i;for(n=this.nodes,i=[],t=0,e=n.length;e>t;t++)l=n[t],i.push(a(l,"getAttribute").call(l,"class")||"");return i}.call(this),h(this.singleSelection,function(){var e,i,o;for(o=[],e=0,i=n.length;i>e;e++)r=n[e],o.push(-1!==r.split(" ").indexOf(t));return o}());for(c=this.nodes,o=0,s=c.length;s>o;o++)l=c[o],i(l,t,e);return this},t.prototype.value=function(t){return 1===arguments.length?this.prop("value",t):this.prop("value")},t.prototype.on=function(t,e,i){var r,o,l,h,c,u,d,p,f,x,g;for(hx.isString(e)||(i=e,e="hx.selection"),"default"===e&&(e="hx.selection"),g=this.nodes,u=0,p=g.length;p>u;u++){if(x=g[u],o=s(x),l=o.eventEmitter?o.eventEmitter:o.eventEmitter=new hx.EventEmitter,null==o.eventAugmenters&&(o.eventAugmenters=new hx.Map),null==o.listenerNamesRegistered&&(o.listenerNamesRegistered=new hx.Set),o.listenerNamesRegistered.has(t)||(h=function(e){return l.emit(t,e)},o.listenerNamesRegistered.add(t),a(x,"addEventListener").call(x,t,h)),l.off(t,e),!o.eventAugmenters.has(t)){for(c=[],d=0,f=n.length;f>d;d++)r=n[d],r.name===t&&c.push(r.setup(x,l));o.eventAugmenters.set(t,c)}e?l.on(t,e,i):l.on(t,i)}return this},t.prototype.off=function(t,e,n){var i,r,o,a,l,h,c,u,d,p,f;for(hx.isString(e)||(n=e,e=void 0),"default"===e&&(e="hx.selection"),c=this.nodes,r=0,a=c.length;a>r;r++){if(h=c[r],i=s(h),null!=(u=i.eventAugmenters)?u.has(t):void 0){for(d=i.eventAugmenters.get(t),o=0,l=d.length;l>o;o++)(f=d[o])();i.eventAugmenters["delete"](t)}null!=(p=i.eventEmitter)&&p.off(t,e,n)}return this},t.prototype.data=function(t,e){var n,i,r;return 1===arguments.length?(r=function(){var e,r,o,a;for(o=this.nodes,a=[],e=0,r=o.length;r>e;e++)i=o[e],n=s(i),n.data?a.push(n.data.get(t)):a.push(void 0);return a}.call(this),h(this.singleSelection,r)):(r=function(){var r,o,a,l;for(a=this.nodes,l=[],r=0,o=a.length;o>r;r++)i=a[r],n=s(i),null==n.data&&(n.data=new hx.Map),l.push(n.data.set(t,e));return l}.call(this),this)},t.prototype.forEach=function(t){return this.nodes.map(function(t){return c(t)}).forEach(t),this},t.prototype.map=function(t){return h(this.singleSelection,this.nodes.map(t))},t.prototype.filter=function(e){var n;return n=new t(this.nodes.filter(e)),n.singleSelection=this.singleSelection,n},t.prototype.box=function(){var t;return h(this.singleSelection,function(){var e,n,i,r;for(i=this.nodes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(a(t,"getBoundingClientRect").call(t));return r}.call(this))},t.prototype.width=function(){var t;return h(this.singleSelection,function(){var e,n,i,r;for(i=this.nodes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(a(t,"getBoundingClientRect").call(t).width);return r}.call(this))},t.prototype.height=function(){var t;return h(this.singleSelection,function(){var e,n,i,r;for(i=this.nodes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(a(t,"getBoundingClientRect").call(t).height);return r}.call(this))},t.prototype.size=function(){return this.nodes.length},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.contains=function(t){var e,n,i,r;for(r=this.nodes,e=0,n=r.length;n>e;e++)if(i=r[e],a(i,"contains").call(i,t))return!0;return!1},t}(),c=function(t,n){var i,r;return i=n?t:"string"==typeof t?[d(t,document)]:[t],r=new e(i),r.singleSelection=!n,r},hx.select=function(t){return t instanceof e?(hx.consoleWarning("hx.select was passed a selection","Calling hx.select on a selection returns the same selection",t),t):t instanceof HTMLElement||t instanceof SVGElement||hx.isString(t)||t===document||t===window?c(t):(hx.consoleWarning("hx.select was passed the wrong argument type","hx.select only accepts a HTMLElement, SVGElement or string argument, you supplied:",t),new e([]))},hx.select.getHexagonElementDataObject=s,hx.select.addEventAugmenter=function(t){return n.push(t)},hx.selectAll=function(t){return hx.isString(t)||hx.isArray(t)?hx.isArray(t)?c(t,!0):c(document).selectAll(t):(hx.consoleWarning("hx.selectAll was passed the wrong argument type","hx.selectAll only accepts a string argument, you supplied:",t),new e([]))},hx.detached=function(t,e){return e=l.hasOwnProperty(t)?l[t]:l.xhtml,hx.select(document.createElementNS(e,t))},hx.Selection=e}(),function(){var t,e,n;n=hx.vendor(window,"requestAnimationFrame")||function(t){return setTimeout(t,17)},e=function(t,e){return t()?void 0:n(e)},hx.loop=function(t){var n;return n=function(){return e(t,n)},void e(t,n)},hx.transition=function(t,e,n,i){var r,o;return null==n&&(n=hx.ease.linear),o=(new Date).getTime(),0>=t?(e(1,!1),i&&i(!1),hx.identity):(r=!1,hx.loop(function(){var s;return s=((new Date).getTime()-o)/t,s>=1||r?(e(1,r),i&&i(r),!0):(e(n(s),!1),!1)}),function(){return r=!0})},hx.ease=t={linear:hx.identity,quad:function(t){return t*t},cubic:function(t){return t*t*t}}}(),function(){var t,e;e=function(t){var e,n,i;for(i=new RegExp(/[-+]?(?:\d+\.?\d*|\.?\d+)|((?:[^-+\d])+|\D+)/g),n=[];null!==(e=i.exec(t));)n.push(isNaN(parseInt(e[0]))?e[0]:Number(e[0]));return n},t=function(t,e){return t=+t,
e=+e,function(n){return t*(1-n)+e*n}},hx.interpolate=function(n,i){var r,o,s;return"number"==typeof n?t(n,i):(r=hx.color(n),o=hx.color(i),void 0!==r&&void 0!==o?function(t){return r.clone().mix(o,t).toString("rgba")}:(n=e(n),i=e(i),n.length===i.length?function(e){var r,o,s,a;for(r=[],o=s=0,a=n.length;a>=s;o=s+=1)isNaN(parseInt(n[o]))||isNaN(parseInt(i[o]))?n[o]===i[o]?r[o]=n[o]:r[o]=i[o]:r[o]=t(n[o],i[o])(e);return r.join("")}:(s=i.join(""),function(t){return s})))}}(),function(){var t,e,n,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function e(t,n){this.node=t,this.ease=null!=n?n:hx.ease.linear,e.__super__.constructor.apply(this,arguments),this.cancelers=[],this.remaining=0,this.finished=!1,this.endCallback=function(t){return function(e){return t.remaining--,t.remaining<=0&&!t.finished&&!e?(t.finished=!0,t.emit("end")):void 0}}(this)}var n;return i(e,t),n=function(t,e){return this.remaining++,this.cancelers.push(hx.transition(e,t,this.ease,this.endCallback)),this},e.prototype.style=function(t,e,i){var r,o;return this.node?4===arguments.length?(r=hx.interpolate(arguments[1],arguments[2]),o=function(e){return function(n,i){return i?void 0:e.node.style.setProperty(t,r(n))}}(this),n.call(this,o,arguments[3]||200)):(r=hx.interpolate(window.getComputedStyle(this.node,null).getPropertyValue(t),e),o=function(e){return function(n,i){return i?void 0:e.node.style.setProperty(t,r(n))}}(this),n.call(this,o,i||200)):this.endCallback(),this},e.prototype.attr=function(t,e,i){var r,o;return this.node?4===arguments.length?(r=hx.interpolate(arguments[1],arguments[2]),o=function(e){return function(n,i){return i?void 0:e.node.setAttribute(t,r(n))}}(this),n.call(this,o,arguments[3]||200)):(r=hx.interpolate(this.node.getAttribute(t),e),o=function(e){return function(n,i){return i?void 0:e.node.setAttribute(t,r(n))}}(this),n.call(this,o,i||200)):this.endCallback(),this},e.prototype.cancel=function(){var t,e,n,i;for(this.emit("cancelled"),i=this.cancelers,e=0,n=i.length;n>e;e++)(t=i[e])();return this},e}(hx.EventEmitter),hx.animate=function(e,n){return new t(e,n)},hx.Selection.prototype.animate=function(t){return hx.animate(this.nodes[0],t)},e=function(t){function e(t,n,i,r){this.node=t,this.trigger=n,e.__super__.constructor.apply(this,arguments),this.actions=[],this.start=i||function(t){return function(){return s.call(t)}}(this),this.cancelers=r||[],this.cancelled=!1,this.finished=!1,this.trigger&&this.trigger.on("end","hx.animate",function(t){return function(){return t.finished=!0,t.cancelled?void 0:s.call(t)}}(this))}var r,o,s;return i(e,t),e.prototype.and=function(t,e){var i;return null==e&&(e=200),hx.isFunction(t)?this.actions.push(t):this.node&&(i=n.get(t),i?this.actions.push(function(t){return function(){return i(t.node,e)}}(this)):hx.consoleWarning(t+" is not a registered morph","The available morphs are",n.entries())),this},e.prototype.then=function(t,n){return null==n&&(n=200),this.actions.length>0?new e(this.node,this,this.start,this.cancelers).and(t,n):this.and(t,n)},e.prototype["with"]=function(t,e){return this.then(t,e)},o=function(t,e){return function(){var n;return n=hx.animate(t),n.style.apply(n,e)}},e.prototype.andStyle=function(t,e,n){return this.and(o(this.node,arguments))},e.prototype.thenStyle=function(t,e,n){return this.then(o(this.node,arguments))},e.prototype.withStyle=function(t,e,n){return this.then(o(this.node,arguments))},r=function(t,e){return function(){var n;return n=hx.animate(t),n.attr.apply(n,e)}},e.prototype.andAttr=function(t,e,n){return this.and(r(this.node,arguments))},e.prototype.thenAttr=function(t,e,n){return this.then(r(this.node,arguments))},e.prototype.withAttr=function(t,e,n){return this.then(r(this.node,arguments))},e.prototype.cancel=function(){var t,e,n,i;if(!this.cancelled)for(this.emit("cancelled"),this.cancelled=!0,i=this.cancelers,e=0,n=i.length;n>e;e++)t=i[e],hx.isFunction(t.cancel)&&t.cancel();return this},s=function(){var t,e,n,i,r,o,s,a;if(this.actions.length>0){for(e=this.actions.length,r=function(t){return function(){return e--,0===e?t.emit("end"):void 0}}(this),o=this.actions,a=[],n=0,i=o.length;i>n;n++)t=o[n],s=t(r),void 0!==s&&s.cancel&&this.cancelers.push(s),s instanceof hx.EventEmitter?a.push(s.on("end","hx.animate",r)):0===t.length?a.push(r()):a.push(void 0);return a}return this.emit("end")},e.prototype.go=function(t){var e;return t===!0&&this.cancelOngoing(),this.start(),this.node&&(e=hx.select.getHexagonElementDataObject(this.node,!0),null==e.morphs&&(e.morphs=[]),e.morphs=e.morphs.filter(function(t){return!t.cancelled&&!t.finished}),e.morphs.push(this)),this},e.prototype.cancelOngoing=function(){var t,e,n,i,r;if(this.node&&(i=hx.select.getHexagonElementDataObject(this.node,!1),i&&i.morphs)){for(r=i.morphs,t=0,e=r.length;e>t;t++)n=r[t],n.finished||n.cancelled||n.cancel();i.morphs=[]}return this},e}(hx.EventEmitter),hx.morph=function(t){return new e(t)},hx.Selection.prototype.morph=function(){return new e(this.nodes[0])},n=new hx.Map,hx.morph.register=function(t,e){return n.set(t,e)}}(),function(){var t,e,n;t=function(t,e,n,i,r,o,s){return hx.select.addEventAugmenter({name:t,setup:function(i,r){var a,l,h,c,u,d;if(h=function(e){return r.emit(t,o(e))},i.addEventListener(e,h),c=hx.supports("touch"))for(u=function(e){return r.emit(t,s(e))},a=0,l=n.length;l>a;a++)d=n[a],i.addEventListener(d,u);return function(){var t,r,o;if(i.removeEventListener(e,h),c){for(o=[],t=0,r=n.length;r>t;t++)d=n[t],o.push(i.removeEventListener(d,u));return o}}}})},e=function(e,n,i,r,o){var s,a;return s=function(t){return{x:t.clientX,y:t.clientY,event:t}},a=function(t){return{x:t.targetTouches[0].clientX,y:t.targetTouches[0].clientY,event:t}},t(e,n,i,r,o,s,a)},n=function(e,n,i,r,o){var s;return s=function(t){return{event:t}},t(e,n,i,r,o,s,s)},e("pointerdown","mousedown",["touchstart"]),e("pointermove","mousemove",["touchmove"]),n("pointerup","mouseup",["touchend","touchcancel"]),n("pointerleave","mouseleave",["touchleave"]),n("pointerenter","mouseenter",["touchenter"])}(),function(){hx.component=function(t){var e,n,i;return null!=(e=hx.select(t).node())&&null!=(n=e.__hx__)&&null!=(i=n.components)?i[0]:void 0},hx.components=function(t){var e,n,i;return e=null!=(n=hx.select(t).node())&&null!=(i=n.__hx__)?i.components:void 0,e?e.slice():[]},hx.component.register=function(t,e){var n,i;i=hx.select(t).node(),null==i.__hx__&&(i.__hx__={}),null==(n=i.__hx__).components&&(n.components=[]),i.__hx__.components.push(e)},hx.Selection&&(hx.Selection.prototype.component=function(){return this.singleSelection?this.nodes[0]?hx.component(this.nodes[0]):void 0:this.nodes.map(hx.component)},hx.Selection.prototype.components=function(){return this.singleSelection?this.nodes[0]?hx.components(this.nodes[0]):void 0:this.nodes.map(hx.components)})}(),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;hx.morph.register("fadeout",function(t,e){return null==e&&(e=100),hx.animate(t).style("opacity",0,e)}),hx.morph.register("fadein",function(t,e){return null==e&&(e=100),hx.animate(t).style("opacity",1,e)}),i=function(t,e){var n,i,r,o,s,a,l;if("none"!==t.style("display")){for(a=[],n=0,r=e.length;r>n;n++)s=e[n],a.push({name:s,value:t.style(s)});return a}for(l=[],i=0,o=e.length;o>i;i++)s=e[i],l.push({name:s,value:"0px"});return l},n=function(t,e){var n,i,r,o;for(o=[],n=0,i=e.length;i>n;n++)r=e[n],o.push({name:r,value:t.style(r,"").style(r)});return o},r=function(t,e){var n,i,r;for(n=0,r=e.length;r>n;n++)i=e[n],t.style(i.name,i.value)},e=function(t,e,n){var i,r,o,s;for(i=t.animate(),r=0,s=e.length;s>r;r++)o=e[r],i.style(o.name,o.value,n);return i},hx.morph.register("expand",function(t,o){var s,a,l,h;return null==o&&(o=100),a=["height","padding-top","padding-bottom","margin-top","margin-bottom","width","padding-left","padding-right","margin-left","margin-right"],l=hx.select(t),h=i(l,a),l.style("display",""),s=n(l,a),r(l,h),l.classed("hx-morph-hidden",!0),e(l,s,o).on("end","hx.morphs",function(t){return n(l,a),l.classed("hx-morph-hidden",!1)})}),hx.morph.register("expandv",function(t,o){var s,a,l,h;return null==o&&(o=100),a=["height","padding-top","padding-bottom","margin-top","margin-bottom"],l=hx.select(t),h=i(l,a),l.style("display",""),s=n(l,a),r(l,h),l.classed("hx-morph-hidden",!0),e(l,s,o).on("end","hx.morphs",function(t){return n(l,a),l.classed("hx-morph-hidden",!1)})}),hx.morph.register("expandh",function(t,o){var s,a,l,h;return null==o&&(o=100),a=["width","padding-left","padding-right","margin-left","margin-right"],l=hx.select(t),h=i(l,a),l.style("display",""),s=n(l,a),r(l,h),l.classed("hx-morph-hidden",!0),e(l,s,o).on("end","hx.morphs",function(t){return n(l,a),l.classed("hx-morph-hidden",!1)})}),hx.morph.register("collapse",function(t,e){var n;return null==e&&(e=100),n=hx.select(t).classed("hx-morph-hidden",!0),hx.animate(t).style("height","0px",e).style("padding-top","0px",e).style("padding-bottom","0px",e).style("margin-top","0px",e).style("margin-bottom","0px",e).style("width","0px",e).style("padding-left","0px",e).style("padding-right","0px",e).style("margin-left","0px",e).style("margin-right","0px",e).on("end","hx.morphs",function(t){return n.style("display","none").style("height","").style("padding-top","").style("padding-bottom","").style("margin-top","").style("margin-bottom","").style("width","").style("padding-left","").style("padding-right","").style("margin-left","").style("margin-right","").classed("hx-morph-hidden",!1)})}),hx.morph.register("collapsev",function(t,e){var n;return null==e&&(e=100),n=hx.select(t).classed("hx-morph-hidden",!0),hx.animate(t).style("height","0px",e).style("padding-top","0px",e).style("padding-bottom","0px",e).style("margin-top","0px",e).style("margin-bottom","0px",e).on("end","hx.morphs",function(t){return n.style("display","none").style("height","").style("padding-top","").style("padding-bottom","").style("margin-top","").style("margin-bottom","").classed("hx-morph-hidden",!1)})}),hx.morph.register("collapseh",function(t,e){var n;return null==e&&(e=100),n=hx.select(t).classed("hx-morph-hidden",!0),hx.animate(t).style("width","0px",e).style("padding-left","0px",e).style("padding-right","0px",e).style("margin-left","0px",e).style("margin-right","0px",e).on("end","hx.morphs",function(t){return n.style("display","none").style("width","").style("padding-left","").style("padding-right","").style("margin-left","").style("margin-right","").classed("hx-morph-hidden",!1)})}),hx.morph.register("rotate-90",function(t,e){return null==e&&(e=100),hx.animate(t).style("-webkit-transform","matrix(1, 0, 0, 1, 0, 0)","matrix(0, 1, -1, 0, 0, 0)",e).style("transform","matrix(1, 0, 0, 1, 0, 0)","matrix(0, 1, -1, 0, 0, 0)",e).on("end","hx.morphs",function(){return hx.select(t).style("transform","").style("-webkit-transform","")}).on("cancel","hx.morphs",function(){return hx.select(t).style("transform","").style("-webkit-transform","")})}),hx.morph.register("rotate-0",function(t,e){return null==e&&(e=100),hx.animate(t).style("-webkit-transform","matrix(0, 1, -1, 0, 0, 0)","matrix(1, 0, 0, 1, 0, 0)",e).style("transform","matrix(0, 1, -1, 0, 0, 0)","matrix(1, 0, 0, 1, 0, 0)",e).on("end","hx.morphs",function(){return hx.select(t).style("transform","").style("-webkit-transform","")}).on("cancel","hx.morphs",function(){return hx.select(t).style("transform","").style("-webkit-transform","")})}),t=function(t){function e(t){this.cancel=o(this.cancel,this),e.__super__.constructor.apply(this,arguments),this.timeout=setTimeout(function(t){return function(){return t.emit("end")}}(this),t)}return s(e,t),e.prototype.cancel=function(){return clearTimeout(this.timeout)},e}(hx.EventEmitter),hx.morph.register("delay",function(e,n){return null==n&&(n=100),new t(n)})}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){var t;n.__super__.constructor.apply(this,arguments),this.eventId=hx.randomId(),this.exceptions=new hx.List,t=void 0,this.downAction=function(e){return function(n){var i,r,o,s,a;for(n=n.event,t=n.target,i=!0,a=e.exceptions.entries(),o=0,s=a.length;s>o;o++)r=a[o],r.contains(n.target)&&(i=!1);return i?e.emit("click"):void 0}}(this),this.upAction=function(e){return function(n){var i,r,o,s,a,l,h;for(n=n.event,i=!0,s=document.documentElement.contains(n.target),h=t&&!t.contains(n.target),(h||!s)&&(i=!1),t=void 0,l=e.exceptions.entries(),o=0,a=l.length;a>o;o++)r=l[o],r.contains(n.target)&&(i=!1);return i?e.emit("click"):void 0}}(this),hx.select(document).on("pointerdown","hx.click-detector."+this.eventId,this.downAction),hx.select(document).on("pointerup","hx.click-detector."+this.eventId,this.upAction)}return e(n,t),n.prototype.addException=function(t){return this.exceptions.add(t),this},n.prototype.removeAllExceptions=function(){return this.exceptions.clear(),this},n.prototype.cleanUp=function(){return hx.select(document).off("pointerdown","hx.click-detector."+this.eventId,this.downAction),hx.select(document).off("pointerup","hx.click-detector."+this.eventId,this.upAction),this},n}(hx.EventEmitter),hx.ClickDetector=t}(),function(){var t,e,n,i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=function(t,e){return t?e?window.scrollX:window.innerWidth:e?window.scrollY:window.innerHeight},e=function(t){var e;return e=hx.select(t),e.size()>0&&"fixed"===e.style("position")?!0:void 0},i=function(t){var e,n;return e=hx.select(t),n=Number(e.style("z-index")),!isNaN(n)&&n>0?n:void 0},n=function(t,e,n){var i,r,o;for(i=t,o=[];null!==i&&9!==i.nodeType;){if(r=e(i),n)null!=r&&o.push(r);else if(null!=r)return r;if(i=i.parentNode,null==i)break;if(n&&9===i.nodeType)return o}return n?[]:!1},t=function(t){function s(t,e,n){var i;this.selector=t,this.dropdownContent=e,s.__super__.constructor.apply(this,arguments),hx.component.register(this.selector,this),this.options=hx.merge.defined({mode:"click",align:"lblt",spacing:Number(hx.theme.dropdown.spacing),matchWidth:!0,ddClass:""},n),this.selection=hx.select(this.selector),this.visible=!1,this.dropdown=void 0,this.clickDetector=new hx.ClickDetector,this.useScroll=!1,i=function(){switch(this.options.align){case"up":return"ltlb";case"down":return"lblt";case"left":return"ltrt";case"right":return"rtlt";default:return this.options.align}}.call(this),this.alignments=i.split(""),this.selection.on("click","hx.dropdown",function(t){return function(){return t.toggle()}}(this)),"hover"===this.options.mode&&(this.selection.on("mouseover","hx.dropdown",function(t){return function(){return t.show()}}(this)),this.selection.on("mouseout","hx.dropdown",function(t){return function(){return t.hide()}}(this)))}return o(s,t),s.prototype.toggle=function(t){return this.isOpen()?this.hide(t):this.show(t),this},s.prototype.show=function(t){var o,s,a,l,h,c,u,d,p,f,x,g,v,m,y,b,w,k,_;if(!this.dropdown)switch(this.dropdown=hx.select("body").append("div").attr("class","hx-dropdown"),this.options.ddClass.length>0&&this.dropdown.classed(this.options.ddClass,!0),!1){case!hx.isString(this.dropdownContent):this.dropdown.html(this.dropdownContent),this.clickDetector.removeAllExceptions(),this.clickDetector.addException(this.dropdown.node()),this.clickDetector.addException(this.selection.node());break;case!hx.isFunction(this.dropdownContent):x=this.dropdown.node(),this.dropdownContent(x),this.clickDetector.removeAllExceptions(),this.clickDetector.addException(x),this.clickDetector.addException(this.selection.node());break;default:console.error("hexagon: dropdownContent is not a valid type "+this.selector)}if(this.clickDetector.on("click","hx.dropdown",function(t){return function(){return t.hide()}}(this)),!this.visible&&this.dropdown){if(v=Math.max.apply(null,n(this.selection.node(),i,!0)),v>0&&this.dropdown.style("z-index",v+1),m=this.selection.box(),this.dropdown.style("display","block"),this.options.matchWidth&&this.dropdown.style("min-width",m.width+"px"),h=this.dropdown.box(),l=this.dropdown.style("max-height").replace("px",""),u=m.left,w=m.top,"r"===this.alignments[0]&&(u=m.right),"b"===this.alignments[1]&&(w=m.bottom),"r"===this.alignments[2]&&(u-=h.width),"b"===this.alignments[3]&&(w-=h.height),this.alignments[0]!==this.alignments[2])switch(this.alignments[2]){case"l":u+=this.options.spacing;break;case"r":u-=this.options.spacing}if(this.alignments[1]!==this.alignments[3])switch(this.alignments[3]){case"t":w+=this.options.spacing;break;case"b":p=!0,w-=this.options.spacing}y=hx.scrollbarSize(),0>u&&(u=0),(d=u+h.width-r(!0)+y)>0&&(u-=d),0>w&&(w=0),a=isNaN(l)?h.height:Math.min(l,h.height),(k=w+a-r())>0&&(f=!0,w-=k),s=function(t,e,n,i){var r,o,s;return r=n>t&&e>i,o=e>=i&&i>t&&t>=n,s=n>=t&&e>n&&i>=e,r||o?2:s?1:0},c=s(u,u+h.width,m.left,m.left+m.width),b=s(w,w+h.height,m.top,m.top+m.height),c>0&&b>0&&(b>1&&!f?(p=!1,w=m.top+m.height+this.options.spacing):(p=!0,w=m.top-h.height-this.options.spacing,0>w&&(p=!1,w=m.top+m.height+this.options.spacing))),g=n(this.selection.node(),e),g?this.dropdown.style("position","fixed"):(w+=r(!1,!0),u+=r(!0,!0)),_="top",p&&(_="bottom",o=document.body.scrollHeight-document.body.clientHeight,w=document.body.scrollHeight-w-o-h.height),this.dropdown.style("top","auto").style(_,w+"px").style("left",u+"px").style("width",h.width+"px"),this.dropdown.style("height","0px").style(_,w+8+"px").style("opacity",0).morph()["with"]("fadein",150).and("expandv",150).and(function(t){return function(){return t.dropdown.animate().style(_,w+"px",150)}}(this)).then(function(e){return function(){return e.useScroll&&null!=e.dropdown&&e.dropdown.style("overflow-y","auto"),e.emit("showend"),"function"==typeof t?t():void 0}}(this)).go(),this.visible=!0,this.emit("showstart"),this.emit("change",!0)}return this},s.prototype.hide=function(t){return this.visible&&(this.visible=!1,this.emit("hidestart"),this.emit("change",!1),this.emit("hideend"),"function"==typeof t&&t(),this.dropdown.remove(),this.dropdown=void 0,this.clickDetector.off("click","hx.dropdown")),this},s.prototype.isOpen=function(){return this.visible},s.prototype.cleanUp=function(){return this.clickDetector.cleanUp(),this},s}(hx.EventEmitter),hx.Dropdown=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var i,r,o;n.__super__.constructor.apply(this,arguments),this.options=hx.merge.defined({lazyContent:void 0,visible:!1,addIcon:!0,animate:!0},e),hx.component.register(t,this),this.lazyContentCreated=!1,this.selection=hx.select(t).classed("hx-openable",!0).classed("hx-collapsible",!0),r=this.selection.select(".hx-collapsible-heading"),(o=r.select(".hx-collapsible-toggle")).empty()?r.on("click","hx.collapsible",function(t){return function(){return t.toggle()}}(this)):(r.classed("hx-collapsible-heading-no-hover",!0),o.on("click","hx.collapsible",function(t){return function(){return t.toggle()}}(this))),i=this.selection.select(".hx-collapsible-content").style("height",0).style("opacity",0),this.options.addIcon&&(o.empty()?(r.select("i").remove(),r.prepend("i")["class"]("fa fa-chevron-right hx-collapsible-icon")):(o.select("i").remove(),o.prepend("i")["class"]("fa fa-chevron-right hx-collapsible-icon"))),this.visible=void 0,this.options.visible?this.show(!1):this.hide(!1)}return e(n,t),n.prototype.toggle=function(t,e){return t=null!=t?t:this.options.animate,this.isOpen()?this.hide(t,e):this.show(t,e)},n.prototype.show=function(t,e){var n,i;return t=null!=t?t:this.options.animate,this.lazyContentCreated||(this.lazyContentCreated=!0,this.options.lazyContent&&this.options.lazyContent(this.selection.select(".hx-collapsible-content").node())),this.visible!==!0&&(this.selection.classed("hx-collapsible-expanded",!0).classed("hx-opened",!0),n=this.selection.select(".hx-collapsible-content"),t?(i=this,n.morph()["with"]("expandv",100).and("fadein",100).then(function(){return i.emit("showend"),"function"==typeof e?e():void 0}).go(!0),this.selection.select(".hx-collapsible-heading").select(".hx-collapsible-icon").morph()["with"]("rotate-90",200).go(!0)):(n.style("display","").style("height","").style("opacity",""),this.emit("showend")),this.visible=!0,this.emit("showstart"),this.emit("change",!0)),this},n.prototype.hide=function(t,e){var n;return t=null!=t?t:this.options.animate,this.visible!==!1&&(this.selection.classed("hx-collapsible-expanded",!1).classed("hx-opened",!1),t?(n=this,this.selection.select(".hx-collapsible-content").morph()["with"]("fadeout",100).and("collapsev",100).then(function(){return n.emit("hideend"),"function"==typeof e?e():void 0}).go(!0),this.selection.select(".hx-collapsible-heading").select(".hx-collapsible-icon").morph()["with"]("rotate-0",200).go(!0)):(this.selection.select(".hx-collapsible-content").style("display","none"),this.emit("hideend")),this.visible=!1,this.emit("hidestart"),this.emit("change",!1)),this},n.prototype.isOpen=function(){return this.visible},n}(hx.EventEmitter),hx.Collapsible=t,hx.initializeCollapsibles=function(e,n){return hx.selectAll(e).map(function(e){return new t(e,n)})}}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){n.__super__.constructor.apply(this,arguments),hx.component.register(t,this),this.selection=hx.select(t).classed("hx-btn hx-btn-toggle",!0),this.options=hx.merge.defined({value:!this.selection.classed("hx-btn-toggle-off")},e),this.value(this.options.value),this.selection.on("click","hx.button",function(t){return function(){return t.value(!t.options.value),t.emit("change",t.options.value)}}(this))}return e(n,t),n.prototype.value=function(t){return null!=t?(this.options.value=t,this.selection.classed("hx-btn-toggle-off",!t).attr("data",t),this):this.options.value},n}(hx.EventEmitter),hx.ToggleButton=t}(),function(){var t,e,n,i;n=null!=("undefined"!=typeof Intl&&null!==Intl?Intl.Collator:void 0),t=n?new Intl.Collator(void 0,{numeric:!0}).compare:function(t,e){return e>t?-1:t>e?1:0},e=function(e,n){return isNaN(Number(e))||isNaN(Number(n))?t(e,n):e-n},i=function(t,e){var i;return null==e&&(e={numeric:!0}),i=n?new Intl.Collator(t,e).compare:function(n,i){return n.localeCompare(i,t,e)},function(t,e){return isNaN(Number(t))||isNaN(Number(e))?i(t,e):t-e}},hx.sort={compare:e,localeCompare:i}}(),function(){var t,e,n;t=void 0,n=void 0,e=function(){var e,i,r,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y,b,w;if(l=document.attachEvent,w=!1,m=function(t){var e,n,i,r;r=t.__resizeTriggers__,n=r.firstElementChild,e=r.lastElementChild,i=n.firstElementChild,e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},c=function(t){return t.offsetWidth!==t.__resizeLast__.width||t.offsetHeight!==t.__resizeLast__.height},y=function(t){var e;e=this,m(this),this.__resizeRAF__&&h(this.__resizeRAF__),this.__resizeRAF__=v(function(){c(e)&&(e.__resizeLast__.width=e.offsetWidth,e.__resizeLast__.height=e.offsetHeight,e.__resizeListeners__.forEach(function(n){n.call(e,t)}))})},u=function(){var t,e,n;w||(t=(i?i:"")+".resize-triggers { "+(o?o:"")+'visibility: hidden; opacity: 0; z-index: -1;} .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style"),n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n),w=!0)},!l){for(v=function(){var t;return t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},function(e){return t(e)}}(),h=function(){var t;return t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return t(e)}}(),e=!1,a="animation",x="",s="animationstart",d="Webkit Moz O ms".split(" "),b="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),g="",p=document.createElement("fakeelement"),void 0!==p.style.animationName&&(e=!0),e===!1&&(f=0);f<d.length;){if(void 0!==p.style[d[f]+"AnimationName"]){g=d[f],a=g+"Animation",x="-"+g.toLowerCase()+"-",s=b[f],e=!0;break}f++}r="resizeanim",i="@"+x+"keyframes "+r+" { from { opacity: 0; } to { opacity: 0; } } ",o=x+"animation: 1ms "+r+"; "}t=function(t,e){l?t.attachEvent("onresize",e):(t.__resizeTriggers__||("static"===getComputedStyle(t).position&&(t.style.position="relative"),u(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),m(t),t.addEventListener("scroll",y,!0),s&&t.__resizeTriggers__.addEventListener(s,function(e){e.animationName===r&&m(t)})),t.__resizeListeners__.push(e))},n=function(t,e){l?t.detachEvent("onresize",e):(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",y),t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__)))}},hx.select.addEventAugmenter({name:"resize",setup:function(i,r){var o;return("undefined"==typeof t||null===t)&&e(),o=function(t){var e;return e=hx.select(i).box(),r.emit("resize",{clientRect:e,event:t})},t(i,o),function(){return n(i,o)}}})}(),function(){var t,e,n,i,r,o,s,a,l,h,c,u,d,p=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;n=function(t,n,i){var r;return r=new e(t,n,i),n._.menuItems.push(r),r},u=function(t,e,i){var r,o,s,a,l;for(i._.menuItems=[],l=[],s=0,a=e.length;a>s;s++)r=e[s],o=n(r,i,t),r.children?l.push(u(t,r.children,o)):l.push(void 0);return l},h=function(t,e){return hx.select(t).view(".hx-menu-item").update(function(t,e){return t.build(e)}).apply(e)},s=function(t){var e,n;return e=[],n=function(t,i){return t.forEach(function(t,r){return t.parentIndex=i,e.push(t),t._.menuItems?n(t._.menuItems,r):void 0})},n(t._.menuItems),e},c=function(t,e,n,i){var r,a,l,h,u,d,p,f,x,g,v,m,y,b,w,k,_,S,M,C;if(null!=(w=t.dropdown.dropdown)&&w.selectAll(".hx-menu-item").classed("hx-menu-active",!1),e>=0){for(r=s(t),v=r[e].node,l=null!=(k=r[e])?k.content:void 0,p=!(null!=l?l.disabled:void 0)&&!(null!=l?l.unselectable:void 0);!(null!==v.offsetParent&&p||i);){if(n?e-=1:e+=1,l=null!=(_=r[e])?_.content:void 0,p=!(null!=l?l.disabled:void 0)&&!(null!=l?l.unselectable:void 0),null==r[e]){d=!0;break}v=r[e].node}if(d&&!n)return void c(t,e-1,!0);t.cursorPos=e,null==(h=null!=(S=t.dropdown.dropdown)?S.node():void 0)||i||(g=hx.select(v).classed("hx-menu-active",!0),x=g.node(),m=x.offsetTop,a=g.select(".hx-menu-collapsible"),f=a.size()>0?a.node().clientHeight:x.clientHeight,y=hx.select(x.parentNode),b=y.classed("hx-collapsible-content")?y.node().offsetTop:0,C=m+f+b,u=C>h.clientHeight?C-h.clientHeight:0,h.scrollTop=u)}return null!=(M=null!=r?r[t.cursorPos]:void 0)&&(o(t,M,"highlight",i?"click":"arrow"),i)?o(t,M,"change","click"):void 0},l=function(t){var e;return e=t.cursorPos,e>0?e-=1:0===e&&(e=-1),t.cursorPos=e,c(t,e,!0)},a=function(t){var e,n;return n=t.cursorPos,e=s(t),n<e.length-1&&(n+=1),t.cursorPos=n,c(t,n,!1)},d=function(t,e,n){switch(e){case!0:return t.show(!0,n);case!1:return t.hide(!0,n);default:return t.toggle(!0,n)}},r=function(t,e,n){var i,r,a,h;return null==n&&(n="enter"),r="tab"===n?Math.max(t.cursorPos,0):t.cursorPos,i=s(t),h=i[r],null==e||e||null==(null!=h&&null!=(a=h.parent)?a.collapsible:void 0)?null!=(null!=h?h.collapsible:void 0)?d(h.collapsible,e):null!=e&&e||null==e?o(t,h,"change",n):void 0:d(h.parent.collapsible,e,function(){return h._.menuItems?void 0:l(t)})},o=function(t,e,n,i){return t.has(n)?t.emit(n,{eventType:i,content:null!=e?e.content:void 0}):void 0},i=function(t,e){switch(t.which){case 9:r(e,void 0,"tab");break;case 13:t.preventDefault(),r(e,void 0);break;case 37:r(e,!1);break;case 38:t.preventDefault(),l(e);break;case 39:r(e,!0);break;case 40:t.preventDefault(),a(e)}return e.emit("input",t)},e=function(){function t(t,e,n){this.content=t,this.parent=e,this.menu=n,this._={}}return t.prototype.build=function(t){var e,n,i,r,o;return this.node=t,t=hx.select(t),(null!=(o=this._.menuItems)?o.length:void 0)>0?(t.view(".hx-collapsible").apply(this),e=t.select(".hx-collapsible"),e.view(".hx-collapsible-heading").apply(this),e.view(".hx-collapsible-content").update(function(){return this.style("display","none")}).apply(this),i=e.select(".hx-collapsible-heading").classed("hx-menu-collapsible",!0).node(),n=t.select(".hx-collapsible-content").node(),this.menu.options.renderer(i,this.content),this.collapsible=new hx.Collapsible(e.node()),h(n,this._.menuItems)):(r=!this.content.unselectable&&!this.content.disabled,t.classed("hx-menu-link",r).classed("hx-menu-item-disabled",this.content.disabled).classed("hx-menu-unselectable",this.content.unselectable),this.menu.options.renderer(t.node(),this.content))},t}(),t=function(t){function e(t,r){var o,a,l,d,p,f,x,g,v;if(this.selector=t,null==r&&(r={}),e.__super__.constructor.apply(this,arguments),(null!=r.align||null!=r.mode||null!=r.ddClass)&&(hx.deprecatedWarning("Setting the dropdown options using options.align, options.mode and options.ddClass in the hx.Menu constructor has been deprecated","Use options.dropdownOptions to specify the dropdown options for the menu."),r.dropdownOptions={align:r.align,mode:r.mode,ddClass:r.ddClass},delete r.align,delete r.mode,delete r.ddClass),this.options=hx.merge.defined({dropdownOptions:{align:void 0,mode:"click",ddClass:""},renderer:function(t,e){return hx.select(t).text(e.text?e.text:e)},items:[]},r),g=this,this._={items:this.options.items,itemsChanged:!0},hx.component.register(this.selector,this),x=hx.select(this.selector),null!=this.options.dropdownOptions.ddClass&&0===this.options.dropdownOptions.ddClass.length)for(p=0,f=n.length;f>p;p++)if(o=n[p],x.classed(o)){a=o;break}this.options.dropdownOptions.ddClass="hx-menu "+(null!=a?a:this.options.dropdownOptions.ddClass),l=function(t){var e,n;e=function(e){return g._.itemsChanged&&(g._.itemsChanged=!1,u(g,e,g)),h(t,g._.menuItems)},n=g._.items,hx.isFunction(n)?(g._.itemsChanged=!0,n(function(t){return e(t)})):e(n)},this.dropdown=new hx.Dropdown(this.selector,l,this.options.dropdownOptions),this.dropdown.on("showend",function(t){return function(){var e,n;return n=t.dropdown.dropdown.node(),e=hx.select(n),n.scrollTop<n.scrollHeight-n.clientHeight&&(e.style("width",e.width()+hx.scrollbarSize()+"px"),"r"===t.dropdown.alignments[2])?e.style("left",Math.max(0,e.box().left-hx.scrollbarSize())+"px"):void 0}}(this)),x.off("click","hx.dropdown"),x.on("click","hx.menu",function(t){return function(){var e;return t.dropdown.isOpen()?t.dropdown.hide():t.loading?void 0:(null!=t.data&&hx.isFunction(t.data)&&(t.loading=!0,e=x.prepend("span"),e.append("i")["class"]("hx-menu-loading fa fa-spin fa-spinner"),t.data(function(t){return g.loading=!1,e.remove(),setupItems(g,t)})),t.dropdown.show());
}}(this)),"input"===x.node().nodeName.toLowerCase()&&(d=!0,v=x),this.dropdown.on("showstart","hx.menu",function(){return g.cursorPos=-1,d||(v=g.dropdown.dropdown,v.attr("tabindex","-1"),v.node().focus()),v.on("keydown","hx.menu",function(t){return g.dropdown.isOpen()&&i(t,g),g.emit("keydown",t)}),g.dropdown.dropdown.on("click","hx.menu",function(t){var e,n,i,r,o;if(o=hx.select(t.target).classed("hx-menu-link")?t.target:hx.select(t.target).closest(".hx-menu-item").node()){if(i=-1,r=hx.select(o),r.classed("hx-menu-link")){for(e=s(g),n=0;0>i&&n<e.length;){if(e[n].node===o){i=n;break}n+=1}c(g,i,void 0,!0)}return v.node().focus()}})}),this.dropdown.pipe(this,"dropdown")}var n;return p(e,t),n=["hx-positive","hx-warning","hx-negative","hx-info","hx-compliment","hx-contrast"],e.prototype.renderer=function(t){return arguments.length>0?(this.options.renderer=t,this):this.options.renderer},e.prototype.addException=function(t){return this.dropdown.clickDetector.addException(t),this},e.prototype.hide=function(){return this.dropdown.hide(),this},e.prototype.items=function(t){return arguments.length>0?(null==t&&(t=[]),this._.itemsChanged=!0,this._.items=t,this):this._.items},e}(hx.EventEmitter),hx.Menu=t}(),function(){var t;t=function(){function t(t,e,n){var i;this.rootSelection=t,this.selector=e,this.defaultType=n,i=this,this["new"]=function(t){return"."===i.selector.charAt(0)?this.append(i.defaultType)["class"](i.selector.substring(1)).node():this.append(i.defaultType).node()},this.each=function(t,e){},this.old=function(t,e){return this.remove()}}return t.prototype.enter=function(t){return this["new"]=t,this},t.prototype.exit=function(t){return this.old=t,this},t.prototype.update=function(t){return this.each=t,this},t.prototype.apply=function(t,e){var n,i,r,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y,b,w,k,_,S,M,C,P,T,D,A,z;if(0!==this.rootSelection.size()){if(t instanceof Array||(t=[t]),o=[],z=[],s=[],_=this.rootSelection.selectAll(this.selector).nodes,e){for(w=new hx.Map,i=new hx.Map,c=0,u=t.length;u>c;c++)r=t[c],h=e(r),i.set(h,r);for(v=0,d=_.length;d>v;v++)b=_[v],k=hx.select.getHexagonElementDataObject(b),k.datum?(n=k.datum,h=e(n),w.has(h)?s.push({element:b,datum:n}):(w.set(h,b),i.has(h)?(r=i.get(h),i["delete"](h),z.push({element:b,datum:r})):s.push({element:b,datum:n}))):s.push({element:b,datum:void 0});o=function(){var t,e,r,o;for(r=i.entries(),o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push({datum:n[1]});return o}()}else{for(a=0,m=0,p=_.length;p>m;m++)b=_[m],a<t.length?(k=hx.select.getHexagonElementDataObject(b),k.datum=t[a],z.push({element:b,datum:t[a]})):(k=hx.select.getHexagonElementDataObject(b,!1),s.push({element:b,datum:k.datum})),a++;if(a<t.length)for(l=S=T=a,D=t.length-1;D>=T?D>=S:S>=D;l=D>=T?++S:--S)o.push({datum:t[l]})}for(y=function(){var t,e,i;for(i=[],a=e=0,t=o.length;t>e;a=++e)n=o[a],i.push({element:this["new"].call(this.rootSelection,n.datum,a),datum:n.datum});return i}.call(this),M=0,f=y.length;f>M;M++)n=y[M],hx.select.getHexagonElementDataObject(n.element).datum=n.datum;for(a=C=0,x=s.length;x>C;a=++C)n=s[a],this.old.call(hx.select(n.element),n.datum,n.element,a);for(A=z.concat(y),a=P=0,g=A.length;g>P;a=++P)n=A[a],this.each.call(hx.select(n.element),n.datum,n.element,a);return this}},t}(),hx.Selection.prototype.view=function(e,n){return null==n&&(n="div"),0===this.size()&&hx.consoleWarning(".view() called on an empty selection"),new t(this,e,n)}}(),function(){var t,e,n,i,r,o,s,a,l;s=["y","z","a","f","p","n","","","","K","M","G","T","P","E","Z","Y"],l=function(t,e){var n,i,r;return i=t.toString(),i.length<e?(r=e-i.length,function(){var t,e,i;for(i=[],n=t=0,e=r-1;e>=0?e>=t:t>=e;n=e>=0?++t:--t)i.push("0");return i}().join("")+i):i},r=function(t){return t?Math.floor(Math.log(Math.abs(t))/Math.LN10):1},o=function(t,e,n){return n>=0?Math.round(t/Math.pow(e,n))*Math.pow(e,n):Math.round(t*Math.pow(e,-n))/Math.pow(e,-n)},n=function(t,e){var n;return isNaN(t)?"NaN":(n=r(t)-e+1,o(t,10,n).toString())},i=function(t,e){var i,o,a,l;return isNaN(t)?"NaN":(i=Math.min(r(t),26),a=s[Math.min(Math.max(0,Math.floor(8+i/3)),16)],l=Math.abs(t)<1&&i%3&&!(i>-3&&0>i)?1e3:1,-3===i&&(l=1e3,a=s[6]),o=Math.pow(10,i-i%3)/l,n(t/o,e)+a)},t=function(t,e){var i;return isNaN(t)?"NaN":(i=r(t),n(t/Math.pow(10,i),e)+"e"+i)},e=function(t,e){return isNaN(t)?"NaN":t.toFixed(e)},a=function(t,e,n){return n?function(n){return t(n,e)}:function(n){return hx.isString(n)?n:t(n,e)}},hx.format={round:function(t,e){return a(n,t,e)},si:function(t,e){return a(i,t,e)},exp:function(e,n){return a(t,e,n)},fixed:function(t,n){return a(e,t,n)},zeroPad:function(t,e){return a(l,t,e)}}}(),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=function(t,e){var n,i,r,o;return o=r=e.value(),n=t.max(),i=t.min(),void 0!==n&&(o=hx.min([o,n])),void 0!==i&&(o=hx.max([o,i])),o!==r?e.value(o):void 0},t=function(t){function i(t,n){var r,o,s;this.selector=t,i.__super__.constructor.apply(this,arguments),hx.component.register(this.selector,this),this.options=hx.merge.defined({buttonClass:"",min:void 0,max:void 0},n),this._={},o=hx.select(this.selector),s=o["class"]("hx-number-picker"),r=s.append("button").attr("type","button")["class"]("hx-btn "+this.options.buttonClass),r.append("i")["class"]("fa fa-chevron-up"),r.on("click","hx.number-picker",function(t){return function(){return t.increment()}}(this)),this.selectInput=s.append("input"),this.selectInput.attr("type","number"),this.selectInput.on("blur","hx.number-picker",function(t){return function(){return null==t.selectInput.attr("readonly")&&(e(t,t.selectInput),t.selectInput.attr("data-value",t.selectInput.value())),t.emit("input-change",{value:t.value()}),t.emit("change",{value:t.value()})}}(this)),r=s.append("button").attr("type","button")["class"]("hx-btn "+this.options.buttonClass),r.append("i")["class"]("fa fa-chevron-down"),r.on("click","hx.number-picker",function(t){return function(){return t.decrement()}}(this)),this.options.max&&this.max(this.options.max),this.options.min&&this.min(this.options.min)}return n(i,t),i.prototype.value=function(t,e){return arguments.length>0?(void 0!==this.options.max&&t>this.max&&(t=this.max),void 0!==this.min&&t<this.min&&(t=this.min),e&&isNaN(e)?this.selectInput.attr("type","text").attr("readonly",""):this.selectInput.attr("type","number").node().removeAttribute("readonly"),this.selectInput.value(e||t),this.selectInput.attr("data-value",t),this.emit("change",{value:t}),this):Number(this.selectInput.attr("data-value"))},i.prototype.min=function(t){return arguments.length>0?(this._.min=t,this.selectInput.attr("min",t),e(this,this),this):this._.min},i.prototype.max=function(t){return arguments.length>0?(this._.max=t,this.selectInput.attr("max",t),e(this,this),this):this._.max},i.prototype.increment=function(){return this.value(this.value()+1),this.emit("increment"),this},i.prototype.decrement=function(){return this.value(this.value()-1),this.emit("decrement"),this},i}(hx.EventEmitter),hx.NumberPicker=t}(),function(){var t,e,n;e=function(t){return t?function(t){return t}:function(t){return t.toLowerCase()}},n=function(t,e,n){var i,r,o,s,a,l;if(l=0,r=!1,null!=n.searchValues)for(a=n.searchValues(t),o=0,s=a.length;s>o;o++)i=a[o],l+=n.lookup(n.caseModifier(i.toString())),l>-1&&(r=!0);else l+=n.lookup(n.caseModifier(t.toString()));return e===!0?l:r||l>-1?!0:!1},t=function(t){return function(i,r,o){return null==o&&(o={}),o=hx.merge.defined({caseSensitive:!1,searchValues:void 0,sort:!0},o),o.caseModifier=e(o.caseSensitive),"string"==typeof r&&(r=o.caseModifier(r)),o.lookup=t(r),i=i.filter(function(t){return n(t,!1,o)}),o.sort===!0&&(i=i.sort(function(t,e){var i,r,s,a,l,h,c,u;if(r=n(t,!0,o),a=n(e,!0,o),r>a)return 1;if(a>r)return-1;if(null!=o.searchValues){for(c=0,i=o.searchValues(t),s=o.searchValues(e),l=h=0,u=i.length;u>h&&(c=hx.sort.compare(i[l],s[l]),0===c);l=h+=1);return c}return hx.sort.compare(t,e)})),i}},hx.filter={exact:t(function(t){return function(e){return e===t?t.length:-1}}),startsWith:t(function(t){return function(e){return hx.startsWith(e,t)?t.length:-1}}),contains:t(function(t){return function(e){var n;return n=e.indexOf(t),n>-1?n+t.length:-1}}),excludes:t(function(t){return function(e){var n;return n=e.indexOf(t),-1===n?t.length:-1}}),greater:t(function(t){return function(e){var n;return n=hx.sort.compare(e,t),-1!==n?n:-1}}),less:t(function(t){return function(e){var n;return n=hx.sort.compare(t,e),-1!==n?n:-1}}),fuzzy:t(function(t){var e,n,i;return e=function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},i="("+t.split("").map(e).join(").*?(")+").*?",n=new RegExp(i),function(t){var e;return e=t.match(n),null!=e?e.index+e[0].length:-1}}),regex:t(function(t){return function(e){var n;return n=e.match(t),null!=n?n.index+n[0].length:-1}})}}(),function(){var t,e,n,i,r,o,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=function(){var t,e,n,i,r;return r=this.wrapper.node(),i=r.scrollTop>0,t=r.scrollTop<r.scrollHeight-r.clientHeight,e=r.scrollLeft>0,n=r.scrollLeft<r.scrollWidth-r.clientWidth,this.topScrollIndicator.style("display",i?"block":""),this.rightScrollIndicator.style("display",n?"block":""),this.bottomScrollIndicator.style("display",t?"block":""),this.leftScrollIndicator.style("display",e?"block":"")},r=function(){var t,e,n,i,r;return e=this.wrapper.node(),t=-e.scrollLeft,this.options.stickTableHead&&this.options.stickFirstColumn&&(t-=this.widthOffset),r=-e.scrollTop,null!=(n=this.topHeader)&&n.select(".hx-table").style("left",t+"px"),null!=(i=this.leftHeader)?i.select(".hx-table").style("top",r+"px"):void 0},e=function(t,n){var i,r,o,s,a,l,h,c,u,d,p,f,x,g,v;if(null!=t&&null!=n){if(a=hx.select.getHexagonElementDataObject(t),p=null!=(x=a.listenerNamesRegistered)?x.values():void 0,p&&p.length>0){for(f=a.eventEmitter,r=hx.select(n),h=0,u=p.length;u>h;h++)d=p[h],r.on(d,function(){});o=hx.select.getHexagonElementDataObject(n).eventEmitter,o.pipe(f)}if(s=t.childNodes){for(i=n.childNodes,v=[],l=c=0,g=s.length;g>=0?g>=c:c>=g;l=g>=0?++c:--c)v.push(e(s[l],i[l]));return v}}},n=function(t,n,i){var r,o,s;return t.empty()?void 0:(s=t.style("width").replace("px",""),o=t.style("height").replace("px",""),i&&(s=Math.ceil(s),o=Math.ceil(o)),r=t.clone(!0),e(t.node(),r.node()),r.style("width",s+"px").style("min-width",s+"px").style("height",o+"px").style("min-height",o+"px"),n(r))},i=function(){var t,e,i,s,a,l,h,c,u,d,p,f,x,g,v,m;return this.widthOffset=0,this.heightOffset=0,d=0,e=!1,t=!1,this.wrapper.style("height","").style("width","").style("margin-left","").style("margin-right",""),this.table.style("height","").style("width","").style("margin-left","").style("margin-right",""),this.container.style("max-height",""),m=this.wrapper.node(),c=m.scrollWidth>m.clientWidth?hx.scrollbarSize():0,v=m.scrollHeight>m.clientHeight?hx.scrollbarSize():0,this.table.style("width",this.container.style("width").replace("px","")-v+"px"),this.tableSize={width:this.table.style("width").replace("px",""),height:this.table.style("height").replace("px","")},f=this.table.clone(!0).style("width","").style("height","").style("margin-left","").style("margin-top","").style("top",""),f.selectAll("tbody, thead").remove(),i=!1,"table"!==f.node().nodeName.toLowerCase()&&(i=!0),this.options.stickTableHead&&(l=f.clone(!0),h=i?l.select("table"):l.append("thead"),this.table.select("thead").selectAll("tr").forEach(function(t){var e;return e=h.append("tr"),t.selectAll("th, td").forEach(function(t){return n(t,function(t){return e.append(t)})})}),this.topHeader.selectAll(".hx-table").remove(),m.scrollHeight>m.clientHeight||this.options.alwaysSticky?(e=!0,this.topHeader.append(l),this.heightOffset=Number(l.style("height").replace("px","")),this.topHeader.select(".hx-table").style("width",this.tableSize.width+"px").style("height",this.heightOffset+"px")):d=Number(this.table.select("thead").style("height").replace("px",""))),this.options.stickFirstColumn&&(s=f.clone(!0),a=i?s.select("table"):s.append("thead"),this.table.select("tbody").selectAll("tr").forEach(function(t){var e;return e=a.append("tr")["class"](t["class"]()),n(t.select("th, td"),function(t){return e.append(t)})}),this.leftHeader.selectAll(".hx-table").remove(),(m.scrollWidth>m.clientWidth||this.options.alwaysSticky)&&(t=!0,this.leftHeader.append(s),this.widthOffset=Number(s.style("width").replace("px","")),this.leftHeader.style("top",this.heightOffset+d+"px").style("max-height",this.container.height()-this.heightOffset-d+"px").style("height",this.tableSize.height-this.heightOffset-d+"px").select(".hx-table").style("width",this.widthOffset+"px").style("height",this.tableSize.height-this.heightOffset-d+"px"))),this.options.stickFirstColumn&&t&&this.options.stickTableHead&&e&&(this.topHeader.style("left",this.widthOffset+"px"),this.container.select(".hx-sticky-table-header-top-left").style("width",this.leftHeader.style("width")).style("height",this.topHeader.style("height"))),null!=(p=this.topHeader)&&p.style("max-width",this.container.width()-this.widthOffset+"px").style("width",this.tableSize.width-this.widthOffset+"px"),x=this.container.style("height").replace("px","")-this.heightOffset+1*c,g=this.container.style("width").replace("px","")-this.widthOffset,this.wrapper.style("height",x+"px").style("width",g+"px").style("margin-left",this.widthOffset+"px").style("margin-top",this.heightOffset+"px"),this.table.style("margin-left",-this.widthOffset+"px").style("margin-top",-this.heightOffset+"px"),u=1*this.tableSize.height+1*c,this.container.style("max-height",u+"px"),this.showScrollIndicators&&(this.topScrollIndicator.style("top",this.heightOffset+"px").style("left",this.widthOffset+"px"),this.rightScrollIndicator.style("top",this.heightOffset+"px"),this.bottomScrollIndicator.style("left",this.widthOffset+"px"),this.leftScrollIndicator.style("left",this.widthOffset+"px").style("top",this.heightOffset+"px"),o.call(this)),r.call(this),this.emit("render")},t=function(t){function e(t,i){var s,a,l,h,c,u;e.__super__.constructor.apply(this,arguments),this.options=hx.merge.defined({stickTableHead:!0,stickFirstColumn:!1,useResponsive:!0,alwaysSticky:!1,containerClass:void 0},i),hx.component.register(t,this),this.selection=hx.select(t),this.selection.classed("hx-table")||"table"===this.selection.node().nodeName.toLowerCase()?(c=!0,this.table=this.selection):(c=!1,this.table=this.selection.select(".hx-table")),this.options.stickTableHead&&this.table.select("thead").select("tr").empty()&&(hx.consoleWarning("hx.StickyTableHeaders - "+t,"Sticky table headers initialized without thead element"),this.options.stickTableHead=!1),this.container=c?this.table.insertAfter("div")["class"]("hx-sticky-table-headers"):this.selection.classed("hx-sticky-table-headers",!0),this.container.style("max-height",""),(this.showScrollIndicators=0===hx.scrollbarSize())&&(this.topScrollIndicator=this.container.append("div")["class"]("hx-sticky-table-scroll-top"),this.rightScrollIndicator=this.container.append("div")["class"]("hx-sticky-table-scroll-right"),this.bottomScrollIndicator=this.container.append("div")["class"]("hx-sticky-table-scroll-bottom"),this.leftScrollIndicator=this.container.append("div")["class"]("hx-sticky-table-scroll-left")),(null!=(a=this.options.containerClass)?a.length:void 0)>0&&this.container.classed(this.options.containerClass,!0),this.options.stickTableHead&&(this.topHeader=this.container.append("div")["class"]("hx-sticky-table-header-top")),this.options.stickFirstColumn&&(this.leftHeader=this.container.append("div")["class"]("hx-sticky-table-header-left")),!this.options.stickTableHead&&!this.options.stickFirstColumn||this.showScrollIndicators||(s=this.table.select("th").style("background-color"),null!=(l=this.topHeader)&&l.style("background-color",s),null!=(h=this.leftHeader)&&h.style("background-color",s)),this.options.stickFirstColumn&&this.options.stickTableHead&&(u=this.container.append("table")["class"]("hx-sticky-table-header-top-left hx-table").append("thead"),this.table.select("thead").selectAll("tr").forEach(function(t){return n(t.select("th, td"),function(t){return u.append("tr").append(t)},!0)})),this.wrapper=this.container.append("div")["class"]("hx-sticky-table-wrapper"),this.wrapper.append(this.table),this.wrapper.on("scroll","hx.sticky-table-headers",function(t){return function(){return t.showScrollIndicators&&o.call(t),r.call(t)}}(this)),this.render(),this.options.useResponsive&&this.container.on("resize","hx.sticky-table-headers",function(t){return function(){return t.render(),setTimeout(function(){return t.render()},100)}}(this))}return s(e,t),e.prototype.render=function(){return i.call(this)},e}(hx.EventEmitter),hx.StickyTableHeaders=t}(),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=function(t,e,n){var i,r,o,s;for(s=[],i=0,o=n.length;o>i;i++){if(r=n[i],r===e||r.value===e){t.current=r,t.emit("change",{value:r,cause:"api"}),t.options.renderer(t.selectedText.node(),r);break}s.push(void 0)}return s},t=function(t){function i(t,e){var n;null==e&&(e={}),i.__super__.constructor.apply(this,arguments),null!=e.ddClass&&(hx.deprecatedWarning("Setting the ddClass options using options.ddClass in the hx.Picker constructor has been deprecated","Use options.dropdownOptions to specify the dropdown options for the picker."),e.dropdownOptions={ddClass:e.ddClass},delete e.ddClass),this.options=hx.merge.defined({dropdownOptions:{},items:[],noValueText:"Choose a value...",renderer:void 0,startValue:void 0},e),hx.component.register(t,this),this.selection=hx.select(t),this.current=void 0,n=this.selection.classed("hx-picker",!0).append("span")["class"]("hx-picker-inner"),this.selectedText=n.append("span")["class"]("hx-picker-text"),n.append("span")["class"]("hx-picker-icon").append("i")["class"]("fa fa fa-caret-down"),this.menu=new hx.Menu(t,{dropdownOptions:this.options.dropdownOptions,items:this.options.items,renderer:this.options.renderer}),this.menu.on("change","hx.picker",function(t){return function(e){return null!=(null!=e?e.content:void 0)?(t.current=e.content,t.selectedText.text(t.current.text||t.current),t.menu.hide(),t.emit("change",{value:t.current,cause:"user"})):void 0}}(this)),null==this.options.renderer&&(this.options.renderer=this.menu.renderer()),null!=this.options.startValue&&this.value(this.options.startValue),null==this.current&&null!=this.options.noValueText&&this.selectedText.text(this.options.noValueText),this.menu.pipe(this,"",["highlight"]),this.menu.dropdown.pipe(this,"dropdown")}return n(i,t),i.prototype.renderer=function(t){return null!=t?(this.options.renderer=t,this.menu.renderer(t),this):this.options.renderer},i.prototype.items=function(t){return null!=t?(this.options.items=t,this.menu.items(t),this):this.options.items},i.prototype.value=function(t){var n;return arguments.length>0?(hx.isFunction(this.items())?(n=this.selection.prepend("span"),n.append("i")["class"]("hx-menu-loading fa fa-spin fa-spinner"),this.items()(function(i){return function(r){return n.remove(),e(i,t,r)}}(this))):e(this,t,this.items()),this):this.current},i}(hx.EventEmitter),hx.Picker=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var i,r;n.__super__.constructor.apply(this,arguments),r=this,hx.component.register(t,this),this.options=hx.merge.defined({buttonClass:"hx-compliment",activeClass:"hx-contrast",fullWidth:!1,renderer:function(t,e,n){hx.select(t).text(null!=e.value?e.value:e)},items:[]},e),this.current=void 0,i=hx.select(t).classed("hx-button-group",!0).append("div")["class"]("hx-input-group").classed("hx-input-group-full-width",this.options.fullWidth),this.view=i.view("button").enter(function(){return this.append("button")["class"]("hx-btn "+r.options.buttonClass).classed("hx-section hx-no-margin",r.options.fullWidth).node()}).update(function(t,e){var n;n=null!=t.activeClass&&t===r.current?t.activeClass:t===r.current?r.options.activeClass:r.options.buttonClass,this.classed(r.options.buttonClass,!1).classed(r.options.activeClass,!1).classed(n,!0).on("click","hx.button-group",function(){return r.value(t,!0)}),r.options.renderer(e,t,t===r.current)}),null!=this.options.items&&this.options.items.length>0&&this.items(this.options.items)}return e(n,t),n.prototype.renderer=function(t){return null!=t?(this.options.renderer=t,this):this.options.renderer},n.prototype.items=function(t){return null!=t?(this.options.items=t,this.view.apply(this.options.items),this):this.options.items},n.prototype.value=function(t){var e,n,i,r;if(arguments.length>0){for(r=this.options.items,e=0,i=r.length;i>e;e++)if(n=r[e],n===t||n.value===t){this.current=n,this.view.apply(this.options.items),this.emit("change",{value:n,cause:arguments[1]?"user":"api"});break}return this}return this.current},n}(hx.EventEmitter),hx.ButtonGroup=t}(),function(){var t,e,n,i,r,o;t=function(t){var e;return e=t.responseType,e&&"text"!==e?t.response:t.responseText},r=function(e,n,i,r,o,s){var a,l,h,c,u;if(u=e.status,c=null!=i?{url:n,data:i}:n,!u&&t(e)||u>=200&&300>u||304===u){try{h=o.formatter(e)}catch(l){return a=l,void r(a,void 0,c,s)}r(void 0,h,c,s)}else r(e,void 0,c,s)},o=function(t,e,n,i){var r,o,s,a;t.open(i.requestType,e,!0),o=i.headers;for(r in o)a=o[r],t.setRequestHeader(r,a);return i.responseType&&(t.responseType=i.responseType),t.overrideMimeType(i.contentType),s=null!=n&&"string"!=typeof n?JSON.stringify(n):n,t.send(s)},n=function(t,e,n,i,s){var a,l,h,c,u;return null==e&&(e=null),null==i&&(i={}),h={requestType:"GET",formatter:hx.identity,headers:{}},i=hx.merge(h,i),i.contentType&&(null==(a=i.headers)["Content-Type"]&&(a["Content-Type"]=i.contentType),null==(l=i.headers).accept&&(l.accept=i.contentType+",*/*")),"GET"===i.requestType&&e&&(i.requestType="POST"),c=new XMLHttpRequest,"withCredentials"in c||void 0===typeof XDomainRequest||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),u=function(){return r(c,t,e,n,i,s)},"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},o(c,t,e,i)},e=function(t,e,i,r,o){var s,a,l,h,c,u,d;if("array"===t){for(c=[],s=function(t,n,i,o){var s,a;return c[o]={data:n,source:i},r(t,n,i,o),c.filter(function(t){return void 0!==t}).length===e.length?(a=c.map(function(t){return t.source}),s=c.map(function(t){return t.data}),r(t,s,a,-1)):void 0},u=[],a=l=0,h=e.length;h>l;a=++l)d=e[a],hx.isObject(d)&&(i=d.data||i,d=d.url),u.push(n(d,i,s,o,a));return u}return"object"===t?(i=e.data||i,d=e.url):d=e,n(d,i,r,o)},hx.request=function(){var t,n,i,r,o;return o=arguments[0],r=function(){switch(!1){case!hx.isArray(o):return"array";case!hx.isObject(o):return"object";case!hx.isString(o):return"string"}}(),!r||"array"===r&&0===o.length?void console.error("Incorrect URL passed into hx.request: ",o):(hx.isFunction(arguments[1])?(t=arguments[1],i=arguments[2]):(n=arguments[1],t=arguments[2],i=arguments[3]),e(r,o,n||null,t,i))},i=function(t,e,n){var i,r,o,s,a;return a=t[0],hx.isFunction(t[1])?(i=t[1],s=t[2]):(r=t[1],i=t[2],s=t[3]),o={contentType:e,formatter:n},s=hx.merge(o,s),hx.request(a,r,i,s)},hx.json=function(){return i(arguments,"application/json",function(t){return t.responseText?JSON.parse(t.responseText):void 0})},hx.html=function(){return i(arguments,"text/html",function(t){return hx.parseHTML(t.responseText)})}}(),function(){var t,e,n,i,r,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y=function(t,e){function n(){this.constructor=t}for(var i in e)b.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b={}.hasOwnProperty;m=hx.format.zeroPad(2),h=function(t,e,n){var i,r,o,s,a,l,h,c;for(c=new Date(t,e).getDay()-n,0>c&&(c+=7),o=new Date(t,e+1,0).getDate(),a=[],a.push(c>0?function(){var t,e,n;for(n=[],i=t=0,e=c-1;e>=0?e>=t:t>=e;i=e>=0?++t:--t)n.push(void 0);return n}().concat(function(){l=[];for(var t=1,e=7-c;e>=1?e>=t:t>=e;e>=1?t++:t--)l.push(t);return l}.apply(this)):[1,2,3,4,5,6,7]),s=1-c;o>s;)s+=7,r=Math.min(s+6,o),r>=s&&a.push(function(){h=[];for(var t=s;r>=s?r>=t:t>=r;r>=s?t++:t--)h.push(t);return h}.apply(this));return a[a.length-1].length<7&&(a[a.length-1].length=7),a},c=function(){return[[0,1,2],[3,4,5],[6,7,8],[9,10,11]]},l=function(t){for(var e,n,i,r;t%10!==0;)t-=1;for(i=[],r=[],e=n=0;11>=n;e=++n)e>0&&e%3===0&&(i.push(r),r=[]),r.push(t-1+e);return i.push(r),i},d=function(t,e,n,i){var r,o,s,a,l,h,c;return l=t.validRange(),null!=l.start&&(h=new Date(l.start.getTime())),null!=l.end&&(a=new Date(l.end.getTime())),null!=e&&null==n&&null==i&&(n=6,i=15,null!=h&&h.setDate(0),null!=a&&a.setDate(28),null!=h&&h.setMonth(0),null!=a&&a.setMonth(11)),null!=n&&null==i&&(i=15,null!=h&&h.setDate(0),null!=a&&a.setDate(28)),c=t.visibleMonth(),null==e&&(e=c.year),null==n&&(n=c.month),s=new Date(e,n,i),o=null!=h?s>=h:!0,r=null!=a?a>=s:!0,o&&r},p=function(t,e,n,i){return!(t.getFullYear()!==e||null!=n&&t.getMonth()!==n||null!=i&&t.getDate()!==i)},u=function(t,e,n,i){var r;return r=new Date(e,n,i),r>t.start&&r<t.end},f=function(t,e,n){var i,r;return r=new Date,i=new Date(t,e,n),i.setHours(0,0,0,0),r.setHours(0,0,0,0),i.toString()===r.toString()},v=function(t){var e,n,i;e=t._,n=t.options.selectRange,null!=e.validRange&&(null!=e.validRange.start&&(e.startDate<e.validRange.start&&(e.startDate=new Date(e.validRange.start.getTime())),n&&e.endDate<e.validRange.start&&(e.endDate=new Date(e.validRange.start.getTime()))),null!=e.validRange.end&&(e.startDate>e.validRange.end&&(e.startDate=new Date(e.validRange.end.getTime())),n&&e.endDate>e.validRange.end&&(e.endDate=new Date(e.validRange.end.getTime())))),n?e.endDate<e.startDate&&(i=e.endDate,e.endDate=e.startDate,e.startDate=i):e.endDate=e.startDate,e.endDate.setHours(0,0,0,0),e.startDate.setHours(0,0,0,0)},a=function(t,e){var n,i;return null!=t.dropdown&&t.dropdown.isOpen()&&t.dropdown.hide(),i=e?"":void 0,n=t._,n.disabled=e,t.options.selectRange?(n.inputStart.attr("disabled",i),n.inputEnd.attr("disabled",i)):n.input.attr("disabled",i),this},i=function(t,e){var n,i,r,o,a,u,d;switch(n=t._,n.calendarGrid.selectAll(".hx-grid-row").remove(),n.calendarView=n.calendarGrid.view(".hx-grid-row","div").update(function(n,i,r){return s(t,n,i,r,e)}),null==e&&(e=n.mode),n.mode=e,o=t.localiser,d=t.visibleMonth(),e){case"d":r=l(d.year),i="hx-calendar-decade",u=o.localiseDecade(r[0][1],r[3][1]);break;case"y":r=c(),i="hx-calendar-year",u=o.localiseYear(d.year);break;default:r=h(d.year,d.month-1,o.localiseWeekStart()),r.unshift("days"),i="hx-calendar-month",u=o.localiseMonth(d.month-1)+" / "+o.localiseYear(d.year)}return n.calendarGrid["class"]("hx-calendar-grid "+i),n.calendarHeadBtn.text(u),null!=(a=n.calendarTodayButton)&&a.text(o.localiseToday()),n.calendarView.apply(r)},s=function(t,e,n,i,r){var s,a;return s=t._,a=hx.select(n),"days"===e?a.view(".hx-grid-row-heading").enter(function(t){var e;return this.classed("hx-grid-row-heading",!0),e=this.append("div")["class"]("hx-grid"),e.node()}).update(function(t){return this.text(t).node()}).apply(t.localiser.localiseWeek()):a.view(".hx-grid").enter(function(e){var n;return n=this.append("div")["class"]("hx-grid"),t.options.selectRange&&n.append("div")["class"]("hx-grid-range-bg"),n.append("div")["class"]("hx-grid-text"),n.node()}).update(function(e,n,s){return o(t,e,n,s,i,r)}).apply(e)},o=function(t,e,n,r,o,s){var a,l,h,c,g,v,m,y,b,w,k,_,S,M,C;if(a=t._,c=hx.select(n),null==e)return c.classed("hx-grid-out-of-range",!0).classed("hx-grid-selected",!1).classed("hx-grid-selected-start",!1).classed("hx-grid-selected-end",!1).classed("hx-grid-selected-range",!1).classed("hx-grid-today",!1);switch(C=null,v=null,h=null,M=t.visibleMonth(),b=!0,s){case"d":C=e,y=t.localiser.localiseYear(e),b=0===o?0!==r:3===o?2!==r:!0;break;case"y":v=e,C=M.year,y=t.localiser.localiseMonth(e);break;default:h=e,v=M.month-1,C=M.year,y=t.localiser.localiseDay(e)}return g=d(t,C,v,h)&&b,t.options.selectRange?(m=t.range(),_=p(m.start,C,v,h),k=p(m.end,C,v,h),l=u(m,C,v,h),w=_||k):w=p(t.date(),C,v,h),S=h&&f(C,v,h),c.classed("hx-grid-out-of-range",!g).classed("hx-grid-selected",w).classed("hx-grid-selected-start",_).classed("hx-grid-selected-end",k).classed("hx-grid-selected-range",l).classed("hx-grid-today",S),c.select(".hx-grid-text").text(y),g?c.on("click","hx-datepicker",function(){var n,r;return a.userEvent=!0,"d"!==s&&"y"!==s?null!=h&&(n=new Date(M.year,M.month-1,h),t.options.selectRange?(null==a.clickStart&&(a.clickStart=!0),a.clickStart?(a.clickStart=!1,t.range({start:n,end:n})):(a.clickStart=!0,t.range({start:t.date(),end:n}),t.options.closeOnSelect&&t.hide())):(t.date(n),t.options.closeOnSelect&&t.hide())):"d"===s?(r="y",t.visibleMonth(6,e)):(r="m",t.visibleMonth(e+1,M.year)),x(t),i(t,r)}):c.on("click",function(){})},r=function(t){var e,n,i,r,o;return e=t._,n=t.day(),r=t.month(),o=t.year(),i=t.localiser,e.dayPicker.suppressed("change",!0),e.monthPicker.suppressed("change",!0),e.yearPicker.suppressed("change",!0),e.dayPicker.value(n,i.localiseDay(n,!0)),e.monthPicker.value(r,i.localiseMonth(r-1,!0)),e.yearPicker.value(o,i.localiseYear(o)),e.dayPicker.suppressed("change",!1),e.monthPicker.suppressed("change",!1),e.yearPicker.suppressed("change",!1)},x=function(t){var e,n;return e=t._,t.options.selectRange?(n=t.range(),e.inputStart.value(t.localiser.localiseDate(n.start,e.useInbuilt)),e.inputEnd.value(t.localiser.localiseDate(n.end||n.start,e.useInbuilt))):e.input.value(t.localiser.localiseDate(t.date(),e.useInbuilt))},g=function(t){var e;return e=t._,v(t),e.preventFeedback?void 0:(e.preventFeedback=!0,t.options.selectRange?(e.inputStart.classed("hx-date-error",!1),e.inputEnd.classed("hx-date-error",!1)):e.input.classed("hx-date-error",!1),x(t),t.emit("change",{type:e.userEvent?"user":"api"}),e.userEvent=!1,e.preventFeedback=!1,"calendar"===t.options.type?i(t):r(t))},e=function(){function t(){this.currentLocale="en-gb"}return t.prototype.dateOrder=function(){return["DD","MM","YYYY"]},t.prototype.localiseWeekStart=function(){return 0},t.prototype.localiseWeek=function(){return["Su","Mo","Tu","We","Th","Fr","Sa"]},t.prototype.localiseDay=function(t,e){return e?m(t):t},t.prototype.localiseMonth=function(t,e){return e?m(t+1):["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t]},t.prototype.localiseYear=function(t){return t},t.prototype.localiseDecade=function(t,e){return this.localiseYear(t)+" - "+this.localiseYear(e)},t.prototype.localiseDate=function(t,e){return e?t.getFullYear()+"-"+m(t.getMonth()+1)+"-"+m(t.getDate()):m(t.getDate())+"/"+m(t.getMonth()+1)+"/"+t.getFullYear()},t.prototype.localiseToday=function(){return"Today"},t.prototype.locale=function(t){return null==t?"en-gb":void 0},t.prototype.stringToDate=function(t,e){var n,i,r,o,s,a,l,h,c,u,d,p,f,x,g;if(e?(u=["YYYY","MM","DD"],p=t.split("-")):(u=this.dateOrder(),p=t.split("/")),n=3===p.length&&!p.some(function(t){return""===t||"0"===t})){for(o="",s=a=0,l=u.length;l>a;s=++a)switch(f=u[s],d=p[s],f){case"DD":r=d.length<3&&""!==d,i=Number(p[s]);break;case"MM":c=d.length<3&&""!==d,h=Number(p[s]);break;case"YYYY":g=d.length<5&&""!==d,x=Number(p[s]),2===x.toString().length&&(x+=2e3)}return r&&c&&g?new Date(x,h-1,i):new Date("Invalid Date")}return new Date("Invalid Date")},t}(),n=function(){function t(){this.currentLocale=moment.locale()}return t.prototype.dateOrder=function(){var t,e,n,i,r,o,s,a,l;for(t=moment({year:2003,month:11,day:22}).locale(this.currentLocale),e=t.format("L"),l=e.indexOf(t.format("YYYY")),o=e.indexOf(t.format("MM")),n=e.indexOf(t.format("DD")),a=[],i=r=0,s=e.length;s>=0?s>=r:r>=s;i=s>=0?++r:--r)switch(i){case l:a.push("YYYY");break;case o:a.push("MM");break;case n:a.push("DD")}return 0===a.length&&(a=["DD","MM","YYYY"]),
a},t.prototype.localiseWeekStart=function(){return moment().weekday(0).toDate().getDay()},t.prototype.localiseWeek=function(){var t,e,n,i;for(t=moment().weekday(0),t.locale(this.currentLocale),e=[t.format("dd")],n=i=0;6>i;n=++i)e.push(t.add(1,"d").format("dd"));return e},t.prototype.localiseDay=function(t,e){return moment({day:t,month:0}).locale(this.currentLocale).format(e?"DD":"D")},t.prototype.localiseMonth=function(t,e){return moment({month:t}).locale(this.currentLocale).format(e?"MM":"MMM")},t.prototype.localiseYear=function(t){return moment({year:t}).locale(this.currentLocale).format("YYYY")},t.prototype.localiseDecade=function(t,e){return this.localiseYear(t)+" - "+this.localiseYear(e)},t.prototype.localiseDate=function(t){return moment(t).locale(this.currentLocale).format("L")},t.prototype.localiseToday=function(){var t,e,n,i,r,o,s;for(i=moment({hour:12,minute:0,second:0}).locale(this.currentLocale),o=i.clone().add(1,"day"),r=i.calendar().split("").reverse(),s=o.calendar().split("").reverse(),t=e=0,n=r.length;(n>=0?n>=e:e>=n)&&r[t]===s[t];t=n>=0?++e:--e);return r.splice(0,t),r.reverse().join("")},t.prototype.locale=function(t){return null!=t?this.currentLocale=t:this.currentLocale},t.prototype.stringToDate=function(t){var e,n,i,r,o,s,a,l,h,c,u,d;if(l=this.dateOrder(),c=t.split("/"),e=3===c.length&&!c.some(function(t){return""===t||"0"===t})){for(i="",r=o=0,s=l.length;s>o;r=++o)switch(u=l[r],h=c[r],u){case"DD":n=h.length<3&&""!==h,i+="DD";break;case"MM":a=h.length<3&&""!==h,i+="MM";break;case"YYYY":d=h.length<5&&""!==h,i+="YYYY"}return n&&a&&d?moment(t,i,this.currentLocale).toDate():new Date("Invalid Date")}return new Date("Invalid Date")},t}(),t=function(t){function o(t,s){var a,l,h,c,u,d,p,f,g,v,m,y,b;this.selector=t,o.__super__.constructor.apply(this,arguments),hx.component.register(this.selector,this),v=this,this.options=hx.merge.defined({type:"calendar",defaultView:"m",closeOnSelect:!0,selectRange:!1,showTodayButton:!0,allowInbuiltPicker:!0,disabled:!1},s),a=this._={disabled:this.options.disabled,mode:this.options.defaultView,startDate:new Date,endDate:new Date},a.startDate.setHours(0,0,0,0),a.endDate.setHours(0,0,0,0),this.localiser="undefined"!=typeof moment&&null!==moment?new n:new e,this.selection=hx.select(this.selector).classed("hx-date-picker",!0),p=this.selection.append("div")["class"]("hx-date-input-container"),d=p.append("i")["class"]("fa fa-calendar"),y=void 0,this.options.selectRange?(this.options.type="calendar",this.options.showTodayButton=!1,a.preventFeedback=!0,this.range({}),a.preventFeedback=!1,f=function(t){return v.hide(),clearTimeout(y),y=setTimeout(function(){var e,n,i,r;return e=v.localiser.stringToDate(a.inputStart.value(),a.useInbuilt),n=v.localiser.stringToDate(a.inputEnd.value(),a.useInbuilt),t&&e>n?(e=n,a.inputStart.value(a.inputEnd.value())):!t&&e>n&&(n=e,a.inputEnd.value(a.inputStart.value())),r=e.getTime(),i=n.getTime(),r&&i&&(v.range({start:e,end:n}),v.visibleMonth(e.getMonth()+1,e.getFullYear())),a.inputStart.classed("hx-date-error",!r),a.inputEnd.classed("hx-date-error",!i)},500)},a.inputStart=p.append("input")["class"]("hx-date-input").on("input","hx.date-picker",function(){return f(!1)}),p.append("i")["class"]("hx-date-to-icon fa fa-angle-double-right"),a.inputEnd=p.append("input")["class"]("hx-date-input").on("input","hx.date-picker",function(){return f(!0)})):(a.useInbuilt=this.options.allowInbuiltPicker?("undefined"==typeof moment||null===moment)&&hx.supports("date")&&hx.supports("touch"):!1,a.input=p.append("input")["class"]("hx-date-input").on(a.useInbuilt?"blur":"input","hx.date-picker",function(){return v.hide(),clearTimeout(y),y=setTimeout(function(){var t;return t=v.localiser.stringToDate(a.input.value(),a.useInbuilt),t.getTime()?t.getTime()!==v.date().getTime()&&(v.date(t),"calendar"===v.options.type)?v.visibleMonth(t.getMonth()+1,t.getFullYear()):void 0:a.input.classed("hx-date-error",!0)},500)}),a.useInbuilt&&a.input.attr("type","date").on("focus","hx.date-picker",function(){return v.emit("show")})),"calendar"===this.options.type?(this.visibleMonth(void 0),c=function(t){var e,n,r;switch(null==t&&(t=1),n=v.visibleMonth(),a.mode){case"d":e=n.month,r=n.year+10*t;break;case"y":e=n.month,r=n.year+1*t;break;default:e=n.month+1*t,r=n.year}return v.visibleMonth(e,r),i(v)},l=hx.detached("div"),l["class"]("hx-datepicker-calendar"),h=l.append("div")["class"]("hx-calendar-header"),h.append("button")["class"]("hx-btn hx-btn-invisible hx-calendar-back").on("click","hx.date-picker",function(){return c(-1)}).append("i")["class"]("fa fa-chevron-left"),a.calendarHeadBtn=h.append("button")["class"]("hx-btn hx-btn-invisible hx-calendar-button").on("click","hx.date-picker",function(){switch(a.mode){case"d":break;case"y":return i(v,"d");default:return i(v,"y")}}),h.append("button")["class"]("hx-btn hx-btn-invisible hx-calendar-forward").on("click","hx.date-picker",function(){return c()}).append("i")["class"]("fa fa-chevron-right"),a.calendarGrid=l.append("div")["class"]("hx-calendar-grid"),this.options.showTodayButton&&(a.calendarTodayButton=l.append("div")["class"]("hx-calendar-today-btn").append("button")["class"]("hx-btn hx-btn-invisible").on("click","hx.date-picker",function(){var t;return t=new Date,t.setHours(0,0,0,0),v.date(t),i(v,"m"),v.options.closeOnSelect?v.hide():void 0})),m=function(t){var e;return a.disabled?v.hide():(a.clickStart=!0,e=hx.select(t),e.append(l),i(v,v.options.defaultView))}):(u=hx.detached("div").node(),g=hx.detached("div").node(),b=hx.detached("div").node(),a.dayPicker=new hx.NumberPicker(u).on("change","hx.date-picker",function(t){return a.userEvent=!0,v.day(t.value)}),a.monthPicker=new hx.NumberPicker(g).on("change","hx.date-picker",function(t){return a.userEvent=!0,v.month(t.value)}),a.yearPicker=new hx.NumberPicker(b).on("change","hx.date-picker",function(t){return a.userEvent=!0,v.year(t.value)}),a.dayPicker.selectInput.attr("tabindex",1),a.monthPicker.selectInput.attr("tabindex",2),a.yearPicker.selectInput.attr("tabindex",3),m=function(t){var e,n,i,o,s;if(a.disabled)return v.dropdown.hide();for(s=hx.select(t),o=v.localiser.dateOrder(),n=0,i=o.length;i>n;n++)switch(e=o[n]){case"DD":s.append(u);break;case"MM":s.append(g);break;case"YYYY":s.append(b)}return r(v)}),a.useInbuilt||(this.dropdown=new hx.Dropdown(this.selector,m,{matchWidth:!1}),this.dropdown.on("hidestart",function(t){return function(){return t.emit("hide")}}(this)),this.dropdown.on("showstart",function(t){return function(){return t.emit("show")}}(this))),x(this),a.disabled&&this.disable()}return y(o,t),o.prototype.disable=function(){return a(this,!0)},o.prototype.enable=function(){return a(this,!1)},o.prototype.show=function(){return this._.useInbuilt?this._.input.node().focus():this.dropdown.show(),this},o.prototype.hide=function(){return this._.useInbuilt?this.emit("hide"):this.dropdown.hide(),this},o.prototype.getScreenDate=function(t){return this.localiser.localiseDate(t?_.endDate:_.startDate)},o.prototype.visibleMonth=function(t,e){var n;return n=this._,"calendar"===this.options.type?arguments.length>0?(null==e&&(e=n.visibleYear||this.year()),null==t&&(t=n.visibleMonth||this.month()),1>t&&(t+=12,e-=1),t>12&&(t%=12,e+=1),n.visibleMonth=t-1,n.visibleYear=e,this):{month:n.visibleMonth+1,year:n.visibleYear}:(hx.consoleWarning("Setting the visible month only applies to date pickers of type 'calendar'"),this)},o.prototype.date=function(t){var e;return e=this._,null!=t?(t=new Date(t.getTime()),t.setHours(0,0,0,0),e.startDate=t,g(this),this):new Date(e.startDate.getTime())},o.prototype.day=function(t){var e;return e=this._,null!=t?(e.startDate.setDate(t),g(this),this):e.startDate.getDate()},o.prototype.month=function(t){var e;return e=this._,null!=t?(e.startDate.setMonth(t-1),g(this),this):e.startDate.getMonth()+1},o.prototype.year=function(t){var e;return e=this._,null!=t?(e.startDate.setFullYear(t),g(this),this):e.startDate.getFullYear()},o.prototype.range=function(t){var e;return e=this._,this.options.selectRange?arguments.length>0?(null!=t.start&&(t.start.setHours(0,0,0,0),e.startDate=t.start),null!=t.end&&(t.end.setHours(0,0,0,0),e.endDate=t.end),g(this),this):{start:e.startDate,end:e.endDate}:(hx.consoleWarning("datePicker.range can only be used for datepickers with 'selectRange' of true"),this)},o.prototype.validRange=function(t){var e,n,i;return e=this._,null==e.validRange&&(e.validRange={start:void 0,end:void 0}),arguments.length>0?("start"in t&&(e.validRange.start=t.start),"end"in t&&(e.validRange.end=t.end),null!=(n=e.validRange.start)&&n.setHours(0,0,0,0),null!=(i=e.validRange.end)&&i.setHours(0,0,0,0),g(this),this):e.validRange},o.prototype.locale=function(t){return arguments.length>0?(this.localiser.locale(t),g(this),this):this.localiser.locale()},o}(hx.EventEmitter),hx.DatePicker=t}(),function(){var t,e,n,i,r,o,s,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty;a=hx.format.zeroPad(2),o=function(t){var e;return e=t.getScreenTime().split(":"),t.hourPicker.suppressed("change",!0),t.minutePicker.suppressed("change",!0),t.secondPicker.suppressed("change",!0),t.hourPicker.value(t.hour(),e[0]),t.minutePicker.value(t.minute(),e[1]),t.secondPicker.value(t.second(),e[2]),t.hourPicker.suppressed("change",!1),t.minutePicker.suppressed("change",!1),t.secondPicker.suppressed("change",!1)},r=function(t){return t.input.classed("hx-short-time",!t.options.showSeconds),t.input.value(t.getScreenTime(t.options.showSeconds))},s=function(t){var e;return t.preventFeedback?void 0:(e=t._,t.preventFeedback=!0,t.input.classed("hx-time-error",!1),r(t),t.emit("change",{type:e.userEvent?"user":"api"}),e.userEvent=!1,t.preventFeedback=!1,o(t))},i=function(t,e){var n;return t.dropdown.hide(),n=e?"":void 0,t.input.attr("disabled",n),this},t=function(){function t(){this.currentLocale="en-gb"}return t.prototype.localiseTime=function(t,e){var n;return n=t.getHours()+":"+a(t.getMinutes()),e&&(n+=":"+a(t.getSeconds())),n},t.prototype.checkTime=function(t){return!isNaN(t[0])&&!isNaN(t[1])&&!isNaN(t[2])},t.prototype.locale=function(t){return null==t?"en-gb":void 0},t}(),e=function(){function t(){this.currentLocale=moment.locale()}return t.prototype.localiseTime=function(t,e){var n;return n=e?"H:mm:ss":"H:mm",moment(t).locale(this.currentLocale).format(n)},t.prototype.checkTime=function(t){return moment({hours:t[0],minutes:t[1],seconds:t[2]}).locale(this.currentLocale).isValid()},t.prototype.locale=function(t){return t?this.currentLocale=t:this.currentLocale},t}(),n=function(n){function a(n,i){var s,l,h,c,u,d,p,f;this.selector=n,a.__super__.constructor.apply(this,arguments),this.options=hx.merge({showSeconds:!1,buttonClass:""},i),hx.component.register(this.selector,this),s=this._={},s.localiser="undefined"!=typeof moment&&null!==moment?new e:new t,s.selectedDate=new Date,s.selectedDate.setMilliseconds(0),this.showSeconds||s.selectedDate.setSeconds(0),this.selection=hx.select(this.selector).classed("hx-time-picker",!0),c=this.selection.append("div")["class"]("hx-time-input-container"),h=c.append("i")["class"]("fa fa-clock-o"),this.input=c.append("input")["class"]("hx-time-input"),f=void 0,this.input.on("input","hx.time-picker",function(t){return function(e){return clearTimeout(f),f=setTimeout(function(){var n;return n=e.target.value.split(":"),null==n[2]&&(n[2]=0),s.localiser.checkTime(n)?(t.hour(n[0]),t.minute(n[1]),t.second(n[2]||0)):t.input.classed("hx-time-error",!0)},200)}}(this)),r(this),l=hx.detached("div").node(),u=hx.detached("div").node(),d=hx.detached("div").node(),this.hourPicker=new hx.NumberPicker(l,{buttonClass:this.options.buttonClass}).on("change","hx.time-picker",function(t){return function(e){return s.userEvent=!0,t.hour(e.value)}}(this)),this.hourPicker.selectInput.attr("tabindex",1).attr("maxlength","2"),this.minutePicker=new hx.NumberPicker(u,{buttonClass:this.options.buttonClass}).on("change","hx.time-picker",function(t){return function(e){return s.userEvent=!0,t.minute(e.value)}}(this)),this.minutePicker.selectInput.attr("tabindex",2).attr("maxlength","2"),this.secondPicker=new hx.NumberPicker(d,{buttonClass:this.options.buttonClass}).on("change","hx.time-picker",function(t){return function(e){return s.userEvent=!0,t.second(e.value)}}(this)),this.secondPicker.selectInput.attr("tabindex",3).attr("maxlength","2"),p=function(t){return function(e){var n;return null===t.input.attr("disabled")?(n=hx.select(e),n.append(l),n.append(u),t.options.showSeconds&&n.append(d),o(t)):t.dropdown.hide()}}(this),this.dropdown=new hx.Dropdown(this.selector,p,{matchWidth:!1,ddClass:"hx-time-picker-dropdown"}),this.dropdown.on("hidestart",function(t){return function(){return t.emit("hide")}}(this)),this.dropdown.on("showstart",function(t){return function(){return t.emit("show")}}(this))}return l(a,n),a.prototype.date=function(t,e){var n;return n=this._,arguments.length>0&&null!=t?(t=new Date(t.getTime()),e&&t.setHours(this.hour(),this.minute(),this.second(),0),n.selectedDate=t,s(this),this):new Date(n.selectedDate.getTime())},a.prototype.hour=function(t){var e;return e=this._,arguments.length>0&&null!=t?(e.selectedDate.setHours(t),s(this),this):e.selectedDate.getHours()},a.prototype.minute=function(t){var e;return e=this._,arguments.length>0&&null!=t?(e.selectedDate.setMinutes(t),s(this),this):e.selectedDate.getMinutes()},a.prototype.second=function(t){var e;return e=this._,arguments.length>0&&null!=t?(e.selectedDate.setSeconds(t),s(this),this):e.selectedDate.getSeconds()},a.prototype.getScreenTime=function(){return this._.localiser.localiseTime(this.date(),this.options.showSeconds)},a.prototype.locale=function(t){return arguments.length>0?(this._.localiser.locale(t),s(this),this):this._.localiser.locale()},a.prototype.disable=function(){return i(this,!0),this},a.prototype.enable=function(){return i(this,!1),this},a}(hx.EventEmitter),hx.TimePicker=n}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var i,r;this.selector=t,n.__super__.constructor.apply(this,arguments),i=this._={},this.options=hx.merge.defined({classifier:void 0,validator:void 0},e),hx.component.register(this.selector,this),this.selection=hx.select(this.selector).classed("hx-tag-input",!0),this.tagContainer=this.selection.append("span")["class"]("hx-tags-container"),this.form=this.selection.append("form"),this.input=this.form.append("input").attr("placeholder","add tag..."),r=!1,this.form.on("keypress","hx.tag-input",function(t){return function(e){var n;return 13===e.keyCode&&t.form.node().checkValidity()&&(e.preventDefault(),n=t.input.value())?(i.userEvent=!0,t.add(n,void 0),t.input.value("")):void 0}}(this)),this.input.on("input","hx.tag-input",function(t){return function(){var e,n;return n=t.input.value(),t.options.validator?(e=t.options.validator(n),t.input.node().setCustomValidity(e||"")):""===n?t.input.node().setCustomValidity(""):void 0}}(this)),this.input.on("keydown","hx.tag-input",function(t){return function(e){var n,i,o;return 8===(e.keyCode||e.charCode)&&!r&&(r=!0,t.input.node().setCustomValidity(""),""===t.input.value()&&(i=t.tagContainer.selectAll(".hx-tag"),i.size()>0))?(n=hx.select(i.node(i.size()-1)),o=n.text(),n.remove(),t.emit("remove",{value:o,type:"user"})):void 0}}(this)),this.input.on("keyup","hx.tag-input",function(t){return 8===(t.keyCode||t.charCode)?(r=!1,!0):void 0})}return e(n,t),n.prototype.add=function(t,e){var n,i,r,o,s;if(hx.isArray(t))for(i=0,r=t.length;r>i;i++)o=t[i],this.add(o,e);else s=this.tagContainer.append("span").text(t),e?s["class"]("hx-tag "+e):s["class"]("hx-tag"),this.options.classifier&&(n=this.options.classifier(t),n&&s.classed(n,!0)),s.on("click","hx.tag-input",function(t){return function(){var e;return e=s.text(),s.remove(),t.emit("remove",{value:e,type:"user"})}}(this)),this.emit("add",{value:t,type:this._.userEvent?"user":"api"}),this._.userEvent=!1;return this},n.prototype.remove=function(t){var e,n;return null!=t?this.tagContainer.selectAll(".hx-tag").filter(function(e){return hx.select(e).text()===t}).forEach(function(t){return function(e){return t.emit("remove",{value:e.text(),type:"api"})}}(this)).remove().length:(e=this.tagContainer.selectAll(".hx-tag").forEach(function(t){return function(e){return t.emit("remove",{value:e.text(),type:"api"})}}(this)),n=e.text(),e.remove(),n)},n.prototype.items=function(t,e){return arguments.length>0?(this.remove(),this.add(t,e),this):this.tagContainer.selectAll(".hx-tag").text()},n}(hx.EventEmitter),hx.TagInput=t}(),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=function(t){function e(t,n){var i;this.selector=t,e.__super__.constructor.apply(this,arguments),hx.component.register(this.selector,this),this.options=hx.merge.defined({animate:!0},n),this.expanded=!1,i=hx.select(this.selector).classed("hx-openable",!0).classed("hx-morph-section",!0),i.select(".hx-morph-toggle").on("click","hx.morph-section",function(t){return function(){return t.toggle()}}(this)),i.select(".hx-morph-content").style("display","none")}return n(e,t),e.prototype.visible=function(t){var e,n,i;return void 0===t?this.expanded:(n=hx.select(this.selector).classed("hx-opened",t),i=n.select(".hx-morph-toggle"),e=n.select(".hx-morph-content"),this.options.animate?e.morph().cancelOngoing()["with"](t?"expand":"fadeout",100).and(t?"fadein":"collapse",100).go():e.style("display",t?"":"none"),this.expanded=t,this.emit(t?"show":"hide",{toggle:i.node(),content:e.node()}),void 0)},e.prototype.toggle=function(){return this.visible(!this.expanded)},e.prototype.show=function(){return this.visible(!0)},e.prototype.hide=function(){return this.visible(!1)},e}(hx.EventEmitter),t=function(t){function e(t,n,i,r){var o;r=hx.merge.defined({animate:!1},r),e.__super__.constructor.call(this,t,r),o=this,this.on("show","hx.morph-section",function(t){return o.detector=new hx.ClickDetector(t.content),n.call(o,t.toggle,t.content),hx.select(t.toggle).style("display","none"),o.detector.addException(t.content),o.detector.on("click","hx.morph-section",function(){return o.detector.cleanUp(),o.detector=void 0,o.hide()})}),this.on("hide","hx.morph-section",function(t){return i.call(o,t.toggle,t.content),hx.select(t.toggle).style("display","")})}return n(e,t),e}(e),hx.MorphSection=e,hx.InlineMorphSection=t}(),function(){var t,e,n,i,r,o;t=hx.flatten(["Visible","Formatter","TickRotation","Min","Max","DiscretePadding","DiscreteLabels","TickSpacing","Title","ScalePaddingMin","ScalePaddingMax","TicksAll","GridLines","NthTickVisible"].map(function(t){return["x"+t,"y"+t]})),o=["class","stroke","color","fill","fillColor","feather","markers","markerRadius","markerColor","group","size"],e=function(n,i){var r,s,a,l,h,c,u,d,p,f,x,g,v,m,y;for(e=new hx.Graph(n),g=i.axes,a=0,u=g.length;u>a;a++){for(s=g[a],r=e.addAxis(s.xType||"linear",s.yType||"linear"),l=0,d=t.length;d>l;l++)x=t[l],hx.defined(s[x])&&(r[x]=s[x]);for(v=s.series,h=0,p=v.length;p>h;h++)for(y=v[h],m=r.addSeries(y.type||"line",y.name),m.setData(y.data),m.label.interpolate=y.label.interpolate,c=0,f=o.length;f>c;c++)x=o[c],hx.defined(y[x])&&(m[x]=y[x])}return e.render(),e},i=["segmentPadding","innerPadding","ringPadding","totalAngle","startAngle","color","label","formatter"],n=function(t,n){var r,o,s;for(e=new hx.PieChart(t),r=0,o=i.length;o>r;r++)s=i[r],hx.defined(n[s])&&(e[s]=n[s]);return e.setData(n.series),e.render(),e},r=function(t,i){switch(i.type){case"pie":return n(t,i);default:return e(t,i)}};var s,a,l,h,c,u,d,p,f,x,g,v,m,y,b,w;w=function(t,e){var n,i,r,o,s;if(t.length>1){for(s=new Array(t.length),s[0]="M"+t[0].x+","+t[0].y,r=t.length-1,n=i=1,o=r;o>=1?o>=i:i>=o;n=o>=1?++i:--i)s[n]="L"+t[n].x+","+t[n].y;return e?s.join("")+"z":s.join("")}return""},s=function(t,e,n,i,r,o,s,a){var l,h,c,u,d,p;return l=function(t,e){return t/e},u=function(n,i,a){var c,u,d,f,x,g,v,m,y;for(x=l(s,a),d=Math.abs(i-n),m=[],c=u=g=n,v=i;v>=g?v>=u:u>=v;c=v>=g?++u:--u)f=p-x,y=f>0?r+x/2+c/d*f:o-x/2-c/d*f,y=hx.clamp(r,o,y),m.push(h.push({x:t+a*Math.cos(y),y:e+a*Math.sin(y)}));return m},p=o-r,c=Math.min(100,Math.max(3,Math.floor(p*Math.sqrt(i))-1)),h=[],s>=n?(d=Math.max(s,n)/(2*Math.sin(2*Math.PI/a)),h.push({x:t+d*Math.cos((r+o)/2),y:e+d*Math.sin((r+o)/2)})):u(0,c,n),u(c,0,i),w(h,!0)},c=function(t,e){var n,i,r,o,s;if(t.length>0){for(s=e(t[0]),o=e(t[0]),i=0,r=t.length;r>i;i++)n=t[i],s=hx.min([s,e(n)]),o=hx.max([o,e(n)]);return[s,o]}return void 0},u=function(t,e,n){var i,r,o,s,a;if(t.length>0){for(a=e(t[0]),s=e(t[0]),r=0,o=t.length;o>r;r++)i=t[r],a=hx.min([a,e(i),n(i)]),s=hx.max([s,e(i),n(i)]);return[a,s]}return void 0},d=function(t,e){var n,i,r,o,s;if(null==e&&(e=200),e>1){if(o=t.length,o>e){for(r=new Array(e),n=i=0,s=e;s>i;n=i+=1)r[n]=t[Math.floor(n*(o-1)/(e-1))];return r}return t.slice(0)}return 1===e&&t.length>0?[t[Math.floor(t.length/2)]]:[]},y=function(t,e){var n,i,r,o,s,a,l;for(null==e&&(e=function(){}),a=t.length,o=[],i=void 0,n=!0,s=0,l=t.length;l>s;s++)r=t[s],e(r)?(n&&(i=[],o.push(i),n=!1),i.push(r)):n=!0;return o.filter(function(t){return t.length>0})},m=function(t,e,n){var i,r,o,s,a,l;if(null==n&&(n=function(){}),e){for(r=e/t.length,a=y(t,n),l=[],o=0,s=a.length;s>o;o++)i=a[o],l.push(d(i,Math.floor(i.length*r)));return l}return y(t,n)},b=function(t,e,n){var i,r,o,s,a,l;for(s=[],a=0,i=r=0,o=t.length;o>r;i=++r)l=t[i],s.push({y0:a,y1:a+l.value,yname:e[i],y:l.value,data:l,x:n}),a+=l.value;return s},f=function(t,e,n,i){var r,o,s;for(r=o=0,s=t.length-1;s>o;r=o+=1)if(i(t[r])<=e&&e<=i(t[r+1]))return n?Math.abs(i(t[r])-e)<Math.abs(i(t[r+1])-e)?r:r+1:r;return-1},v=function(t,e,n){var i,r,o,s;if(t.length<2)return t.length-1;for(s=0,r=t.length-1,i=s;r>=s;){if(o=Math.floor((r+s)/2),n(t[o])<e)s=o+1;else{if(!(n(t[o])>e))return o;r=o-1}Math.abs(n(t[o])-e)<Math.abs(n(t[i])-e)&&(i=o)}return i},p=function(t,e,n,i){var r,o,s,a,l,h,c,u;if(a=v(t,e,function(t){return t.x}),a>-1)if(r=0===a||a===t.length-1,n){if(o=t[a],s=e-o.x,l=0>s&&a>0,h=s>0&&a<t.length-1,l||h){if(u=t[l?a-1:a+1],c=i(e,o,u,function(t,e){return t+(t-e)*s/(o.x-u.x)}),null!=c)return c;if(!r)return t[a]}else if(!r)return t[a]}else if(!r)return t[a]},l=function(t,e,n,i){var r,o,s,a,l,h,c,u,d;if(t.label.enabled){for(o=void 0,r=-1,d=t.axis.xScale.inverse(e),u=t.featheredData,l=0,h=u.length;h>l;l++)s=u[l],c=p(t.data,d,t.label.interpolate,i),c&&(a=Math.abs(c.x-d),(r>a||null==o)&&(r=a,o=c));return o}},x=function(t,e,n){return{series:t,name:t.name,x:t.axis.xScale.apply(e.x),y:t.axis.yScale.apply(n(e)),color:t.color,values:t.createLabelValues(e,n)}},a=function(t,e){return t.bounding=e.plotArea,t},h=function(t,e,n){var i,r;return i=hx.randomId(),hx.select(t).select(".hx-linear-gradient").remove(),r=hx.select(t).append("linearGradient").attr("class","hx-linear-gradient").attr("id",i).attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("x2",0).attr("y1",n.axis.yScale.rangeMin).attr("y2",n.axis.yScale.rangeMax),e.forEach(function(t){return r.append("stop").attr("offset",(t.yValue-n.axis.yScale.domainMin)/(n.axis.yScale.domainMax-n.axis.yScale.domainMin)*100+"%").attr("stop-color",hx.color(t.color).alpha(1).toString()).attr("stop-opacity",hx.color(t.color).a)}),i},g=function(t,e){var n,i;return n=t.select(".hx-legend-box"),0===n.size()&&(n=t.append("rect")["class"]("hx-legend-box")),t.view(".hx-legend-entry","g").enter(function(){var t;return t=this.append("g")["class"]("hx-legend-entry"),t.append("text"),t.append("rect"),t.node()}).update(function(t,e,n){return this.select("text").text(t.name).attr("y",20*n+10).attr("x",15),this.select("rect").text(t.name).attr("y",20*n).attr("x",0).attr("width",10).attr("height",10).attr("fill",t.color)}).apply(e),i=hx.max(t.selectAll("text").map(function(t){return t.getComputedTextLength()})),n.attr("width",i+6+20),n.attr("x",-5),n.attr("height",20*e.length),n.attr("y",-5),t};var k,_=function(t,e){function n(){this.constructor=t}for(var i in e)S.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},S={}.hasOwnProperty;k=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.data=[],this.featheredData=[],this.axis=null,this.label={enabled:!0,type:hx.plot.label.standard,formatters:{}},this.name=null}return _(e,t),e.prototype.setData=function(t){return this.data=t},e.prototype.getX=function(t){var e,n;return hx.isString(t)?(e=hx.find(this.data,function(e){return e.y===t}),hx.defined(e)?e.x:void 0):(n=f(this.data,t,!0,function(t){return t.y}),this.data[n].x)},e.prototype.getY=function(t,e){var n,i,r,o,s,a;return hx.isString(t)?(n=hx.find(this.data,function(e){return e.x===t}),hx.defined(n)?n.y:void 0):(i=f(this.data,t,!1,function(t){return t.x}),i>=0&&i<this.data.length-1?(r=this.data[i].x,o=this.data[i+1].x,s=this.data[i].y,a=this.data[i+1].y,s+(a-s)*(t-r)/(o-r)):t>this.data[this.data.length-1].x?e?void 0:this.data[this.data.length-1].y:this.data[0].y)},e.prototype.setLabel=function(t){return this.label=t},e.prototype.createLabelValues=function(t){return[{name:this.axis.xTitle,value:t.xLabel||t.x,formatter:this.label.formatters[this.axis.xTitle]||this.axis.xFormatter},{name:this.axis.yTitle,value:t.yLabel||t.y,formatter:this.label.formatters[this.axis.yTitle]||this.axis.yFormatter}]},e.prototype.getLabelDetails=function(t,e){},e.prototype.updateSvg=function(t){},e}(hx.EventEmitter);var M;M=function(){function t(t,e){this.xScaleType=null!=t?t:"linear",this.yScaleType=null!=e?e:"linear",this.xVisible=!0,this.xFormatter=hx.format.si(2),this.xTickRotation=0,this.xMin="auto",this.xMax="auto",this.xDiscretePadding=.1,this.xDiscreteLabels=void 0,this.xTickSpacing=50,this.xTitle=null,this.xScalePaddingMin=0,this.xScalePaddingMax=0,this.xTicksAll=!1,this.xGridLines=!0,this.xNthTickVisible=1,this.xAxisTickLabelPosition="bottom",this.xShowTicks=!0,this.yVisible=!0,this.yFormatter=hx.format.si(2),this.yMin="auto",this.yMax="auto",this.yDiscretePadding=.1,this.yDiscreteLabels=void 0,this.yTickSpacing=50,this.yTitle=null,this.yScalePaddingMin=0,this.yScalePaddingMax=0,this.yTicksAll=!1,this.yGridLines=!0,this.yNthTickVisible=1,this.yAxisTickLabelPosition="left",this.yShowTicks=!0,this.series=new hx.List,this.xScale=new A(0,1,0,1),this.yScale=new A(0,1,0,1),this.graph=null,this.xAxisSize=50,this.yAxisSize=50,this.xTitleHeight=0,this.yTitleHeight=0}var e,n;return n=function(t){return t instanceof N||t instanceof R},t.prototype.addSeries=function(t,e){return null==t&&(t="line"),null==e&&(e=""),hx.isString(t)&&(t=function(){switch(t){case"line":return new R;case"band":return new E;case"bar":return new N;case"scatter":return new I;case"straight-line":return new H;default:return void console.error(t+" is not a valid series type")}}(),void 0!==t&&(t.name=e)),void 0!==t?(this.series.add(t),t.axis=this,t):void 0},t.prototype.removeSeries=function(t){return this.series.remove(t),t.axis=null},t.prototype.setupAxisSvg=function(t){var e,n,i;return e=hx.select(t).append("g")["class"]("hx-axis-grid"),n=hx.select(t).append("g")["class"]("hx-x-axis"),n.append("g")["class"]("hx-axis-scale"),i=hx.select(t).append("g")["class"]("hx-y-axis"),i.append("g")["class"]("hx-axis-scale")},e=function(t,e,n){return t+(e||1)*n},t.prototype.tagSeries=function(){var t,e,n,i,r,o,s,a,l,h,c;for(t=function(t){var e,n,i,r,o,s,a,l,h,c,u,d,p,f,x,g,v,m;for(i=new hx.Map,s=0,l=t.length;l>s;s++)v=t[s],i.has(v.group)||i.set(v.group,new hx.List),i.get(v.group).add(v);for(o=0,m=i.size,m+=i.has(void 0)?i.get(void 0).size-1:0,f=i.entries(),a=0,h=f.length;h>a;a++)if(e=f[a],n=e[0],void 0===n)for(x=e[1].entries(),r=d=0,c=x.length;c>d;r=++d)v=x[r],v.groupId=o,o++,v.seriesId=0,v.groupSize=1,v.typeSize=m;else{for(g=e[1].entries(),r=p=0,u=g.length;u>p;r=++p)v=g[r],v.groupId=o,v.seriesId=r,v.groupSize=e[1].size,v.typeSize=m;o++}return o},c=new hx.Map,o=this.series.entries(),e=0,i=o.length;i>e;e++)l=o[e],c.has(l.type)||c.set(l.type,new hx.List),c.get(l.type).add(l);for(s=c.entries(),a=[],n=0,r=s.length;r>n;n++)h=s[n],a.push(t(h[1].entries()));return a},t.prototype.preupdateXAxisSvg=function(t){var n,i,r,o,s,a,l,h,u,d,p,f,x,g,v,m;switch(u=this,this.xScaleType){case"linear":this.xScale=(new A).range(0,this.graph.width);break;case"discrete":this.xScale=new z(this.xDiscretePadding).range(0,this.graph.width);break;case"log":this.xScale=(new LogScale).range(0,this.graph.width);break;case"date":this.xScale=(new L).range(0,this.graph.width)}return"discrete"===this.xScaleType?(s=function(){var t,e,n,i,r,s;if(this.xDiscreteLabels)return this.xDiscreteLabels;for(p=new hx.Set,r=this.series.entries(),t=0,n=r.length;n>t;t++)for(d=r[t],s=d.data,e=0,i=s.length;i>e;e++)o=s[e],p.add(o.x);return p.values()}.call(this),this.xScale.domain(s)):(m=function(){var t,e,n,i;for(n=this.series.entries(),i=[],t=0,e=n.length;e>t;t++)h=n[t],h instanceof H?h.data.dx||h.data.dy||!h.data.x?i.push(void 0):i.push([h.data.x,h.data.x]):i.push(c(h.data,function(t){return t.x}));return i}.call(this),m=m.filter(hx.identity),v=hx.min(m.map(function(t){return t[0]})),g=hx.max(m.map(function(t){return t[1]})),v="auto"===this.xMin?v:this.xMin,g="auto"===this.xMax?g:this.xMax,"auto"===this.xMin&&(v=e(v,g-v,-this.xScalePaddingMin)),"auto"===this.xMax&&(g=e(g,g-v,this.xScalePaddingMax)),f=v+(g-v)*this.graph.zoomStart,a=v+(g-v)*this.graph.zoomEnd,this.xScale.domain(f,a)),x=0,this.xVisible?(r=hx.select(t).select(".hx-x-axis"),i=this.xTickRotation,n=i/180*Math.PI,l=function(t){return function(e){var n,i,r,s,a,l;if(u.xTicksAll){for(p=new hx.Set,a=t.series.entries(),n=0,r=a.length;r>n;n++)for(d=a[n],l=d.data,i=0,s=l.length;s>i;i++)o=l[i],p.add(o.x);return p.values().map(function(t){return[t,e.apply(t)]})}return e.ticks(u.xTickSpacing)}}(this),r.select(".hx-axis-scale").view(".hx-axis-view","g").update(function(t){return this.view(".hx-tick","g").update(function(t){return this.view(".hx-tick-text-x","text").update(function(t){var e,r;return this.text(u.xFormatter(t)),e=this.node().getBBox(),r=e.height*Math.cos(n)+e.width*Math.sin(n),x=Math.max(x,r),0===n?this.attr("transform","translate("+-e.width/2+","+T+")").style("dominant-baseline","hanging"):this.attr("transform","translate(0,"+T+") rotate("+i+")")}).apply(t[0])}).apply(l(t))}).apply(this.xScale),this.xTitle&&(r.view(".hx-axis-title","text").update(function(t){return t.xTitleHeight=this.text(t.xTitle).height()}).apply(this),x+=this.xTitleHeight),x+=T+P):hx.select(t).select(".hx-x-axis").remove(),this.xAxisSize=x},t.prototype.preupdateYAxisSvg=function(t,i){var r,o,s,a,l,h,d,p,f,x,g,v,m,y,b,w,k,_,S,M,C,D,N,R,O,I,B,V;switch(b=this,m=this.graph.height-i,this.yScaleType){case"linear":this.yScale=(new A).range(m,0);break;case"discrete":this.yScale=new z(this.yDiscretePadding).range(m,0);break;case"log":this.yScale=(new LogScale).range(m,0);break;case"date":this.yScale=(new L).range(m,0)}if("discrete"===this.yScaleType)s=function(){var t,e,n,i,r,s;if(this.yDiscreteLabels)return this.yDiscreteLabels;for(k=new hx.Set,r=this.series.entries(),t=0,n=r.length;n>t;t++)for(w=r[t],s=w.data,e=0,i=s.length;i>e;e++)o=s[e],k.add(o.y);return k.values()}.call(this),this.yScale.domain(s);else{for(O=void 0,R=void 0,D=hx.groupBy(this.series.entries(),function(t){return t.type}),_=D.map(function(t){return{type:t[0],group:hx.groupBy(t[1],function(t){return n(t)?t.group:void 0})}}),l=0,d=_.length;d>l;l++)for(C=_[l],g=C.group,h=0,p=g.length;p>h;h++)if(a=g[h],w=a[1],void 0===a[0])I=function(){var t,e,n,i;for(n=this.series.entries(),i=[],e=0,t=n.length;t>e;e++)y=n[e],y instanceof H?y.data.dx||y.data.dy||!y.data.y?i.push(void 0):i.push([y.data.y,y.data.y]):y instanceof E?i.push(u(y.data,function(t){return t.y1},function(t){return t.y2})):i.push(c(y.data,function(t){return t.y}));return i}.call(this),I=I.filter(function(t){return null!=t}),V=hx.min(I.map(function(t){
return t[0]})),B=hx.max(I.map(function(t){return t[1]})),(void 0===O||O>V)&&(O=V),(void 0===R||B>R)&&(R=B);else for(M=w[w.length-1],O=void 0===O?0:Math.min(O,0),R=void 0===R?0:Math.max(R,0),v=M.data,x=0,f=v.length;f>x;x++)o=v[x],S=this.getYStack(M.type,M.group,o.x,M.seriesId+1,this.yScale.domainMin),(void 0===O||O>S)&&(O=S),(void 0===R||S>R)&&(R=S);O="auto"===this.yMin?O:this.yMin,R="auto"===this.yMax?R:this.yMax,"auto"===this.yMin&&(O=e(O,R-O,-this.yScalePaddingMin)),"auto"===this.yMax&&(R=e(R,R-O,this.yScalePaddingMax)),this.yScale.domain(O,R)}return N=0,this.yVisible?(r=hx.select(t).select(".hx-y-axis"),r.select(".hx-axis-scale").view(".hx-axis-view","g").update(function(t){return this.view(".hx-tick","g").update(function(t){return this.view(".hx-tick-text-y","text").update(function(t){var e;return e=this.text(b.yFormatter(t)).attr("x",-T).width(),e>N?N=e:void 0}).apply(t[0])}).apply(t.ticks(b.yTickSpacing))}).apply(this.yScale),this.yTitle&&(r.view(".hx-axis-title","text").update(function(t){return t.yTitleHeight=this.text(t.yTitle).attr("transform","rotate(90)").width()}).apply(this),N+=this.yTitleHeight),N+=T+P):hx.select(t).select(".hx-y-axis").remove(),this.yAxisSize=N},t.prototype.updateAxisSvg=function(t,e,n,i,r){var o,s,a,l,h,c,u,d,p,f,x;switch(d=this,p=this.graph.width,h=this.graph.height,this.xScaleType){case"linear":case"date":this.xScale.range(i,p);break;case"discrete":this.xScale.range(i,p);break;case"log":this.xScale.range(i,p)}switch(this.yScaleType){case"linear":case"date":this.yScale.range(h-r,0);break;case"discrete":this.yScale.range(h-r,0);break;case"log":this.yScale.range(h-r,0)}return l=hx.select(t).select(".hx-axis-grid"),this.xVisible?(this.xGridLines&&l.view(".hx-vertical-grid-line","line").update(function(t){return this.attr("x1",t[1]).attr("x2",t[1]).attr("y1",d.yScale.rangeMax).attr("y2",d.yScale.rangeMin)}).apply(this.xScale.ticks(d.xTickSpacing)),o=hx.select(t).select(".hx-x-axis"),x=this.yScale.apply(0),isNaN(x)?(a=h-n-this.xAxisSize,u=h-n-this.xAxisSize):(a=Math.min(h-n-this.xAxisSize,x),u="axis"===this.xAxisTickLabelPosition?Math.min(h-n-this.xAxisSize,x):h-n-this.xAxisSize),o.select(".hx-axis-scale").view(".hx-axis-view","g").update(function(t){return this.view(".hx-axis-line","line").update(function(t){return this.attr("x1",t.rangeMin).attr("x2",t.rangeMax),this.attr("y1",a).attr("y2",a)}).apply(t),this.view(".hx-tick","g").update(function(t,e,n){return this.attr("transform","translate("+t[1]+","+u+")"),this.view(".hx-tick-line","line").update(function(t){return this.attr("y1",0).attr("y2",D)}).apply(this),this.view(".hx-tick-text-x","text").update(function(t){return this.text(n%d.xNthTickVisible===0?d.xFormatter(t):"")}).apply(t[0])}).apply(d.xShowTicks?t.ticks(d.xTickSpacing):[])}).apply(this.xScale),this.xTitle&&o.view(".hx-axis-title","text").update(function(t){return this.attr("transform","translate("+(p+i)/2+", "+(u+t.xAxisSize-t.xTitleHeight/2-P/2)+")").text(d.xTitle)}).apply(this)):hx.select(t).select(".hx-x-axis").remove(),this.yVisible?(this.yGridLines&&l.view(".hx-horizontal-grid-line","line").update(function(t){return this.attr("y1",t[1]).attr("y2",t[1]).attr("x1",d.xScale.rangeMax).attr("x2",d.xScale.rangeMin)}).apply(this.yScale.ticks(d.yTickSpacing)),o=hx.select(t).select(".hx-y-axis"),f=this.xScale.apply(0),isNaN(f)?(s=e+this.yAxisSize,c=e+this.yAxisSize):(s=Math.max(e+this.yAxisSize,f),c="axis"===this.yAxisTickLabelPosition?Math.max(e+this.yAxisSize,f):e+this.yAxisSize),o.select(".hx-axis-scale").view(".hx-axis-view","g").update(function(t){return this.view(".hx-axis-line","line").update(function(t){return this.attr("y1",t.rangeMin).attr("y2",t.rangeMax).attr("x1",s).attr("x2",s)}).apply(t),this.view(".hx-tick","g").update(function(t,e,n){return this.attr("transform","translate("+c+","+t[1]+")"),this.view(".hx-tick-line","line").update(function(t){return this.attr("x1",-D).attr("x2",0)}).apply(this),this.view(".hx-tick-text-y","text").update(function(t){return this.attr("x",-T).text(n%d.yNthTickVisible===0?d.yFormatter(t):"")}).apply(t[0])}).apply(d.yShowTicks?t.ticks(d.yTickSpacing):[])}).apply(this.yScale),this.yTitle?o.view(".hx-axis-title","text").update(function(t){return this.attr("transform","translate("+(c-t.yAxisSize+t.yTitleHeight/2+P/2)+", "+(h-r)/2+") rotate(-90)").text(d.yTitle)}).apply(this):void 0):hx.select(t).select(".hx-y-axis").remove()},t.prototype.updateDataSvg=function(t,e){var n,i,r,o,s,a,l,h;for(n=[],h=[],hx.select(t).view(".hx-series","g").update(function(t,e){return n.push(e)}).apply(this.series.entries()),hx.select(e).view(".hx-series","g").update(function(t,e){return h.push(e)}).apply(this.series.entries()),s=this.series.entries(),a=[],i=r=0,o=s.length;o>r;i=++r)l=s[i],a.push(l.updateSvg(n[i],h[i]));return a},t.prototype.getLabelDetails=function(t,e){var n,i;return n=hx.flatten(function(){var n,r,o,s;for(o=this.series.entries(),s=[],n=0,r=o.length;r>n;n++)i=o[n],s.push(i.getLabelDetails(t,e));return s}.call(this)),n.filter(function(t){return t})},t.prototype.getXStack=function(t,e,n,i,r){var o,s,a,l,h,c,u;if(null==r&&(r=0),e){for(c=Math.max(this.xScale.domainMin,0),l=this.series.entries(),o=s=0,a=l.length;a>s;o=++s)h=l[o],h.seriesId<i&&h.group===e&&h.type===t&&(u=h.getX(n),hx.defined(ys)&&(c+=u));return c}return Math.max(r,0)},t.prototype.getYStack=function(t,e,n,i,r){var o,s,a,l,h,c,u;if(null==r&&(r=0),e){for(c=Math.max(this.yScale.domainMin,0),l=this.series.entries(),o=s=0,a=l.length;a>s;o=++s)h=l[o],h.seriesId<i&&h.group===e&&h.type===t&&(u=h.getY(n,"discrete"===this.xScaleType),hx.defined(u)&&(c+=u));return c}return Math.max(r,0)},t}();var C,P,T,D,_=function(t,e){function n(){this.constructor=t}for(var i in e)S.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},S={}.hasOwnProperty;D=6,T=D+4,P=4,C=function(t){function e(t){var r,o,s,a,l,h,c,u,d;this.selector=t,e.__super__.constructor.apply(this,arguments),hx.component.register(this.selector,this),this.axes=new hx.List,this.zoomStart=0,this.zoomEnd=1,this.useZoom=!1,this.useLabels=!0,this.useLegend=!1,this.legendPosition="auto",s=hx.randomId(),h=hx.select(this.selector).on("resize","hx.plot",function(t){return function(){return t.render()}}(this)),this.svgTarget=h.append("svg").attr("class","hx-graph"),o=this.svgTarget.append("defs"),this.axesTarget=this.svgTarget.append("g").attr("class","hx-axes"),this.plotTarget=this.svgTarget.append("g").attr("class","hx-plot"),this.labelTarget=this.svgTarget.append("g").attr("class","hx-label"),r=o.append("clipPath").attr("id","clip-series-"+s),this.clipRect=r.append("rect"),this.plotTarget.attr("clip-path","url(#clip-series-"+s+")"),this.labelsView=this.labelTarget.view(".hx-plot-label","g").update(function(t,e){return t.series.label.type(e,t)}),u=0,d=0,l=0,a=1,this.svgTarget.on("pointerdown","hx.plot",function(t){return function(e){var n,r;return n=Math.round(e.x-t.svgTarget.box().left),r=Math.round(e.y-t.svgTarget.box().top),i.call(t,n,r),e.event.targetTouches&&e.event.targetTouches.length>1?(e.event.preventDefault(),e.event.stopPropagation(),u=e.event.targetTouches[0].clientX-t.svgTarget.box().left-t.plotArea.x1,d=e.event.targetTouches[1].clientX-t.svgTarget.box().left-t.plotArea.x1,l=t.zoomStart,a=t.zoomEnd):void 0}}(this)),c=.01,this.svgTarget.on("touchmove","hx.plot",function(t){return function(e){var n,i,r,o,s,h,p,f;return e.targetTouches.length>1&&t.useZoom?(e.preventDefault(),e.stopPropagation(),r=t.plotArea.x2-t.plotArea.x1,o=e.targetTouches[0].clientX-t.svgTarget.box().left-t.plotArea.x1,s=e.targetTouches[1].clientX-t.svgTarget.box().left-t.plotArea.x1,p=(u+d)/(2*r),h=l+(a-l)*p,f=Math.abs(u-d)/Math.abs(o-s),i=l-h,n=a-h,1===t.zoomEnd&&i>-c&&(i=-c),0===t.zoomStart&&c>n&&(n=c),t.zoomStart=hx.clampUnit(h+f*i),t.zoomEnd=hx.clampUnit(h+f*n),t.emit("zoom",{start:t.zoomStart,end:t.zoomEnd}),t.render()):void 0}}(this)),this.svgTarget.on("mousemove","hx.plot",function(t){return function(e){var n,r,o;return r=Math.round(e.clientX-t.svgTarget.box().left),o=Math.round(e.clientY-t.svgTarget.box().top),t.useLabels&&i.call(t,r,o),t.useLegend&&(n=t.svgTarget.select(".hx-legend-container"),"hover"===t.legendPosition&&n.style("display",""),"auto"===t.legendPosition||"hover"===t.legendPosition)?r-t.plotArea.x1<(t.plotArea.x1+t.plotArea.x2)/2?n.attr("transform","translate("+(t.plotArea.x2-10-n.width())+","+(t.plotArea.y1+10)+")"):n.attr("transform","translate("+(t.plotArea.x1+10)+","+(t.plotArea.y1+10)+")"):void 0}}(this)),this.svgTarget.on("mouseleave","hx.plot",function(t){return function(){return t.useLegend&&"hover"===t.legendPosition?t.svgTarget.select(".hx-legend-container").style("display","none"):void 0}}(this)),this.svgTarget.on("pointerleave","hx.plot",function(t){return function(e){return t.labelsView.apply([])}}(this)),this.svgTarget.on("click","hx.plot",function(t){return function(e){var i,r,o,s;return o=Math.round(e.x-t.svgTarget.box().left),s=Math.round(e.y-t.svgTarget.box().top),r=n.call(t,o,s),r?(i={event:e,data:r.values,series:r.series},t.emit("click",i),r.series.emit("click",i)):void 0}}(this)),this.svgTarget.on("wheel","hx.plot",function(t){return function(e){var n,i,r,o,s,a,l,h;return t.useZoom?(e.preventDefault(),e.stopPropagation(),c=.01,n=-e.deltaY,1===e.deltaMode&&(n*=20),s=e.clientX-t.svgTarget.box().left-t.plotArea.x1,o=t.plotArea.x2-t.plotArea.x1,l=hx.clampUnit(s/o),a=t.zoomStart+(t.zoomEnd-t.zoomStart)*l,h=1-n/600,r=t.zoomStart-a,i=t.zoomEnd-a,1===t.zoomEnd&&r>-c&&(r=-c),0===t.zoomStart&&c>i&&(i=c),t.zoomStart=hx.clampUnit(a+h*r),t.zoomEnd=hx.clampUnit(a+h*i),t.emit("zoom",{start:t.zoomStart,end:t.zoomEnd}),t.render()):void 0}}(this))}var n,i;return _(e,t),e.prototype.addAxis=function(){var t;return t=arguments.length>=2?new M(arguments[0],arguments[1]):1===arguments.length?hx.isString(arguments[0])?new M(arguments[0],arguments[0]):arguments[0]:new M("linear","linear"),t.graph=this,this.axes.add(t),t},e.prototype.removeAxis=function(t){return this.axes.remove(t),t.graph=null},e.prototype.render=function(){var t,e,n,i,r,o,s,a,l,h,c,u;if(h=hx.select(this.selector).style("width"),n=hx.select(this.selector).style("height"),this.width=Number(h.slice(0,-2)),this.height=Number(n.slice(0,-2)),s=Number(this.svgTarget.style("width").slice(0,-2)),o=Number(this.svgTarget.style("height").slice(0,-2)),e=this.axes.list.some(function(t){return t.series.list.some(function(t){return hx.isObject(t.data)||t.data.length>0})}),r=this,this.svgTarget.view(".hx-plot-no-data","text").update(function(){return this.text("No Data").attr("x",r.width/2).attr("y",r.height/2)}).apply(e?[]:[!0]),this.axes.forEach(function(t){return t.tagSeries()}),t=function(t){var e;return e=this.append("g")["class"]("hx-axis").node(),t.setupAxisSvg(e),e},a=0,this.axesTarget.view(".hx-axis","g").enter(t).update(function(t,e){return t.preupdateXAxisSvg(e),a+=t.xAxisSize}).apply(this.axes.entries()),l=0,this.axesTarget.view(".hx-axis","g").enter(t).update(function(t,e){return t.preupdateYAxisSvg(e,a),l+=t.yAxisSize}).apply(this.axes.entries()),c=0,u=0,this.axesTarget.view(".hx-axis","g").enter(t).update(function(t,e){return t.updateAxisSvg(e,u,c,l,a),c+=t.xAxisSize,u+=t.yAxisSize}).apply(this.axes.entries()),this.plotArea={x1:u,y1:0,x2:this.width,y2:this.height-c},this.plotTarget.view(".hx-axis-data","g").enter(function(){var t;return t=this.append("g")["class"]("hx-axis-data"),t.append("g")["class"]("hx-graph-fill-layer"),t.append("g")["class"]("hx-graph-sparse-layer"),t.node()}).update(function(t,e){return t.updateDataSvg(this.select(".hx-graph-fill-layer").node(),this.select(".hx-graph-sparse-layer").node())}).apply(this.axes.entries()),this.useLegend)switch(i=this.svgTarget.select(".hx-legend-container"),0===i.size()&&(i=this.svgTarget.append("g")["class"]("hx-legend-container")),g(i,hx.flatten(this.axes.list.map(function(t){return t.series.list}))),this.legendPosition){case"top-left":i.attr("transform","translate("+(this.plotArea.x1+10)+","+(this.plotArea.y1+10)+")");break;case"bottom-right":i.attr("transform","translate("+(this.plotArea.x2-10-i.width())+","+(this.plotArea.y2-5-i.height())+")");break;case"bottom-left":i.attr("transform","translate("+(this.plotArea.x1+10)+","+(this.plotArea.y2-5-i.height())+")");break;case"hover":i.style("display","none");break;default:i.attr("transform","translate("+(this.plotArea.x2-10-i.width())+","+(this.plotArea.y1+10)+")")}else this.svgTarget.select(".hx-legend-container").remove();return this.clipRect.attr("x",this.plotArea.x1).attr("y",this.plotArea.y1).attr("width",this.plotArea.x2-this.plotArea.x1).attr("height",this.plotArea.y2-this.plotArea.y1)},n=function(t,e){var n,i,r,o,s,a,l,h,c,u;for(t=hx.clamp(this.plotArea.x1,this.plotArea.x2,t),e=hx.clamp(this.plotArea.y1,this.plotArea.y2,e),l=hx.flatten(function(){var i,r,o,s;for(o=this.axes.entries(),s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(n.getLabelDetails(t,e));return s}.call(this)),l=l.filter(function(t){return function(e){var n,i;return t.plotArea.x1<=(n=e.x)&&n<=t.plotArea.x2&&t.plotArea.y1<=(i=e.y)&&i<=t.plotArea.y2}}(this)),r=void 0,i=void 0,s=0,h=l.length;h>s;s++)a=l[s],c=a.x-t,u=a.y-e,o=c*c+u*u,(void 0===i||i>o)&&(r=a,i=o);return r},i=function(t,e){var i;return i=n.call(this,t,e),this.labelsView.apply(i?a(i,this):[])},e}(hx.EventEmitter);var A;A=function(){function t(t,e,n,i){var r;this.domainMin=null!=t?t:0,this.domainMax=null!=e?e:10,this.rangeMin=null!=n?n:0,this.rangeMax=null!=i?i:10,r=this.domainMax-this.domainMin,this.factor=0!==r?(this.rangeMax-this.rangeMin)/r:1}return t.prototype.apply=function(t){return this.rangeMin+(t-this.domainMin)*this.factor},t.prototype.inverse=function(t){return this.domainMin+(t-this.rangeMin)/this.factor},t.prototype.domain=function(t,e){var n;return this.domainMin=t,this.domainMax=e,n=this.domainMax-this.domainMin,this.factor=0!==n?(this.rangeMax-this.rangeMin)/n:1,this},t.prototype.range=function(t,e){var n;return this.rangeMin=t,this.rangeMax=e,n=this.domainMax-this.domainMin,this.factor=0!==n?(this.rangeMax-this.rangeMin)/n:1,this},t.prototype.ticks=function(t){var e,n,i,r,o,s,a,l,h,c,u,d;switch(i=this.domainMax-this.domainMin,d=Math.abs(this.rangeMax-this.rangeMin)/t,h=Math.pow(10,Math.floor(Math.log(i/d)/Math.LN10)),o=i/(d*h),!1){case!(o>=7.5):h*=10;break;case!(o>=3):h*=5;break;case!(o>=1.25):h*=2}for(r=Math.ceil(this.domainMin/h)*h,n=(Math.floor(this.domainMax/h)+.5)*h,l=(n-r)/h,u=[],s=a=0,c=l;c>=0?c>a:a>c;s=c>=0?++a:--a)e=r+s*h,u.push([e,this.apply(e)]);return u},t}();var z;z=function(){function t(t){this.bandPadding=null!=t?t:.1,this.domainCategories=[],this.rangeMin=0,this.rangeMax=10}return t.prototype.apply=function(t){var e;return e=this.domainCategories.indexOf(t),-1!==e?this.rangeMin+e/this.domainCategories.length*(this.rangeMax-this.rangeMin)+this.tickOffset()+this.tickWidth()/2:void 0},t.prototype.inverse=function(t){var e;return e=Math.floor((t-this.tickOffset()-this.rangeMin)/(this.rangeMax-this.rangeMin)*this.domainCategories.length),e>=0&&e<this.domainCategories.length?this.domainCategories[e]:void 0},t.prototype.domain=function(t){return this.domainCategories=t,this},t.prototype.range=function(t,e){return this.rangeMin=t,this.rangeMax=e,this},t.prototype.ticks=function(t){var e,n,i,r,o;for(null==t&&(t=50),r=this.domainCategories,o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push([e,this.apply(e)]);return o},t.prototype.tickWidth=function(){return(this.rangeMax-this.rangeMin)/this.domainCategories.length*(1-this.bandPadding)},t.prototype.tickOffset=function(){return(this.rangeMax-this.rangeMin)/this.domainCategories.length*this.bandPadding/2},t}();var L,_=function(t,e){function n(){this.constructor=t}for(var i in e)S.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},S={}.hasOwnProperty;L=function(t){function e(t,n,i,r){this.domainMin=t,this.domainMax=n,this.rangeMin=i,this.rangeMax=r,e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.ticks=function(t){var e,n,i,r,o,s,a,l,h,c,u,d,p,f,x,g;for(g=[1,2,5,10,25,50,100,250,500,1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],r=this.domainMax-this.domainMin,e=function(t){var e,n,i;for(e=0,n=g.length;n>e;e++)if(i=g[e],i>=t)return i;return 1},f=Math.abs(this.rangeMax-this.rangeMin)/t,c=Math.pow(10,Math.floor(Math.log(r/f)/Math.LN10)),s=r/(f*c),c*=s>=7.5?10:s>=3?5:s>=2?3:s>=1.25?2:s>=1.025?1.5:1,o=Math.ceil(this.domainMin/c)*c,i=Math.floor(this.domainMax/c)*c,p=function(t,e){return e?Math.ceil(t/x)*x:Math.floor(t/x)*x},x=e(c),c=p(c,!0),o=p(o),o<this.domainMin&&(o+=c),h=(i-o)/c,d=[],a=l=0,u=h;u>=0?u>=l:l>=u;a=u>=0?++l:--l)n=o+a*c,d.push([n,this.apply(n)]);return d},e}(A);var E,_=function(t,e){function n(){this.constructor=t}for(var i in e)S.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},S={}.hasOwnProperty;E=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.color=hx.color(hx.theme.plot.colors[2]).alpha(.2).toString(),this.feather=200,this["class"]=""}var n,i;return _(e,t),i=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push({x:e.xScale.apply(n.x),y:e.yScale.apply(n.y)});return o},e.prototype.updateSvg=function(t){var e,n,r,o,s,a,l;return l=this,this.featheredData=m(this.data,this.feather,function(t){return void 0!==t.y1&&void 0!==t.y2}),e=function(){var t,e,r,o;for(r=this.featheredData,o=[],t=0,e=r.length;e>t;t++)n=r[t],a=n.map(function(t){return{x:t.x,y:t.y1}}).concat(n.slice(0).reverse().map(function(t){return{x:t.x,y:t.y2}})),o.push(w(i(a,this.axis),!0));return o}.call(this),Array.isArray(l.fillColor||l.color)?(o=l.fillColor||l.color.map(function(t){return{value:t.value,color:hx.color(t.color).alpha(.2).toString("rgba")}}),s=h(t,o,this),r="url(#"+s+")"):r=l.fillColor||hx.color(l.color).alpha(.2).toString(),hx.select(t).view(".hx-series-data","path","hx-series-area").update(function(t){return this.attr("d",t)["class"]("hx-series-data "+l["class"]).attr("fill",r)}).apply(e)},e.prototype.getLabelDetails=function(t,e){var n,i,r;return this.label.enabled?(n=!1,r=createLabels(this.label,this.featheredData,this.axis,t,this.color,this,n,function(t){return t.yLabel1||t.y1}),i=createLabels(this.label,this.featheredData,this.axis,t,this.color,this,n,function(t){return t.yLabel2||t.y2}),r.concat(i)):[void 0]},e.prototype.createLabelValues=function(t,e){return[{name:this.axis.xTitle,value:t.xLabel||t.x,formatter:this.label.formatters[this.axis.xTitle]||this.axis.xFormatter},{name:this.axis.yTitle,value:e(t),formatter:this.label.formatters[this.axis.yTitle]||this.axis.yFormatter}]},n=function(t,e,n,i){return null!=e.y1&&null!=n.y1&&null!=e.y2&&null!=n.y2?{x:t,y1:i(e.y1,n.y1),y2:i(e.y2,n.y2)}:void 0},e.prototype.getLabelDetails=function(t,e){var i;return(i=l(this,t,e,n))?[x(this,i,function(t){return t.y1}),x(this,i,function(t){return t.y2})]:[]},e}(k);var N,_=function(t,e){function n(){this.constructor=t}for(var i in e)S.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},S={}.hasOwnProperty;N=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.color=hx.theme.plot.colors[1],this.type="bar",this.group=void 0,this["class"]=""}return _(e,t),e.prototype.updateSvg=function(t){var e,n;return n=this,e=this.axis,hx.select(t).view(".hx-series-data","rect").update(function(t){var i,r,o,s;return"discrete"===e.xScaleType?(r=e.xScale.tickWidth()/n.typeSize,o=e.xScale.apply(t.x)-r*n.typeSize/2+n.groupId*r,i=Math.abs(e.yScale.apply(t.y)-e.yScale.apply(0)),s=e.yScale.apply(e.getYStack(n.type,n.group,t.x,n.seriesId)),t.y>0&&(s-=i)):(r=Math.abs(e.xScale.apply(t.x)-e.xScale.apply(0)),o=e.xScale.apply(e.getXStack(n.type,n.group,t.y,n.seriesId)),i=Math.abs(e.yScale.tickWidth()/n.typeSize),s=e.yScale.apply(t.y)-i*n.typeSize/2+n.groupId*i,t.y>0&&(s-=i)),this["class"]("hx-series-data hx-series-bar "+n["class"]).attr("y",s).attr("x",o).attr("height",i).attr("width",r).style("fill",t.color||n.color)}).apply(this.data)},e.prototype.getLabelDetails=function(t,e){var n,i,r,o,s,a,l,h,c,u;return this.label.enabled?(c=this.axis.xScale.inverse(t),u=this.axis.yScale.inverse(e),n=hx.find(this.data,function(t){return t.x===c}),n?(h=this.axis.xScale.tickWidth()/this.typeSize,i=this.axis.xScale.apply(n.x)-h*this.typeSize/2+this.groupId*h,o=Math.abs(this.axis.yScale.apply(n.y)-this.axis.yScale.apply(0)),r=this.axis.yScale.apply(this.axis.getYStack(this.type,this.group,n.x,this.seriesId)),n.y>0&&(r-=o),null!=c&&null!=u&&null!=n?(l=Math.min(r,this.axis.yScale.apply(0)),s=Math.max(r,r+o),u=hx.clamp(l,s,this.axis.yScale.apply(u)),a={series:this,name:this.name,x:i+h/2,y:u,color:n.color||this.color,values:this.createLabelValues(n)},[a]):[]):[]):[]},e}(k);var R,O,_=function(t,e){function n(){this.constructor=t}for(var i in e)S.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},S={}.hasOwnProperty;O=function(t,e,n,i,r,o){return hx.select(e).view(".hx-series-data","g").update(function(e){return this["class"]("hx-series-data hx-series-line "+t["class"]).view(n,r).update(o).apply(e)}).apply(i)},R=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.type="line",this.stroke=!0,this.color=hx.theme.plot.colors[0],this.fill=!1,this.fillColor=void 0,this.feather=200,this.markers=!1,this.markerRadius=2,this.markerColor=void 0,this["class"]=""}var n,i;return _(e,t),i=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push({x:e.xScale.apply(n.x),y:e.yScale.apply(n.y)});return o},e.prototype.updateSvg=function(t,e){var n,r,o,s,a,l,c,u,d,p,f,x,g,v;return g=this,o=this.axis,l=m(this.data,this.feather,function(t){return void 0!==t.y}),this.featheredData=l,n=function(t,e){var n,i,r,s;for(s=[],i=0,r=t.length;r>i;i++)n=t[i],s.push({x:n.x,y:o.getYStack(g.type,g.group,n.x,g.seriesId)+(e?0:n.y)});return s},this.fill&&(Array.isArray(g.fillColor||g.color)?(p=g.fillColor||g.color.map(function(t){return{value:t.value,color:hx.color(t.color).alpha(.2).toString("rgba")}}),f=h(t,p,g),c="url(#"+f+")"):c=g.fillColor||hx.color(g.color).alpha(.2).toString(),d=Math.max(Math.min(this.axis.yScale.domainMax,0),this.axis.yScale.domainMin),u=function(){var t,e,i;for(i=[],t=0,e=l.length;e>t;t++)a=l[t],i.push(n(a).concat(n(a.slice(0).reverse(),!0)));return i}(),r=function(){var t,e,n;for(n=[],t=0,e=u.length;e>t;t++)a=u[t],n.push(w(i(a,this.axis),!0));return n}.call(this),O(this,t,".hx-series-line-fill",r,"path",function(t){return this.attr("d",t).attr("fill",c)})),this.stroke&&(s="discrete"!==this.axis.yScaleType?function(){var t,e,r;for(r=[],t=0,e=l.length;e>t;t++)a=l[t],r.push(w(i(n(a),this.axis)));return r}.call(this):function(){var t,e,n;for(n=[],t=0,e=l.length;e>t;t++)a=l[t],n.push(w(i(a,this.axis)));return n}.call(this),Array.isArray(this.color)?(f=h(e,this.color,g),v="url(#"+f+")"):v=g.color,O(this,e,".hx-series-line-stroke",s,"path",function(t){return this.attr("d",t).attr("stroke",v)})),this.markers?(x="discrete"!==this.axis.yScaleType?n(hx.flatten(l)):hx.flatten(l),O(this,e,".hx-series-line-markers",i(x,this.axis),"circle",function(t){return this.attr("cx",t.x).attr("cy",t.y).attr("r",g.markerRadius).attr("fill",g.markerColor||g.color)})):void 0},n=function(t,e,n,i){return null!=e.y&&null!=n.y?{x:t,y:i(e.y,n.y)}:void 0},e.prototype.getLabelDetails=function(t,e){var i;return(i=l(this,t,e,n))?[x(this,i,function(t){return function(e){return t.axis.getYStack(t.type,t.group,e.x,t.seriesId)+e.y}}(this))]:[]},e}(k);var I,_=function(t,e){function n(){this.constructor=t}for(var i in e)S.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},S={}.hasOwnProperty;I=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.color=hx.theme.plot.colors[3],this.size=2,this["class"]=""}var n,i;return _(e,t),n=function(t){return t.filter(function(t){return void 0!==t.x&&void 0!==t.y})},i=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push({x:e.xScale.apply(n.x),y:e.yScale.apply(n.y),color:n.color,size:n.size});return o},e.prototype.updateSvg=function(t,e){var r;return r=this,hx.select(e).view(".hx-series-data","circle").update(function(t){return this["class"]("hx-series-data hx-series-scatter "+r["class"]).attr("cx",t.x).attr("cy",t.y).attr("r",t.size||r.size).style("fill",t.color||r.color)}).apply(i(n(this.data),this.axis))},e.prototype.getLabelDetails=function(t,e){var i,r,o,s,a,l,h,c;if(!this.label.enabled)return[];for(i=void 0,r=0,h=n(this.data),s=0,a=h.length;a>s;s++)o=h[s],c=(this.axis.xScale.apply(o.x)-t)*(this.axis.xScale.apply(o.x)-t)+(this.axis.yScale.apply(o.y)-e)*(this.axis.yScale.apply(o.y)-e),(void 0===i||r>c)&&(i=o,r=c);return i?(l={series:this,name:this.name,x:this.axis.xScale.apply(i.x),y:this.axis.yScale.apply(i.y),color:i.color||this.color,values:this.createLabelValues(i)},[l]):void 0},e}(k);var H,_=function(t,e){function n(){this.constructor=t}for(var i in e)S.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},S={}.hasOwnProperty;H=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.color=hx.theme.plot.colors[4],this["class"]=""}var n;return _(e,t),e.prototype.updateSvg=function(t,e){var i,r;return i=n.call(this),i?(r=this,hx.select(e).view(".hx-series-data","line").update(function(t){return this["class"]("hx-series-data hx-series-constant "+r["class"]).attr("x1",r.axis.xScale.apply(t[0].x)).attr("y1",r.axis.yScale.apply(t[0].y)).attr("x2",r.axis.xScale.apply(t[1].x)).attr("y2",r.axis.yScale.apply(t[1].y)).attr("d",t).attr("stroke",r.color)}).apply([i])):void 0},e.prototype.getLabelDetails=function(t,e){var n,i,r,o,s;return this.label.enabled?(n=this.data.dx||0,i=this.data.dy||0,o=this.axis.xScale.inverse(t),s=this.axis.yScale.inverse(e),0!==n&&0!==i&&null!=this.data.x&&null!=this.data.y?s=this.data.y+(o-this.data.x)*i/n:null!=this.data.x?o=this.data.x:null!=this.data.y&&(s=this.data.y),this.axis.xScale.domainMin<o&&o<this.axis.xScale.domainMax&&this.axis.yScale.domainMin<s&&s<this.axis.yScale.domainMax?(r={series:this,name:this.name,x:this.axis.xScale.apply(o),y:this.axis.yScale.apply(s),color:this.color,values:this.createLabelValues({x:o,y:s})},[r]):[]):[]},n=function(){var t,e,n,i,r,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y,b,w,k,_,S,M;if(s=this.data.dx||0,a=this.data.dy||0,0!==s&&0!==a&&null!=this.data.x&&null!=this.data.y)return b=this.data.x||0,_=this.data.y||0,t=this.axis.xScale.domainMin,e=this.axis.xScale.domainMax,n=this.axis.yScale.domainMin,i=this.axis.yScale.domainMax,r=b-t,o=_-n,f=o*s-a*r,d=function(){switch(!1){case!(f>0):return w=t,y=(t-b)/s,S=_+y*a,{x:w,y:S};case 0!==f:return w=t,S=n,{x:w,y:S};case!(0>f):return S=n,y=(n-_)/a,w=b+y*s,{x:w,y:S}}}(),r=b-e,o=_-i,f=o*s-a*r,p=function(){switch(!1){case!(0>f):return k=e,y=(e-b)/s,M=_+y*a,{x:k,y:M};case 0!==f:return k=e,M=i,{x:k,y:M};case!(f>0):return M=i,y=(i-_)/a,k=b+y*s,{x:k,y:M}}}(),[d,p];if(null!=this.data.x){for(x=[this.axis.yScale.domainMin,this.axis.yScale.domainMax],v=[],l=0,c=x.length;c>l;l++)_=x[l],v.push({x:this.data.x,y:_});return v}if(null!=this.data.y){for(g=[this.axis.xScale.domainMin,this.axis.xScale.domainMax],m=[],h=0,u=g.length;u>h;h++)b=g[h],m.push({x:b,y:this.data.y});return m}},e}(k);var B,_=function(t,e){function n(){this.constructor=t}for(var i in e)S.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},S={}.hasOwnProperty;B=function(t){function e(t){var n;this.selector=t,e.__super__.constructor.apply(this,arguments),n=hx.select(this.selector).on("resize","hx.plot",function(t){return function(){return t.render()}}(this)),this.segmentPadding=0,this.innerPadding=0,this.ringPadding=.1,this.totalAngle=2*Math.PI,this.startAngle=0,this.color=hx.theme.plot.colors[1],this.label={type:hx.plot.label.standard,formatters:{}},this.useLabels=!0,this.formatter=hx.format.si(2),this.segmentTextFormatter=function(t,e){return t.size/hx.sum(e.map(function(t){return t.size}))>.05?t.size:""},this.useSegmentText=!1,this.useLegend=!1,this.legendPosition="auto"}var n,i;return _(e,t),e.prototype.setData=function(t){return t instanceof Array?this.data=t:this.data=[t]},n=function(t){var e,n,r;return e=!1,n=hx.sum(t.map(function(t){return t.size})),r=0===n?(e=!0,t.length):hx.sum(t.map(function(t){return i(t,n)})),{total:r,allZero:e}},i=function(t,e,n){return n?1:t.size>0?t.size:e/100},e.prototype.render=function(){var t,e,r,o,a,l,h,c,u,d,p,f,x,v,m,y,b,w,k,_,S,M,C;for(y=this,m=hx.select(this.selector),C=m.width(),l=m.height(),p=Math.min(C,l)/2,this.circle={x:C/2,y:l/2,r:p},t=Math.PI;this.startAngle<0;)this.startAngle+=2*t;switch(!1){case!(this.totalAngle===t&&this.startAngle%(t/2)===0):switch(!1){case!(0===this.startAngle||this.startAngle%(2*t)===0||this.startAngle%t===0):p=hx.clamp(0,l/2,2*p);break;case!(this.startAngle%(1.5*t)===0||this.startAngle%(t/2)===0):p=hx.clamp(0,C/2,2*p)}switch(!1){case!(0===this.startAngle||this.startAngle%(2*t)===0):r=-p/2,o=0;break;case this.startAngle%(1.5*t)!==0:r=0,o=p/2;break;case this.startAngle%t!==0:r=p/2,o=0;break;case this.startAngle%(t/2)!==0:r=0,o=-p/2;break;default:r=0,o=0}this.circle.x+=r,this.circle.y+=o,this.circle.r=p}if(e=p*(1-this.innerPadding)/this.data.length+p*(1-this.innerPadding)/this.data.length*this.ringPadding/this.data.length,v=e*this.segmentPadding,h=p*this.innerPadding,f=p-h,d=p,x=f/this.data.length+f/this.data.length*this.ringPadding/this.data.length,S=function(t,e,n,i,r,o,a){var l,c,u;return u=y.startAngle+1.5*Math.PI,c=u+i/r*y.totalAngle,l=u+(i+e)/r*y.totalAngle,t.attr("d",s(y.circle.x,y.circle.y,h+x*o,h+x*(o+1-y.ringPadding),c,l,v,a)).attr("fill",n)},_=function(t,e,r){var o,s,a,l,h;return l=t.segments,a=0,s=n(l),h=s.total,o=s.allZero,this.view(".hx-pie-segment","path").update(function(t){var e;return e=i(t,h,o),S(this,e,t.color,a,h,r,l.length),a+=e}).apply(l)},u=function(t,e,n,i,r){var o,s,a;return a=y.startAngle+1.5*Math.PI,s=a+e/n*y.totalAngle,o=a+(e+t)/n*y.totalAngle,{x:y.circle.x+Math.cos((s+o)/2)*(h+(i+.5)*x),y:y.circle.y+Math.sin((s+o)/2)*(h+(i+.5)*x)}},M=function(t,e,r){var o,s,a,l,h;return l=t.segments,a=0,s=n(l),h=s.total,o=s.allZero,this.view(".hx-pie-segment-text","text").update(function(t){var e,n,s,c;return n=i(t,h,o),e=u(n,a,h,r,l.length),s=e.x,c=e.y,this.text(y.segmentTextFormatter(t,l)).attr("x",s).attr("y",c),a+=n}).apply(l)},a=function(t){var e;return y.svgTarget=this.append("svg")["class"]("hx-graph"),y.plotTarget=y.svgTarget.append("g")["class"]("hx-plot"),e=y.svgTarget.append("g")["class"]("hx-label"),y.svgTarget.on("mousemove","hx.plot",function(t){return function(t){var e,n,i;return n=Math.round(t.clientX-y.svgTarget.box().left),i=Math.round(t.clientY-y.svgTarget.box().top),y.useLegend&&(e=y.svgTarget.select(".hx-legend-container"),"hover"===y.legendPosition&&e.style("display",""),"auto"===y.legendPosition||"hover"===y.legendPosition)?(C=y.svgTarget.width(),l=y.svgTarget.height(),C/2>n?e.attr("transform","translate("+(C-10-e.width())+", 10)"):e.attr("transform","translate(10, 10)")):void 0}}(this)),y.svgTarget.on("pointermove","hx.plot",function(t){var e,n;return e=Math.round(t.x-m.box().left),n=Math.round(t.y-m.box().top),y.updateLabels(e,n)}),y.svgTarget.on("mouseleave","hx.plot",function(t){return function(){return t.useLegend&&"hover"===t.legendPosition?t.svgTarget.select(".hx-legend-container").style("display","none"):void 0}}(this)),y.svgTarget.on("pointerleave","hx.plot",function(t){return y.labelsView.apply([])}),y.labelsView=e.view(".hx-plot-label","g").update(function(t,e){return y.label.type(e,t)}),y.svgTarget.on("click","hx.plot",function(t){return null!=y.closestMeta?y.emit("click",{event:t,data:y.closestMeta.values,series:y.closestMeta.series}):void 0}),y.svgTarget.node()},k=function(t){return this.select(".hx-plot").view(".hx-pie-ring","g").update(_).apply(t.data),this.select(".hx-plot").view(".hx-pie-text","g").update(M).apply(y.useSegmentText?t.data:[])},m.view(".hx-graph","svg").enter(a).update(k).apply(this),
w=Number(this.svgTarget.style("width").slice(0,-2)),b=Number(this.svgTarget.style("height").slice(0,-2)),!this.useLegend)return this.svgTarget.select(".hx-legend-container").remove();switch(c=this.svgTarget.select(".hx-legend-container"),0===c.size()&&(c=this.svgTarget.append("g")["class"]("hx-legend-container")),g(c,this.data.segments||hx.flatten(this.data.map(function(t){return t.segments}))),this.legendPosition){case"top-left":return c.attr("transform","translate(10, 10)");case"bottom-right":return c.attr("transform","translate("+(C-10-c.width())+","+(l-5-c.height())+")");case"bottom-left":return c.attr("transform","translate(10, "+(l-5-c.height())+")");case"hover":return c.style("display","none");default:return c.attr("transform","translate("+(C-10-c.width())+", 10)")}},e.prototype.createLabelValues=function(t,e){return[{name:t.name,value:t.size,formatter:this.label.formatters[e.name]||this.formatter}]},e.prototype.updateLabels=function(t,e){var r,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y,b,w,k,_,S,M,C,P,T,D,A,z,L,E,N,R,O,I,H,B;if(this.useLabels&&this.label){if(N=hx.select(this.selector),B=N.width(),g=N.height(),M=this.circle.r,l=M*(1-this.innerPadding)/this.data.length+M*(1-this.innerPadding)/this.data.length*this.ringPadding/this.data.length,E=l*this.segmentPadding,v=M*this.innerPadding,C=M-v,S=M,A=C/this.data.length+C/this.data.length*this.ringPadding/this.data.length,p=this.circle.x,f=this.circle.y,M=Math.sqrt((t-p)*(t-p)+(e-f)*(e-f)),v>M||M>S)return void this.labelsView.apply([]);for(H=hx.clamp(0,this.data.length-1,Math.floor((M+this.ringPadding*A/2-v)/A)),D=this.data[H],a=Math.atan2(e-f,t-p)+.5*Math.PI-this.startAngle,0>a&&(a+=2*Math.PI),h=void 0,z=0,P=n(D.segments),I=P.total,s=P.allZero,T=D.segments,m=0,k=T.length;k>m;m++){if(L=T[m],R=i(L,I,s),r=z/I*this.totalAngle,o=(z+R)/I*this.totalAngle,O=Math.min(r,o),x=Math.max(r,o),a>O&&x>a){h=L,d=O,c=x,u=(x-O)/2+O-Math.PI/2+this.startAngle;break}z+=R}return h?(y=A*H+C/this.data.length/2+v,b=p+y*Math.cos(u),w=f+y*Math.sin(u),_={series:D,name:D.name,color:h.color||this.color,x:b,y:w,bounding:{x1:0,x2:N.width(),y1:0,y2:N.height()},values:this.createLabelValues(h,D)},this.closestMeta=_,this.labelsView.apply(_)):(this.closestMeta=void 0,this.labelsView.apply([]))}},e}(hx.EventEmitter),hx.PieChart=B;var V;V={},V.standard=function(t,e){var n,i,r,o,s,a,l,h;return n=5,hx.select(t).view(".hx-plot-label-marker","circle").update(function(t){return this.attr("cx",t.x).attr("cy",t.y).attr("r",4).attr("fill",t.color).attr("stroke","white").attr("stroke-width",3)}).apply(e),i=function(){return this.view(".hx-plot-label-box","rect").apply(1)},r=function(t,e,n){return this.view(".hx-plot-label-box","rect").update(function(t){return this.attr("width",e).attr("height",n).attr("rx",1).attr("ry",1)}).apply(t)},s=function(t,e,n){return this.view(".hx-plot-label-divider","line").update(function(t){return this.attr("x1",e).attr("y1",t).attr("x2",n).attr("y2",t)}).apply(t)},l=function(t,e,n,i){return this.view(t,"text").update(function(t){return this.text(t).attr("x",n).attr("y",i)}).apply(e),this.select(t).map(function(t){return t.getComputedTextLength()})},a=function(t,e,i){var r;return this.view(".hx-plot-label-header","text").update(function(t){return this.text(t).attr("x",e+n).attr("y",i+n)}).apply(t.name),r=this.select("text").map(function(t){return t.getComputedTextLength()}),{width:r+2*n,height:12+2*n}},h=function(t,e,i){var r,o,s,a,h,c;return h=e+n,c=i,s=0,o=0,this.view(".hx-plot-label-keys","g").update(function(t){var e;return e=l.call(this,".hx-plot-label-key",t.name,h,c+n),c+=12+2*n,o+=12+2*n,s=Math.max(e,s)}).apply(t.values),h=e+3*n+s,c=i,a=0,r=0,this.view(".hx-plot-label-values","g").update(function(t){var e;return e=l.call(this,".hx-plot-label-value",t.formatter(t.value),h,c+n),c+=12+2*n,r+=12+2*n,a=Math.max(e,a)}).apply(t.values),{width:s+a+4*n,height:Math.max(o,r)}},o=function(t){var e,o,l,c,u,d,p,f,x,g,v,m;return i.call(this),u=a.call(this,t,0,0),x=u.width,c=u.height,l=x,o=c,d=h.call(this,t,0,0+o),x=d.width,c=d.height,f=x,p=c,x=Math.max(l,f),c=o+p,r.call(this,t,x,c),e=function(){var e,i,r;for(r=[],g=e=0,i=t.values.length;i>=0?i>e:e>i;g=i>=0?++e:--e)r.push(o+g*(12+2*n));return r}(),s.call(this,e,0,x),t.bounding?(v=t.x+10+x>t.bounding.x2?t.x-x-10:Math.max(t.x+10,t.bounding.x1),m=Math.max(Math.min(t.bounding.y2-c/2,t.y),t.bounding.y1+c/2)-c/2):(v=t.x+10,m=t.y-c/2),this.attr("transform","translate("+v+", "+m+")")},hx.select(t).view(".hx-plot-label-container","g").update(o).apply(e)},hx.plot=r,hx.plot.label=V,hx.plot.arcCurve=s,hx.plot.svgCurve=w,hx.Axis=M,hx.Graph=C}(),function(){var t,e,n,i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=function(t){function e(t,n,i){this.title=t,this.setup=n,e.__super__.constructor.apply(this,arguments),this.options=hx.merge({isClosable:!0,titlebarRenderer:function(t){return hx.select(t).text(this.title)}},i),this.contentContainer=null}var n;return o(e,t),n=function(t,e){var n;return n=hx.select("body").classed("hx-modal-open",!1),n.select(".hx-modal-container").remove(),n.select(".hx-modal-shade").remove(),t.emit("hidestart"),t.emit("hide",e),t.emit("hideend")},e.prototype.show=function(t){var e,i,r,o,s,a,l;return e=hx.select("body").classed("hx-modal-open",!0),a=e.select(".hx-modal-shade"),a.empty()&&(a=e.append("div").attr("class","hx-modal-shade"),a.style("opacity",0).morph()["with"]("fadein",150).go()),o=e.select(".hx-modal-container"),o.empty()&&(o=e.append("div").attr("class","hx-modal-container")),r=o.select(".hx-modal"),r.empty()&&(r=o.append("div").attr("class","hx-modal")),l=r.append("div").attr("class","hx-modal-title"),(null==this.title||0===this.title.length)&&l.classed("hx-modal-title-empty",!0),this.options.titlebarRenderer.call(this,l.node()),this.options.isClosable&&(i=l.append("button").attr("type","button")["class"]("hx-modal-close hx-btn").on("click","hx.modal",function(t){return function(){return n(t,{cause:"button"})}}(this)),i.append("i")["class"]("fa fa-times"),this.buttonClass&&i.classed(this.buttonClass,!0),o.on("click","hx.modal",function(t){return function(e){return!r.contains(e.target)&&hx.select("body").contains(e.target)?n(t,{cause:"shade"}):void 0}}(this))),this.contentContainer=r.append("div").attr("class","hx-modal-content"),this.setup&&this.setup(this.contentContainer.node()),this.emit("show",this.contentContainer.node()),this.emit("showstart"),s=this,r.style("opacity",0).style("top","-30px").morph()["with"]("fadein",150).and(function(){return r.animate().style("top","0px",100)}).then(function(){return s.emit("showend"),"function"==typeof t?t():void 0}).go(),this},e.prototype.hide=function(){return n(this,{cause:"api"}),this},e}(hx.EventEmitter),n=function(t,e,n,i){e.forEach(function(e){return t.append("button").attr("type","button")["class"](e.classes).add(hx.detached("i")["class"](e.icon)).add(hx.detached("span").text(" "+e.text)).on("click","hx.modal",function(){return"function"==typeof i&&i(e.value),n.hide()})})},e=function(t,e){return function(n){return n=hx.select(n),n.classed("hx-background-"+t,!0),null!=e&&n.append("i")["class"]("fa "+e),n.append("span").text(this.title),this.buttonClass="hx-"+t}},i=function(i,r,o,s){var a,l;return s=hx.merge.defined({callback:void 0,buttons:[{text:"Cancel",icon:"fa fa-times",value:!1,classes:"hx-btn hx-negative"},{text:"Confirm",icon:"fa fa-check",value:!0,classes:"hx-btn hx-positive"}],isClosable:void 0,titleClass:void 0,icon:void 0},s),l=function(t){var e,i;return i=hx.select(t),r=i.append("div")["class"]("hx-modal-message").text(r),e=i.append("div")["class"]("hx-modal-buttons"),n(e,s.buttons,this,o)},a=new t(i,l,{isClosable:s.isClosable}),null!=s.titleClass&&(a.options.titlebarRenderer=e(s.titleClass,s.icon)),a.on("hide","hx.modal",function(t){return"api"!==t.cause?o():void 0}),a.show()},r=function(e,i,r,o){var s,a;return o=hx.merge.defined({isClosable:void 0,value:""}),a=function(t){var e,o,s,a;return o=[{text:"Cancel",icon:"fa fa-times",value:!1,classes:"hx-btn hx-negative"},{text:"Confirm",icon:"fa fa-check",value:!0,classes:"hx-btn hx-positive"}],s=hx.select(t),i=s.append("span")["class"]("hx-modal-message").text(i),a=s.append("input")["class"]("hx-modal-input").text(this.options.value),e=s.append("div")["class"]("hx-modal-buttons"),n(e,o,this,function(t){return r(t?a.value():t)})},s=new t(e,a,{isClosable:o.isClosable}),s.on("close","hx.modal",function(t){return"api"!==t.cause?r():void 0}),s.show()},hx.Modal=t,hx.modal={dialog:i,input:r}}(),function(){var t,e,n,i,r,o,s,a,l,h;s=function(t,e){return null!=t.options.icon&&t.options.icon.length>0&&e.append("div")["class"]("hx-notification-icon-container hx-section hx-fixed hx-no-margin").append("i")["class"]("hx-notification-icon "+t.options.icon),e.append("div")["class"]("hx-notification-text hx-section hx-no-margin").text(t.message),t.options.pinnable&&(t.domPin=e.append("div")["class"]("hx-notification-icon-container hx-notification-pin hx-section hx-fixed hx-no-margin").on("click","hx.notify",function(){return l(t)}),t.domPin.append("i").attr("class","fa fa-thumb-tack"),h(t)),e.append("div")["class"]("hx-notification-icon-container hx-notification-close hx-section hx-fixed hx-no-margin").on("click","hx.notify",function(){return t.close()}).append("i")["class"]("fa fa-times")},i=function(t){return t.currentId++},r=function(t){var e,n,i;return n=hx.select(t.selector),e=n.select(".hx-notification-container"),e.empty()&&(e=n.append("div")["class"]("hx-notification-container")),i=e.view(".hx-notification"),i.enter(function(t){return n=this.append("div"),n["class"]("hx-notification hx-group hx-horizontal "+t.options.cssclass).forEach(function(e){return s(t,n),t.trueHeight=n.style("height")}).style("opacity",0).style("height",0).style("padding-top",0).style("padding-bottom",0).style("margin-top",0).style("margin-bottom",0).morph()["with"]("expandv").and("fadein").then(function(){return n.style("height","")}).go(),n.node()}),i.exit(function(){return this.style("overflow","hidden").morph()["with"]("fadeout",100).then("collapsev",100).then(function(t){return function(){return t.remove()}}(this)).go()}),i.apply(t.notifications,function(t){return t.id})},o=function(t,e){var n;return n=t.notifications.indexOf(e),n>=0&&t.notifications.splice(n,1),r(t)},a=function(t,e){return t.timeoutId=window.setTimeout(function(e){return function(){return t.close()}}(this),1e3*e)},l=function(t){return t.pinned?t.unpin():t.pin()},h=function(t){return t.domPin.classed("hx-notification-pin-pinned",t.pinned)},t=function(){function t(t,e,n){this.manager=t,this.message=e,this.options=hx.merge({icon:void 0,cssClass:void 0,timeout:this.manager._.defaultTimeout,pinnable:!0},n),this.id=i(this.manager),this.options.timeout?(a(this,this.options.timeout),this.pinned=!1):this.pinned=!0}return t.prototype.close=function(){return o(this.manager,this),this},t.prototype.pin=function(){return this.pinned=!0,window.clearTimeout(this.timeoutId),h(this),this},t.prototype.unpin=function(){return this.pinned=!1,a(this,1),h(this),this},t}(),e=function(){function e(t){this.selector=null!=t?t:"body",this.currentId=0,this.notifications=[],hx.select(this.selector).append("div")["class"]("hx-notification-container"),this._={defaultTimeout:5}}return e.prototype.notify=function(e,n){var i;return i=new t(this,e,n),this.notifications.push(i),r(this),i},e.prototype.info=function(t,e){return null==e&&(e={}),this.notify(t,hx.merge({icon:"fa fa-info",cssclass:"hx-info"},e))},e.prototype.warning=function(t,e){return null==e&&(e={}),this.notify(t,hx.merge({icon:"fa fa-warning",cssclass:"hx-warning"},e))},e.prototype.negative=function(t,e){return null==e&&(e={}),this.notify(t,hx.merge({icon:"fa fa-exclamation-circle",cssclass:"hx-negative"},e))},e.prototype.positive=function(t,e){return null==e&&(e={}),this.notify(t,hx.merge({icon:"fa fa-check",cssclass:"hx-positive"},e))},e.prototype.loading=function(t){return this.notify(t,{icon:"hx-spinner",cssclass:"hx-loading",timeout:void 0,pinnable:!1})},e.prototype.defaultTimeout=function(t){return arguments.length>0?(this._.defaultTimeout=t||5,this):this._.defaultTimeout},e}(),hx.NotificationManager=e,n=new e,hx.notify=function(t,e){return n.notify(t,e)},hx.notify.info=function(t,e){return n.info(t,e)},hx.notify.positive=function(t,e){return n.positive(t,e)},hx.notify.warning=function(t,e){return n.warning(t,e)},hx.notify.negative=function(t,e){return n.negative(t,e)},hx.notify.loading=function(t){return n.loading(t)},hx.notify.defaultTimeout=function(t){return n.defaultTimeout.apply(n,arguments)}}(),function(){var t,e;t=function(t,e){switch(t.toLowerCase()){case"value missing":return"radio"===e?"Please select one of these options.":"Please fill in this field.";case"type mismatch":return"Please enter a valid "+e+".";default:return t}},e=function(e,n){var i,r,o,s,a,l,h,c;for(e=hx.select(e).node(),n=hx.merge.defined({showMessage:!0},n),o=[],s=l=0,h=e.children.length;h>=0?h>l:l>h;s=h>=0?++l:--l)"div"===e.children[s].nodeName.toLowerCase()&&(i=e.children[s].children[1],"input"===i.nodeName.toLowerCase()?i.checkValidity()||(c=hx.select(i).attr("type"),o.push({message:t(i.validationMessage,c),node:i,validity:i.validity})):(a=hx.select(i).select("input").node(),c=hx.select(i).select("input").attr("type"),a&&!a.checkValidity()&&o.push({message:t(a.validationMessage,c),node:i,validity:a.validity})));return n.showMessage&&o.length>0&&(r=o[0],hx.select(r.node.parentNode).insertAfter("div")["class"]("hx-form-error").append("div").insertAfter("div")["class"]("hx-form-error-text-container").append("div")["class"]("hx-form-error-text").text(r.message),hx.select(r.node).on("click","hx.form",function(t){var e;return e=hx.select(r.node.parentNode.nextElementSibling),e.classed("hx-form-error")&&e.remove(),hx.select(r.node).off("click","hx.form")})),{valid:0===o.length,errors:o}},hx.validateForm=e}(),function(){var t,e;e=function(t,e){var n;return null==e&&(e=!0),this.isMobileFriendly&&t!==this.visible?(this.visible=t,n=function(n){return t?(n.classed("hx-titlebar-mobile-hide",!1),e?n.style("height","0px").morph()["with"]("expandv",150).go():void 0):e?n.morph()["with"]("collapsev",50).then(function(){return n.classed("hx-titlebar-mobile-hide",!0)}).thenStyle("display","").go():n.classed("hx-titlebar-mobile-hide",!0)},n(hx.select(this.selector).selectAll(".hx-titlebar-menu-icons")),n(hx.select(this.selector).selectAll(".hx-titlebar-linkbar"))):void 0},t=function(){function t(t){var n,i,r;this.selector=t,hx.component.register(this.selector,this),this._={},this.isMobileFriendly=hx.select(this.selector).select(".hx-titlebar-menu-icon-mobile").size()>0,n=hx.select(this.selector).select(".hx-titlebar-linkbar").selectAll(".hx-titlebar-link").size()>0,i=hx.select("body").classed("hx-titlebar-fixed"),r=hx.select("body").classed("hx-full-screen"),this.isMobileFriendly&&(hx.select(this.selector).select(".hx-titlebar-menu-icon-mobile").on("click","hx.titlebar",function(t){return function(){return e.call(t,!t.visible,!0)}}(this)),this.visible=!0,e.call(this,!1,!1)),n&&(i||r)&&hx.select("body").classed("hx-titlebar-link-padding",!0)}return t.prototype.show=function(t){return e.call(this,!0,t)},t.prototype.hide=function(t){return e.call(this,!1,t)},t.prototype.contextClass=function(t){var e,n,i,r;if(arguments.length>0){if(null!=t)for(this._.cls=void 0,r=["hx-positive","hx-negative","hx-warning","hx-info"],n=0,i=r.length;i>n;n++)e=r[n],t===e&&(this._.cls=e),hx.select(this.selector).select(".hx-titlebar").classed(e,t===e);return this}return this._.cls},t.prototype.active=function(t){var e;return arguments.length>0?(e=hx.selectAll(".hx-titlebar-link").classed("hx-selected",!1),null!=t?(this._.active=hx.isString(t)?hx.select(t).classed("hx-selected",!0):hx.select(e.node(t)).classed("hx-selected",!0),this):void 0):this._.active},t}(),hx.TitleBar=t,hx.select(".hx-heading").size()>0&&(hx.titlebar=new hx.TitleBar(".hx-heading"))}(),function(){var t,e,n,i,r,o,s,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;i=function(t){return this._.isDiscrete?n.call(this,t):t*(this.options.max-this.options.min)+this.options.min},e=function(t){return this._.discreteValues[t]},n=function(t){var e,n,i,r,o;e=this._,r=e.discreteSpacing/2,i=e.discreteValues;for(n in i)if(o=i[n],t>=o-r&&o+r>t)return n;return t},o=function(t){var n,r,a,l,h,c,u,d;n=this._,this.emit("slidestart",this.value()),n.mouseDown=!0,n.pointerMoveHandler=function(t){return function(e){return o.call(t,e)}}(this),n.pointerUpHandler=function(t){return function(e){return s.call(t,e)}}(this),hx.select(document).on("pointermove","hx.slider",n.pointerMoveHandler),hx.select(document).on("pointerup","hx.slider",n.pointerUpHandler),n.slidableWidth="range"===this.options.type?n.container.width()-n.controlWidth:n.container.width(),t.event.preventDefault(),c=hx.clamp(0,n.container.width(),t.x-n.container.box().left)/n.slidableWidth,d={},"range"===this.options.type?(u=n.isDiscrete?e.call(this,this.values.start):this.values.start,a=n.isDiscrete?e.call(this,this.values.end):this.values.end,u=(u-this.options.min)/(this.options.max-this.options.min),a=(a-this.options.min)/(this.options.max-this.options.min),r=(a-u)/2,h=n.controlWidth/n.slidableWidth,l=c-h/2>=a-r,"end"===n.dragging||l&&"start"!==n.dragging?(n.dragging="end",c-=h,c=hx.clamp(u,1,c),d.end=i.call(this,c)):(n.dragging="start",c=hx.clamp(0,a,c),d.start=i.call(this,c))):(n.dragging="value",d.value=i.call(this,c)),this.value(d),this.emit("change",this.value())},s=function(t){var e,n;return e=this._,e.mouseDown&&(hx.select(document).off("pointermove","hx.slider",e.pointerMoveHandler),hx.select(document).off("pointerup","hx.slider",e.pointerUpHandler),e.mouseDown=!1,e.dragging=void 0,n=e.range.select(".hx-slider-active"),n.morph()["with"]("delay",100).then("fadeout",200).then(function(){return n.classed("hx-slider-active",!1),e.valueVis=!1}).go(!0)),this.emit("slideend",this.value())},r=function(){var t,n,i,r,o,s,a,l;t=this._,s=t.container.selectAll(".hx-slider-point"),s.empty()||(r=s.nodes[0].offsetHeight,s.forEach(function(t){return t.style("width",r+"px").style("margin-left",-r/2+"px")})),"range"===this.options.type?(a=t.isDiscrete?e.call(this,this.values.start):this.values.start,i=t.isDiscrete?e.call(this,this.values.end):this.values.end):(a=this.options.min,i=t.isDiscrete?e.call(this,this.values.value):this.values.value),t.isDiscrete||(a=(a-this.options.min)/(this.options.max-this.options.min),i=(i-this.options.min)/(this.options.max-this.options.min)),t.range.style("left",100*a+"%").style("width",100*(i-a)+"%"),"start"===t.dragging?(o=t.valueL,l=this.values.start):null!=t.dragging&&(o=t.valueR,l="end"===t.dragging?this.values.end:this.values.value),null!=o&&null!=l&&(t.valueVis||(t.valueVis=!0,o.classed("hx-slider-active",!0).classed("hx-slider-under",!1),this.options.renderer(this,o.node(),l),n=o.box(),o.classed("hx-slider-under",n.top-n.height<0),o.morph()["with"]("fadein",30).go(!0)),this.options.renderer(this,o.node(),l))},t=function(t){function e(t,i){var r,s,a,l,h,c,u,d,p,f,x,g;if(this.selector=t,null==i&&(i={}),e.__super__.constructor.apply(this,arguments),hx.component.register(this.selector,this),this.options=hx.merge({type:"slider",discreteValues:void 0,renderer:function(t,e,n){return hx.select(e).text(hx.format.fixed(2)(n))},min:0,max:1,step:void 0},i),this._=r={},r.isDiscrete=(null!=(d=this.options.discreteValues)?d.length:void 0)>0||null!=this.options.step,p=this,r.container=hx.select(this.selector).classed("hx-slider",!0).append("div").classed("hx-slider-inner",!0).classed("hx-slider-double","range"===this.options.type).classed("hx-slider-discrete",r.isDiscrete).on("pointerdown","hx.slider",function(t){return function(e){return o.call(t,e)}}(this)),r.range=r.container.append("div")["class"]("hx-slider-range"),null==r.controlWidth&&(r.controlWidth=Number(window.getComputedStyle(r.range.node(),":after").width.replace("px",""))),r.valueL=r.range.append("div")["class"]("hx-slider-value").style("left",0),r.valueR=r.range.append("div")["class"]("hx-slider-value").style("left","100%"),r.slidableWidth="range"===this.options.type?r.container.width()-r.controlWidth:r.container.width(),null!=this.options.step){for(x=[],s=this.options.min;s<=this.options.max;)x.push(s),s+=this.options.step;this.options.max=1,this.options.min=0,this.discreteValues(x,!1)}else r.isDiscrete&&this.discreteValues(this.options.discreteValues,!1);l=this.options.max-this.options.min,u=.25*l+this.options.min,c=.5*l+this.options.min,h=.75*l+this.options.min,"range"===this.options.type?(f=null!=this.options.start?this.options.start:r.isDiscrete?n.call(this,u):u,a=null!=this.options.end?this.options.end:r.isDiscrete?n.call(this,h):h,this.values={start:f,end:a}):(g=null!=this.options.end?this.options.end:r.isDiscrete?n.call(this,c):c,this.values={value:g}),this.values.value?this.value(this.values.value):this.value({start:this.values.start,end:this.values.end})}return a(e,t),e.prototype.discreteValues=function(t,e){var n,i,o,s,a,l,h;if(null==e&&(e=!0),null!=t){for(this.options.discreteValues=t,n=this._,n.isDiscrete=(null!=(l=this.options.discreteValues)?l.length:void 0)>0||null!=this.options.step,n.discreteValues={},n.discreteSpacing=1/(t.length-1),n.container.selectAll(".hx-slider-point").remove(),i=o=0,h=t.length;h>=0?h>o:o>h;i=h>=0?++o:--o)a=i*n.discreteSpacing,n.discreteValues[t[i]]=a,("range"===this.options.type||i>0)&&(s=n.range.insertBefore("div")["class"]("hx-slider-point").style("left",100*a+"%"));return e&&r.call(this),this}return this.options.discreteValues},e.prototype.max=function(t){return arguments.length>0?(this.options.max=t,r.call(this),this):this.options.max},e.prototype.step=function(t){return arguments.length>0?(this.options.step=t,r.call(this),this):this.options.step},e.prototype.min=function(t){return arguments.length>0?(this.options.min=t,r.call(this),this):this.options.min},e.prototype.value=function(t){var e;return arguments.length>0?(e=function(t){return function(e){return t._.isDiscrete?e:hx.clamp(t.options.min,t.options.max,e)}}(this),"range"===this.options.type?(null!=t.start&&(this.values.start=e(t.start)),null!=t.end&&(this.values.end=e(t.end))):hx.isObject(t)?null!=t.value&&(this.values.value=e(t.value)):null!=t&&(this.values.value=e(t)),r.call(this),this):"range"===this.options.type?{start:this.values.start,end:this.values.end}:this.values.value},e.prototype.renderer=function(t){return null!=t?(this.options.renderer=t,this):this.options.renderer},e}(hx.EventEmitter),hx.Slider=t}(),function(){var t,e,n,i,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=function(t,e){var n,i,r,o,s,a,l,h,c;return c=this,n=this._,null==n.prevTerm&&(n.prevTerm=""),i=n.data.get(t),t.length>=n.prevTerm.length&&null==i&&(i=n.data.get(n.prevTerm)),null==i&&(i=n.data.get("")),n.prevTerm=t,s="external"===this.options.matchType?i:0!==t.length||this.options.showAll?this.options.filter(i,t):[],o=i.length===s.length&&i.length>0,!this.options.showOtherResults||e||o||(l=s.length>0?s:[{unselectable:!0,text:c.options.noResultsMessage}],a=[{unselectable:!0,heading:!0,text:c.options.otherResultsMessage}],h=0===s.length?i:(r=i.filter(function(t){return s.some(function(e){return e===t})?!1:!0}),null==this.options.filterOptions.sort||this.options.filterOptions.sort?r=null!=this.options.inputMap?r.sort(function(t,e){return t=c.options.inputMap(t),e=c.options.inputMap(e),hx.sort.compare(t,e)}):r.sort(hx.sort.compare):void 0,r),h=a.concat(h.sort(function(t,e){return!t.disabled&&e.disabled?-1:t.disabled&&!e.disabled?1:hx.sort.compare(t.full,e.full)})),s=l.concat(h)),s},e=function(t,i,r){var o,s,a,l,h,c;return h=this,o=this._,void(null==o.callback||i?(o.menu.cursorPos=-1,s=r?void 0:"external"===this.options.matchType?o.data.get(t):n.call(h,t),l={unselectable:!0,text:""},o.menu.items([]),a=[],c=!1,null==s?l.text="Loading...":t.length<this.options.minLength?l.text="Please enter "+this.options.minLength+" or more characters":(t.length>0||this.options.showAll)&&0===s.length?this.options.trimTrailingSpaces&&o.input.value().lastIndexOf(" ")===o.input.value().length-1?c=!0:this.options.noResultsMessage.length>0&&null!=this.options.noResultsMessage&&(l.text=this.options.noResultsMessage):t.length>=this.options.minLength&&s.length>0&&(a=a.concat(s)),l.text.length>0&&(a=[l].concat(a)),a.length>0?(o.menu.items(a),o.menu.dropdown.isOpen()?o.menu.dropdown.dropdownContent(o.menu.dropdown.dropdown.node()):o.menu.dropdown.show()):o.menu.hide(),c&&(o.input.value(o.input.value().substring(0,o.input.value().length-1)),e.call(h,o.input.value(),i,r))):t.length<this.options.minLength||!this.options.showAll&&0===t.length?(o.data.set(t,[]),e.call(h,t,!0)):(e.call(h,t,!0,!0),o.currentSearch=t,o.data.get(t)?e.call(h,t,!0):(o.data.set(t,!0),o.callback.call(h,t,function(n){return o.cleanUp||(o.data.set(t,n),o.currentSearch!==t)?void 0:e.call(h,t,!0)}))))},i=function(){return this._.cleanUp=!1,e.call(this,this._.input.value()||"")},t=function(t){function o(t,i,r){var s,a,l,h,c,u,d,p,f;this.selector=t,this.data=i,this.options=null!=r?r:{},o.__super__.constructor.apply(this,arguments),this._=s={},hx.component.register(this.selector,this),s.ignoreMatch=!1,s.ignoreNextFocus=!1,p=this,s.data=new hx.Map,hx.isFunction(this.data)?s.callback=this.data:s.data.set("",this.data),hx.isArray(this.data)||hx.isFunction(this.data)?(this.options=hx.merge({minLength:0,showAll:!0,trimTrailingSpaces:!1,mustMatch:!1,inputMap:void 0,renderer:void 0,matchType:"contains",placeholder:void 0,filter:void 0,filterOptions:void 0,showOtherResults:!1,allowTabCompletion:!0,noResultsMessage:"No results found",otherResultsMessage:"Other Results"},this.options),null!=this.options.inputMap&&(a={searchValues:function(t){return[p.options.inputMap(t)]}}),this.options.filterOptions=hx.merge({},a,this.options.filterOptions),null==(l=this.options).filter&&(l.filter=function(t,e){return hx.filter[p.options.matchType](t,e,p.options.filterOptions).sort(function(t,e){return!t.disabled&&e.disabled?-1:t.disabled&&!e.disabled?1:hx.sort.compare(t,e)})}),null==(h=this.options).renderer&&(h.renderer=null!=this.options.inputMap?function(t,e){return hx.select(t).text(p.options.inputMap(e))}:function(t,e){return hx.select(t).text(e)}),null==(c=this.options).placeholder&&(c.placeholder=this.options.minLength>0?"Min length "+this.options.minLength+" characters":void 0),u=hx.select(this.selector),d=new hx.Menu(this.selector,{ddClass:"hx-autocomplete-dropdown"}),d.pipe(this,"",["highlight"]),d.dropdown.pipe(this,"dropdown"),hx.select(this.selector).off("click","hx.menu"),d.on("input","hx.autocomplete",function(t){return p.options.allowTabCompletion&&9===(t.which||t.keyCode)?t.preventDefault():void 0}),s.setInputValue=null!=this.options.inputMap?function(t){return u.value(p.options.inputMap(t)),p.emit("change",t)}:function(t){return u.value(t),p.emit("change",t)},null!=this.options.placeholder&&u.attr("placeholder",this.options.placeholder),u.on("focus","hx.autocomplete",function(t){return s.ignoreNextFocus?void 0:(s.cleanUp=!1,p.show())}),u.on("blur","hx.autocomplete",function(t){return null!=t.relatedTarget&&p.hide(),s.ignoreNextFocus=!1}),f=void 0,u.on("input","hx.autocomplete",function(){return s.cleanUp=!1,clearTimeout(f),s.initialValue=u.value(),f=setTimeout(function(){return u.value()!==s.prevTerm?e.call(p,u.value()||""):void 0},200)}),d.renderer(function(t,e){var n;return n=hx.select(t),n.style("font-weight",""),e.unselectable||e.heading?(n.text(e.text).off(),e.heading?n.style("font-weight","600"):void 0):p.options.renderer(t,e)}),d.on("change","hx.autocomplete",function(t){var e;if(e=null!=t?t.content:void 0,null!=e){if(!(null!=e?e.unselectable:void 0)&&!(null!=e?e.heading:void 0)&&!(null!=e?e.disabled:void 0))if("tab"===t.eventType){if(p.options.allowTabCompletion)return s.setInputValue(e),s.ignoreMatch=!0,p.hide()}else{if(null==s.initialValue&&d.cursorPos>-1)return s.initialValue=u.value();if(-1===d.cursorPos&&null!=s.initialValue)return u.value(s.initialValue);if(s.setInputValue(e),"click"===t.eventType||"enter"===t.eventType)return s.ignoreMatch=!0,p.hide(),s.ignoreNextFocus=!0}}else if("enter"===t.eventType)return s.ignoreMatch=!1,p.hide(),s.ignoreNextFocus=!0}),d.on("dropdown.show","hx.autocomplete",function(){return s.initialValue=u.value(),d.dropdown.useScroll=!0}),s.checkValidity=function(){var t;return s.cleanUp=!0,s.ignoreMatch||p.options.mustMatch&&u.value().length>0&&(t="external"===p.options.matchType?s.data.get(u.value()):n.call(p,u.value(),!0),t!==!0&&(null!=t?t.length:void 0)>0?(t=null!=t?t.filter(function(t){return t=null!=p.options.inputMap?p.options.inputMap(t):t,t.toLowerCase()===u.value().toLowerCase()}):void 0,(null!=t?t.length:void 0)>0?s.setInputValue(t[0]):u.value("")):u.value("")),s.ignoreMatch=!1,p.clearCache(),p.emit("hide",u.value())},d.on("dropdown.hide","hx.autocomplete",function(){s.checkValidity()}),d.on("click","hx.autocomplete",function(){return s.ignoreMatch=!0}),s.menu=d,s.input=u):hx.consoleWarning("AutoComplete - ",this.selector,": data set incorrectly - you supplied: ",this.data," but should have been an array of items or a function")}return r(o,t),o.prototype.clearCache=function(){return this._.data=new hx.Map,null==this.data||hx.isFunction(this.data)||this._.data.set("",this.data),this},o.prototype.show=function(){return this._.ignoreNextFocus=!1,i.call(this),this},o.prototype.value=function(t){return arguments.length>0?(this._.setInputValue(t),this._.checkValidity(),this):this._.input.value()},o.prototype.hide=function(){var t;return t=this._,t.ignoreNextFocus=!1,t.menu.dropdown.isOpen()&&(t.menu.hide(),t.prevTerm=void 0,t.cleanUp=!0),this},o}(hx.EventEmitter),hx.AutoComplete=t}(),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(e){var n;return n=new t(this.x,this.y),null!==e&&(isNaN(e.x)||(n.x+=e.x),isNaN(e.y)||(n.y+=e.y)),n},t.prototype.subtract=function(e){var n;return n=new t(this.x,this.y),null!==e&&(isNaN(e.x)||(n.x-=e.x),isNaN(e.y)||(n.y-=e.y)),n},t.prototype.min=function(e){var n;return n=new t(this.x,this.y),null!==e&&(!isNaN(e.x)&&this.x>e.x&&(n.x=e.x),!isNaN(e.y)&&this.y>e.y&&(n.y=e.y)),n},t.prototype.max=function(e){var n;return n=new t(this.x,this.y),null!==e&&(!isNaN(e.x)&&this.x<e.x&&(n.x=e.x),!isNaN(e.y)&&this.y<e.y&&(n.y=e.y)),n},t.prototype.bound=function(t,e){var n;return n=this.max(t),n.min(e)},t.prototype.check=function(){var e;return e=new t(this.x,this.y),isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0),e},t.prototype.apply=function(t){return isNaN(this.x)||t.style("left",this.x+"px"),isNaN(this.y)?void 0:t.style("top",this.y+"px")},t}(),t=function(t){function i(t,n){var r,o;i.__super__.constructor.apply(this,arguments),this.options=hx.merge.defined({startColor:"#000",showInputs:0,align:"lblt"},n),hx.component.register(t,this),this._={},r=this._,o=function(t){return function(n){var i,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y,b,w,k,_,S,M,C,P,T,D,A,z,L,E,N,R,O,I,H,B,V,F,W,Y,j,q,X,Z,U,G,K,J,$,Q,tt,et;return a=function(t){return t=t?t:window.event,t.stopPropogation&&t.stopPropogation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=t.cancel=!0,t.returnValue=!1,!1},m=function(t,e,n){return n?t.subtract(e):t.add(e)},k=function(t){var i,r;return t=t?t:window.event,isNaN(t.layerX)&&t.offsetX?i=new e(t.offsetX,t.offsetY):(r=t.touches||t.targetTouches)?(n=hx.select(r[0].target).box(),i=new e(r[0].pageX-n.left-window.scrollX,r[0].pageY-n.top-window.scrollY)):i=new e(t.layerX,t.layerY),m(i,B,!0)},i=function(t){
var n;return t=t?t:window.event,isNaN(window.scrollX)&&t.clientX?new e(t.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,t.clientY+document.documentElement.scrollTop+document.body.scrollTop):(n=t.touches||t.targetTouches)?new e(n[0].clientX+window.scrollX,n[0].clientY+window.scrollY):new e(t.clientX+window.scrollX,t.clientY+window.scrollY)},w=function(t){return t=t?t:window.event,t.target?t.target:t.srcElement},b=function(){return t.options.showInputs&&et.style("background",r.currentColor.toString()),t.emit("changeend",r.currentColor)},g=function(n){var i,o;return t.options.showInputs&&(T.value(r.currentColor.toString().toUpperCase()),W.value(r.currentColor.r),S.value(r.currentColor.g),s.value(r.currentColor.b),z.value(Math.round(360*r.currentColor.h)),q.value(Math.round(100*r.currentColor.s)),N.value(Math.round(100*r.currentColor.l)),V.style("background",r.currentColor.toString())),("slider"===n||"box"===n)&&(i=hx.color().setHSL([r.currentColor.h,1,.5]),M.style("background-color",i.toString())),"box"===n&&($.style("top",C-r.currentColor.h*C-J.y+"px"),o=new e(r.currentColor.s*C,(1-r.currentColor.l)*C),o=m(o,d,!0),o.apply(p),b()),t.emit("change",r.currentColor)},P=function(t){return hx.color.isColorString(T.value())?(r.currentColor=hx.color(T.value()),g("box")):void 0},F=function(t){return r.currentColor.setRGB([parseInt(W.value())||0,r.currentColor.g,r.currentColor.b]),g("box")},_=function(t){return r.currentColor.setRGB([r.currentColor.r,parseInt(S.value())||0,r.currentColor.b]),g("box")},o=function(t){return r.currentColor.setRGB([r.currentColor.r,r.currentColor.g,parseInt(s.value())||0]),g("box")},A=function(t){return r.currentColor.setHSL([parseFloat(z.value())||0,r.currentColor.s,r.currentColor.l]),g("box")},j=function(t){return r.currentColor.setHSL([r.currentColor.h,parseFloat(q.value())/100||0,r.currentColor.l]),g("box")},E=function(t){return r.currentColor.setHSL([r.currentColor.h,r.currentColor.s,parseFloat(N.value())/100||0]),g("box")},K=function(t,e){return t=m(t,J,!1),r.currentColor.setHSL([(C-t.y)/C,r.currentColor.s,r.currentColor.l]),g("slider")},u=function(t,e){return t=m(t,d,!1),r.currentColor.setHSL([r.currentColor.h,t.x/C,1-t.y/C]),g("circle")},Z=function(t,e){var n;return n=k(t),w(t)===e.node()&&(n.y+=parseInt(e.style("top"))),n=m(n,J,!0),n=n.bound(tt,Q),n.apply(e),K(n)},l=function(t,e){var n;return n=k(t),w(t)===e.node()&&(n.x+=parseInt(e.style("left")),n.y+=parseInt(e.style("top"))),n=m(n,d,!0),n=n.bound(x,f),n.apply(e),u(n)},y=function(t,n,r,o,s,l,h){var c,u,d,p,f,x,g,v,m,y,b,w;return d=y=m=b=p=null,null!==r&&null!==o&&(w=r.min(o),o=r.max(o),r=w),x=function(n){return n=n.event,m||!b||p?void 0:(m=!0,null!==s&&s(n,t),d=i(n),y=new e(parseInt(t.style("left")),parseInt(t.style("top"))),y=y.check(),hx.select(document).on("pointermove","hx.color-picker",f),hx.select(document).on("pointerup","hx.color-picker",v))},f=function(e){var n;return e=e.event,m&&!p?(n=i(e),n=n.add(y).subtract(d),n=n.bound(r,o),n.apply(t),null!==l&&l(n,t),a(e)):void 0},v=function(t){return g(),t=t.event,a(t)},g=function(){return!m||p?!0:(hx.select(document).off("pointermove","hx.color-picker",f),hx.select(document).off("pointerup","hx.color-picker",v),d=y=null,null!==h&&h(t),m=!1)},c=function(){return b||p?void 0:(b=!0,n.on("pointerdown","hx.color-picker",x))},u=function(){return b&&!p?(n.off("pointerdown","hx.color-picker",x),stopCurrentDragging&&m?g():void 0):void 0},c()},O=hx.select(n).append("div")["class"]("hx-colorpicker"),H=O.append("div")["class"]("hx-colorpicker-inner"),I=H.append("div")["class"]("hx-colorpicker-fields"),M=I.append("div")["class"]("hx-colorpicker-grid"),p=M.append("div")["class"]("hx-colorpicker-picker"),X=I.append("div")["class"]("hx-colorpicker-slider"),$=X.append("div")["class"]("hx-colorpicker-picker"),t.options.showInputs&&(L=H.append("div")["class"]("hx-colorpicker-inputs"),v=L.append("div")["class"]("hx-colorpicker-input-group"),V=v.append("div")["class"]("hx-colorpicker-quick-color"),et=v.append("div")["class"]("hx-colorpicker-static-color"),R=function(t,e,n){return t.append("div")["class"]("hx-colorpicker-input").append("label").attr("for",e).text(n).insertAfter("input").attr("name",e).attr("size",7).attr("maxlength",3)},T=R(L,"hex","Hex:"),Y=L.append("div")["class"]("hx-colorpicker-input-group"),W=R(Y,"red","R:"),S=R(Y,"green","G:"),s=R(Y,"blue","B:"),D=L.append("div")["class"]("hx-colorpicker-input-group"),z=R(D,"hue","H:"),q=R(D,"saturation","S:"),N=R(D,"lightness","L:")),t.options.showInputs&&(T.on("change","hx.color-picker",P),W.on("change","hx.color-picker",F),S.on("change","hx.color-picker",_),s.on("change","hx.color-picker",o),z.on("change","hx.color-picker",A),q.on("change","hx.color-picker",j),N.on("change","hx.color-picker",E),V.style("background",r.currentColor.toString()),et.style("background",r.currentColor.toString())),G=$.node().offsetHeight,c=p.node().offsetHeight,C=M.node().offsetHeight-2,tt=new e(0,-G/2),Q=new e(0,C-G/2),x=new e(-(c/2),-(c/2)),f=new e(C-c/2,C-c/2),B=new e(navigator.userAgent.indexOf("Firefox")>=0?1:0,navigator.userAgent.indexOf("Firefox")>=0?1:0),d=new e(c/2,c/2),J=new e(0,G/2),U=h="",U=new y($,X,tt,Q,Z,K,b),h=new y(p,M,x,f,l,u,b),g("box")}}(this),this.dropdown=new hx.Dropdown(t,o,{align:this.options.align}),this.value(this.options.startColor),this.dropdown.pipe(this,"dropdown")}return n(i,t),i.prototype.value=function(t){var e;return e=this._,null!=t?(e.currentColor="string"==typeof t?hx.color(t):t,this.dropdown.isOpen()&&(this.dropdown.hide(),this.dropdown.show()),this):e.currentColor.toString()},i}(hx.EventEmitter),hx.ColorPicker=t}(),function(){var t;t=function(){function t(t,n,i){this.domainMin=null!=t?t:0,this.domainMax=null!=n?n:10,this.rangeArr=i,this.rangeArr=this.rangeArr.sort(function(t,e){return t.val-e.val}),this.rangeMin=this.rangeArr[0].val,this.rangeMax=this.rangeArr[this.rangeArr.length-1].val,this.factor=e(this.domainMin,this.domainMax,this.rangeMin,this.rangeMax)}var e;return e=function(t,e,n,i){var r;return r=e-t,0!==r?(i-n)/r:1},t.prototype.apply=function(t){var e,n,i,r,o,s,a,l,h;switch(r=this.rangeMin+(t-this.domainMin)*this.factor,!1){case!(r<this.rangeMin):e=this.rangeArr[0].color;break;case!(r>this.rangeMax):e=this.rangeArr[this.rangeArr.length-1].color;break;default:for(n=i=0,h=this.rangeArr.length-1;h>i;n=i+=1)if(r>=this.rangeArr[n].val&&r<=this.rangeArr[n+1].val){a=n+1;break}o=r-this.rangeArr[a-1].val,l=this.rangeArr[a].val-this.rangeArr[a-1].val,s=hx.clamp(0,1,o/l),e=hx.color(this.rangeArr[a-1].color).mix(hx.color(this.rangeArr[a].color),s)}return e.toString()},t.prototype.domain=function(t,n){return this.domainMin=t,this.domainMax=n,this.factor=e(this.domainMin,this.domainMax,this.rangeMin,this.rangeMax),this},t.prototype.range=function(t){return this.rangeArr=t,this.factor=e(this.domainMin,this.domainMax,this.rangeMin,this.rangeMax),this},t}(),hx.ColorScale=t}(),function(){var t;t=function(){function t(t,e){var n,i;this.selector=t,hx.component.register(this.selector,this),n=this,this.options=hx.merge.defined({renderer:function(t,e){return hx.select(t).text(e)},items:[],separator:"/"},e),i=function(t,e,i){return i%2===0?(this["class"]("hx-crumbtrail-node"),n.options.renderer(e,t)):this["class"]("hx-crumbtrail-separator").html(n.options.separator).node()},this.view=hx.select(this.selector).view("span","span").update(i),null!=this.options.items&&this.options.items.length>0&&this.items(this.options.items)}return t.prototype.renderer=function(t){return null!=t?(this.options.renderer=t,this):this.options.renderer},t.prototype.items=function(t){return null!=t?(this.options.items=hx.flatten(t.map(function(t){return[t,0]})).slice(0,-1),this.view.apply(this.options.items),this):this.options.items},t}(),hx.Crumbtrail=t}(),function(){var t,e,n,i,r,o,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=function(){var t,e,n,i;return e=hx.select(this.selection.node().parentNode),i=[],n=-1,t=!0,e.selectAll(".hx-widget").forEach(function(e){var r;return r=e.box(),e.classed("hx-widget-current")&&(t=!1),i.push({index:n+=1,x1:r.left,x2:r.left+r.width,y1:r.top,y2:r.top+r.height,width:r.width,node:e,before:t})}),i},o=function(t){var e,o;return e=this._,o=this,t.event.preventDefault(),e.dragging?i.call(this,t):t.event.which<2?(hx.select(document).on("pointermove","hx.dashboard",function(t){return n.call(o,t)}),hx.select(document).on("pointerup","hx.dashboard",function(t){return i.call(o,t)}),e.dragging=!0,e.origPageYOffset=window.pageYOffset,e.origPageXOffset=window.pageXOffset,this.selection.classed("hx-widget-current",!0),e.grid=r.call(this),e.origWidth=this.selection.style("width").replace("px",""),e.origHeight=this.selection.style("height").replace("px",""),e.placeholder=this.selection.insertAfter("div")["class"]("hx-widget-placeholder hx-group hx-vertical"),e.placeholder.style("min-height",e.origHeight+"px").append("div"),this.selection.classed("hx-widget-drag",!0).style("width",e.origWidth+"px").style("left","0px").style("top","0px"),e.placeholderBox=e.placeholder.box(),e.controlBox=this.dragControl.box(),e.selectionBox=this.selection.box(),e.parentBox=hx.select(this.selection.node().parentNode).box(),n.call(this,t),e.currentPos=-1,this.emit("dragstart")):void 0},n=function(t){var e,n,i,r,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y;if(e=this._,e.dragging){for(t.event.preventDefault(),x=0,e.resizeOnDrag&&(this.selection.style("width",e.placeholderBox.width+"px"),x=e.placeholderBox.width-e.origWidth),i=e.controlBox.left+e.controlBox.width/2,r=e.controlBox.top+e.controlBox.height/2,p=e.parentBox.left-e.selectionBox.left,f=e.parentBox.top-e.selectionBox.top,u=window.pageXOffset-e.origPageXOffset,d=window.pageYOffset-e.origPageYOffset,v=t.x-p-i+u-x,y=t.y-f-r+d,this.selection.style("left",v+"px"),this.selection.style("top",y+"px"),g=t.x+u,m=t.y+d,h=e.grid,c=[],o=0,l=h.length;l>o;o++){if(n=h[o],s=g>=n.x1&&g<=n.x2,a=m>=n.y1&&m<=n.y2,s&&a){e.currentPos!==n.index&&e.currentPos>-1&&(n.before?n.node.insertBefore(e.placeholder):n.node.insertAfter(e.placeholder),e.placeholderBox=e.placeholder.box(),this.emit("drag")),e.currentPos=n.index;break}c.push(void 0)}return c}},i=function(t){var e;return e=this._,e.dragging?(hx.select(document).off("pointermove","hx.dashboard"),hx.select(document).off("pointerup","hx.dashboard"),t.event.preventDefault(),e.dragging=!1,e.placeholder.insertAfter(this.selection),e.placeholder.remove(),this.selection.style("top",""),this.selection.style("left",""),this.selection.style("width",""),this.selection.classed("hx-widget-drag",!1),this.selection.classed("hx-widget-current",!1),this.emit("dragend")):void 0},t=function(){function t(t){hx.component.register(t,this),this.selection=hx.select(t).classed("hx-layout",!0).classed("hx-group",!0).classed("hx-horizontal",!0).classed("hx-dashboard",!0)}return t.prototype.createWidget=function(t){return new e(this.selection.append("div").node(),t)},t.prototype.order=function(t){var e,n,i,r,o,s,a,l;if(l=this.selection.selectAll(".hx-widget").nodes,e=l.map(function(t){return hx.component(t).id}),!l.some(function(t){return!hx.component(t).id})){if(arguments.length>0){if(t.slice(0).sort().join("")===e.sort().join("")){for(n=0,o=t.length;o>n;n++)for(i=t[n],r=0,s=l.length;s>r;r++)if(a=l[r],hx.component(a).id===i){this.selection.append(a);break}}else hx.consoleWarning("Dashboard.order(order): Incorrect value(s) specified for order array","The widgets in the dashboard does not match the widgets in the order array.","\nOrder: ",t,"\nWidgets: ",e);return this}return e}hx.consoleWarning("Dashboard.order: Id's must be specified for every element","Some widgets in the dashboard were not created with an id.","Every widget must have an id to enable sorting.")},t}(),e=function(t){function e(t,n){var i,r,s,a;e.__super__.constructor.apply(this,arguments),a=this,i=this._={},this.selection=hx.select(t),hx.component.register(t,this),n=hx.merge.defined({draggable:!1,resizeOnDrag:!0,showDragControl:!1,showMenu:!1,height:void 0,width:"500px",id:void 0,title:""},n),this.selection["class"]("hx-widget hx-group hx-vertical").style("-webkit-flex-basis",n.width).style("-ms-flex-preferred-size",n.width).style("-o-flex-basis",n.width).style("flex-basis",n.width),n.id&&(this.id=n.id),s=this.selection.append("div")["class"]("hx-widget-heading hx-section hx-fixed"),s.append("span").text(n.title),this.menuButton=s.append("button")["class"]("hx-btn hx-btn-invisible"),this.menuButton.append("i")["class"]("fa fa-bars"),this.body=this.selection.append("div")["class"]("hx-widget-body-wrapper hx-section").append("div")["class"]("hx-widget-body").style("height",n.height?n.height:""),this.menu=new hx.Menu(this.menuButton.node(),{align:"rbrt"}),this.menu.renderer(function(t,e){var n;return n=hx.select(t).classed("hx-widget-menu-item",!0),n.append("i")["class"]("fa "+e.icon),n.append("span").text(e.name)}),this.showMenu(n.showMenu),i.draggable=!1,(n.draggable||n.showDragControl)&&(i.draggable=!0,i.resizeOnDrag=n.resizeOnDrag||!1,this.dragControl=s.append("button")["class"]("hx-btn hx-btn-invisible hx-drag-control"),this.dragControl.append("i")["class"]("fa fa-arrows"),r="hx.dashboard."+hx.randomId(),this.dragControl.on("pointerdown","hx.dashboard",function(t){return o.call(a,t)}),this.showDragControl(n.showDragControl))}return s(e,t),e.prototype.remove=function(t){return this.selection.style("max-width",this.selection.style("width")).morph()["with"]("fadeout").thenStyle("max-width","0px").andStyle("height","0px").then(function(t){return function(){return t.selection.remove()}}(this)).then(function(){return t()}).go(),this},e.prototype.title=function(t){var e;return e=this.selection.select(".hx-widget-heading").select("span"),arguments.length>0?(e.text(t),this):e.text()},e.prototype.showMenu=function(t){return arguments.length>0?(this._.menuVisible=t,this.menuButton.style("display",t?void 0:"none"),this._.dragVisible&&this.dragControl.style("right",this._.menuVisible?this.menuButton.width()+"px":void 0),this):this._.menuVisible},e.prototype.showDragControl=function(t){return arguments.length>0?(this._.draggable&&(this._.dragVisible=t,this.dragControl.style("display",t?void 0:"none"),this.dragControl.style("right",this._.menuVisible?this.menuButton.width()+"px":void 0)),this):this._.dragVisible},e}(hx.EventEmitter),hx.Dashboard=t}(),function(){var t,e,n,i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=999,e=480,t=function(t){function i(t,n){var r,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y,b,w,k,_,S;i.__super__.constructor.apply(this,arguments),hx.component.register(t,this),y=hx.merge({allowHeaderWrap:!1,compact:"auto",displayMode:"paginate",feed:void 0,filter:void 0,filterEnabled:!0,noDataMessage:"No Data",pageSize:15,pageSizeOptions:void 0,retainHorizontalScrollOnRender:!0,retainVerticalScrollOnRender:!1,selectEnabled:!1,singleSelection:!1,sort:void 0,sortEnabled:!0,rowIDLookup:function(t){return t.id},rowEnabledLookup:function(t){return!t.disabled},rowSelectableLookup:function(t){return!0},rowCollapsibleLookup:function(t){return!1},collapsibleRenderer:void 0,cellRenderer:function(t,e,n){return hx.select(t).text(e)},headerCellRenderer:function(t,e,n){return hx.select(t).text(e.name)},columns:{}},n),b=hx.select(t).classed("hx-data-table",!0),r=b.append("div")["class"]("hx-data-table-content"),S=b.append("div")["class"]("hx-data-table-status-bar"),s=b.append("div")["class"]("hx-data-table-footer"),y.pageSize=Math.min(y.pageSize,1e3),a=hx.debounce(200,function(t){return function(){return t.filter(o.value(),void 0,"user")}}(this)),o=s.append("input")["class"]("hx-data-table-filter-control").attr("placeholder","filter").classed("hx-data-table-filter-visible",y.filterEnabled).on("input","hx.data-table",a),b.append("div")["class"]("hx-data-table-loading").append("div")["class"]("hx-data-table-loading-inner").append("div")["class"]("hx-spinner").insertAfter("span").text(" Loading"),S.append("span")["class"]("hx-data-table-status-bar-text").insertAfter("span")["class"]("hx-data-table-status-bar-clear").text(" (clear selection)").on("click","hx.data-table",function(t){return function(){return t._.selectedRows.clear(),b.select(".hx-data-table-content").selectAll(".hx-data-table-row-selected").classed("hx-data-table-row-selected",!1),t.updateSelected(),t.emit("selectedrowsclear")}}(this)),_=s.append("div")["class"]("hx-data-table-sort-control"),_.append("span").text("Sort By: "),w=new hx.Picker(_.append("button")["class"]("hx-btn hx-btn-invisible").node()),k=new hx.ButtonGroup(_.append("div").node(),{items:["asc","desc"]}),w.on("change",function(t){return function(e){return"user"===e.cause?(k.value("asc"),t.sort({column:w.value().value,direction:null!=w.value().value?k.value().toLowerCase():void 0})):void 0}}(this)),k.on("change",function(t){return function(e){return"user"===e.cause?t.sort({column:w.value().value,direction:e.value}):void 0}}(this)),s.append("div")["class"]("hx-data-table-footer-spacer"),v=s.append("div")["class"]("hx-data-table-pagination-block"),c=v.append("div")["class"]("hx-data-table-paginator"),d=c.append("button")["class"]("hx-data-table-pagination-picker hx-btn hx-btn-invisible").node(),l=new hx.Picker(d,{dropdownOptions:{align:"rbrt"}}).on("change","hx.data-table",function(t){return function(e){return"user"===e.cause?t.page(e.value,void 0,e.cause):void 0}}(this)),p=c.append("span")["class"]("hx-data-table-paginator-total-rows"),h=c.append("button")["class"]("hx-data-table-paginator-back hx-btn hx-btn-invisible"),h.append("i")["class"]("fa fa-chevron-left"),h.on("click","hx.data-table",function(t){return function(){return h.classed("hx-data-table-btn-disabled")?void 0:t.page(t.page()-1)}}(this)),u=c.append("button")["class"]("hx-data-table-paginator-forward hx-btn hx-btn-invisible"),u.append("i")["class"]("fa fa-chevron-right"),u.on("click","hx.data-table",function(t){return function(){return u.classed("hx-data-table-btn-disabled")?void 0:t.page(t.page()+1)}}(this)),f=v.append("div")["class"]("hx-data-table-page-size"),f.append("span").text("Rows per page: "),x=f.append("button")["class"]("hx-data-table-page-size-picker hx-btn hx-btn-invisible").node(),g=new hx.Picker(x,{dropdownOptions:{align:"rbrt"}}).on("change","hx.data-table",function(t){return function(e){return"user"===e.cause?(t.pageSize(e.value.value,void 0,"user"),t.page(1,void 0,"user")):void 0}}(this)),this._={selection:b,options:y,page:1,pagePicker:l,pageSizePicker:g,sortColPicker:w,sortDirPicker:k,selectedRows:new hx.Set,expandedRows:new hx.Set,renderedCollapsibles:{},compactState:"auto"===y.compact&&b.width()<e||y.compact===!0},b.on("resize","hx.data-table",function(t){return function(){var n;return n="auto"===t.compact()&&b.width()<e||t.compact()===!0,b.classed("hx-data-table-compact",n),t._.compactState!==n?(t._.compactState=n,t.emit("compactchange",{value:t.compact(),state:n,cause:"user"})):void 0}}(this)),m=hx.randomId(),hx.select("body").on("keydown","hx.data-table.shift."+m,function(t){return function(e){return e.shiftKey&&t.selectEnabled()?b.classed("hx-data-table-disable-text-selection",!0):void 0}}(this)),hx.select("body").on("keyup","hx.data-table.shift."+m,function(t){return function(e){return!e.shiftKey&&t.selectEnabled()?b.classed("hx-data-table-disable-text-selection",!1):void 0}}(this))}var r,s;return o(i,t),s=function(t){return function(e,n,i){var r;return r=this._.options,arguments.length>0?(r[t]=e,this.emit(t.toLowerCase()+"change",{value:e,cause:i||"api"}),this.render(n),this):r[t]}},i.prototype.collapsibleRenderer=s("collapsibleRenderer"),i.prototype.compact=s("compact"),i.prototype.displayMode=s("displayMode"),i.prototype.feed=s("feed"),i.prototype.filter=s("filter"),i.prototype.filterEnabled=s("filterEnabled"),i.prototype.noDataMessage=s("noDataMessage"),i.prototype.pageSize=s("pageSize"),i.prototype.pageSizeOptions=s("pageSizeOptions"),i.prototype.retainHorizontalScrollOnRender=s("retainHorizontalScrollOnRender"),i.prototype.retainVerticalScrollOnRender=s("retainVerticalScrollOnRender"),i.prototype.rowCollapsibleLookup=s("rowCollapsibleLookup"),i.prototype.rowEnabledLookup=s("rowEnabledLookup"),i.prototype.rowIDLookup=s("rowIDLookup"),i.prototype.rowSelectableLookup=s("rowSelectableLookup"),i.prototype.selectEnabled=s("selectEnabled"),i.prototype.singleSelection=s("singleSelection"),i.prototype.sort=s("sort"),r=function(t){return function(e,n,i){var r,o;return o=this._.options,arguments.length>1&&hx.isString(e)?(null==(r=o.columns)[e]&&(r[e]={}),o.columns[e][t]=n,this.emit(t.toLowerCase()+"change",{column:e,value:n,cause:"api"}),this.render(i),this):arguments.length>0?hx.isString(e)&&o.columns[e]?o.columns[e][t]:(o[t]=arguments[0],this.emit(t.toLowerCase()+"change",{value:n,cause:"api"}),this.render(arguments[1]),this):o[t]}},i.prototype.allowHeaderWrap=r("allowHeaderWrap"),i.prototype.cellRenderer=r("cellRenderer"),i.prototype.headerCellRenderer=r("headerCellRenderer"),i.prototype.sortEnabled=r("sortEnabled"),i.prototype.page=function(t,e,n){return arguments.length>0?(this._.page=Math.max(1,t),null!=this._.numPages&&(this._.page=Math.min(this._.page,this._.numPages)),this.emit("pagechange",{value:this._.page,cause:n||"api"}),this.render(e),this):this._.page},i.prototype.selectedRows=function(t,e){return arguments.length>0&&!hx.isFunction(t)?(this.singleSelection()&&hx.isArray(t)&&(t=[t[0]]),this._.selectedRows=new hx.Set(t),this.emit("selectedrowschange",{value:this._.selectedRows.values(),cause:"api"}),this.render(e),this):this._.selectedRows.values()},i.prototype.expandedRows=function(t,e){return arguments.length>0&&!hx.isFunction(t)?(this._.expandedRows=new hx.Set(t),this.render(e),this.emit("expandedrowschange",{value:this._.expandedRows.values(),cause:"api"}),this):this._.expandedRows.values()},i.prototype.rowsForIds=function(t,e){return null!=e&&this.feed().rowsForIds(t,this.rowIDLookup(),e),this},i.prototype.suppressRender=function(t){return arguments.length>0?(this._.suppressRender=t,this):this._.suppressRender},i.prototype.render=function(t){var i,r,o,s,a,l,h,c,u,d;if(!this._.suppressRender)return r=this.feed(),void 0===r||void 0===r.headers||void 0===r.totalCount||void 0===r.rows?void hx.consoleWarning("No feed specified when rendering data table"):(h=this._.selection,a=this._.options,h.select(".hx-data-table-pagination-block").classed("hx-data-table-pagination-block-hidden","paginate"!==a.displayMode),o=function(t,e){return void 0!==a.columns&&void 0!==a.columns[e]&&void 0!==a.columns[e][t]?a.columns[e][t]:a[t]},l=function(t,e){return t.map(function(t){return e.cells[t.id]})},i=hx.detached("div")["class"]("hx-data-table-content"),c=i.append("table")["class"]("hx-data-table-table hx-table"),d=c.append("thead")["class"]("hx-data-table-head"),u=c.append("tbody")["class"]("hx-data-table-body"),s=d.append("tr")["class"]("hx-data-table-row"),h.select(".hx-data-table-loading").style("display",""),h.select(".hx-data-table-filter-control").classed("hx-data-table-filter-visible",a.filterEnabled),r.headers(function(c){return function(d){return r.totalCount(function(p){var f,x;return"paginate"===a.displayMode?(x=(c.page()-1)*a.pageSize,f=c.page()*a.pageSize-1):(x=void 0,f=void 0),h.classed("hx-data-table-infinite",void 0===p),r.rows({start:x,end:f,sort:c.sort(),filter:c.filter()},function(r){var g,v,m,y,b,w,k,_,S,M,C,P,T,D,A,z,L,E,N,R,O,I,H,B,V,F,W,Y,j,q,X,Z,U,G;if(V=r.rows,w=r.filteredCount,"paginate"===a.displayMode&&(void 0===w?(c._.numPages=void 0,L=x+1+" - "+(f+1),h.select(".hx-data-table-paginator").classed("hx-data-table-multi-page",!0)):(c._.numPages=Math.max(1,Math.ceil(w/a.pageSize)),c.page()>c._.numPages&&c.page(c._.numPages),h.select(".hx-data-table-paginator").classed("hx-data-table-multi-page",c._.numPages>1),w>0&&c._.numPages>1&&(L="of "+w,P=function(){var t,e,n;for(n=[],C=t=1,e=this._.numPages;e>=t;C=t+=1)z=C*a.pageSize,n.push({text:z+1-a.pageSize+" - "+Math.min(z,w),value:C});return n}.call(c),c._.pagePicker.items(P).value(c.page()))),h.select(".hx-data-table-paginator-total-rows").text(L||""),h.select(".hx-data-table-paginator-back").classed("hx-data-table-btn-disabled",1===c.page()),h.select(".hx-data-table-paginator-forward").classed("hx-data-table-btn-disabled",c.page()===c._.numPages)),d.some(function(t){return o("sortEnabled",t.id)})&&(b=c.sort()||{},X=d.map(function(t){return o("sortEnabled",t.id)?{text:t.name,value:t.id}:void 0}).filter(hx.defined),c._.sortColPicker.items([{text:"No Sort",value:void 0}].concat(X)).value(b.column),c._.sortDirPicker.value(b.direction),h.select(".hx-data-table-sort-control .hx-input-group").selectAll(".hx-btn").attr("disabled",c._.sortColPicker.value().value?void 0:!0)),void 0!==w&&w>0&&(j=null!=a.pageSizeOptions&&a.pageSizeOptions.length>0,h.select(".hx-data-table-page-size").classed("hx-data-table-select-page-size",j),j&&(-1===a.pageSizeOptions.indexOf(a.pageSize)&&a.pageSizeOptions.push(a.pageSize),E=a.pageSizeOptions.sort(hx.sort.compare).map(function(t){return{text:t,value:t}}),c._.pageSizePicker.items(E).value(a.pageSize))),d.some(function(t){return null!=t.groups}))for(A=Math.max.apply(null,d.filter(function(t){return null!=t.groups}).map(function(t){return t.groups.length})),M=d.map(function(t){var e;for(e=t.groups||[];e.length<A;)e.push("");return e}),B=T=I=A-1;T>=0;B=T+=-1)for(k=s.insertBefore("tr"),(a.selectEnabled||null!=a.collapsibleRenderer)&&k.append("th")["class"]("hx-data-table-control"),y=1,m=D=1,H=M.length;H>=D;m=D+=1)v=M[m],R=M[m-1],null!=v&&null!=R&&(N=v.slice(B,A).toString(),O=R.slice(B,A).toString()),(m===M.length||v[B]!==R[B]||N!==O)&&(k.append("th").attr("colspan",y)["class"]("hx-data-table-cell-grouped").text(R[B]),y=0),y++;return(a.selectEnabled||null!=a.collapsibleRenderer)&&(S=s.append("th")["class"]("hx-data-table-control")),a.selectEnabled&&!a.singleSelection&&(_=S.append("div")["class"]("hx-data-table-checkbox").on("click","hx.data-table",function(){var t;return V.length>0?(t=V.filter(function(t){return a.rowEnabledLookup(t)}),Y(0,V.length-1,!t.every(function(t){return c._.selectedRows.has(a.rowIDLookup(t))}))):void 0}),_.append("i")["class"]("fa fa-check")),d.forEach(function(t,e){var n,i,r;return n=s.append("th")["class"]("hx-data-table-cell").classed("hx-table-header-allow-wrap",o("allowHeaderWrap",t.id)),i=n.append("div")["class"]("hx-data-table-cell-inner"),o("headerCellRenderer",t.id)(i.append("span")["class"]("hx-data-table-title").node(),t,d),o("sortEnabled",t.id)?(n.classed("hx-data-table-cell-sort-enabled",!0),b=c.sort(),r=b&&b.column===t.id?"fa-sort-"+b.direction+" hx-data-table-sort-on":"fa-sort",i.append("i")["class"]("fa "+r+" hx-data-table-sort-icon"),n.on("click","hx.data-table",function(){var e;return b=c.sort()||{},e=b.column===t.id?"asc"===b.direction?"desc":void 0:"asc",m=void 0!==e?t.id:void 0,c.sort({column:m,direction:e},void 0,"user")})):void 0}),c.updateSelected=function(){var t,e,n,r,o,s;if(o=i.select(".hx-data-table-body").selectAll(".hx-data-table-row").classed("hx-data-table-row-selected",!1),t=i.select(".hx-sticky-table-header-left").selectAll(".hx-data-table-row").classed("hx-data-table-row-selected",!1),c._.selectedRows.size>0)for(s=n=0,e=V.length;e>n;s=++n)B=V[s],c._.selectedRows.has(a.rowIDLookup(B))&&(hx.select(o.nodes[s]).classed("hx-data-table-row-selected",!0),null!=t.nodes[s]&&hx.select(t.nodes[s]).classed("hx-data-table-row-selected",!0));return r=i.select(".hx-data-table-body").selectAll(".hx-data-table-row-selected").size()>0,h.classed("hx-data-table-has-page-selection",r&&!a.singleSelection),h.classed("hx-data-table-has-selection",c._.selectedRows.size>0&&!a.singleSelection),void 0!==p?h.select(".hx-data-table-status-bar").select(".hx-data-table-status-bar-text").text(c._.selectedRows.size+" of "+p+" selected."):void 0},Y=function(t,e,n){var i,r,o,s,l,h,u;for(l=[],C=o=h=t,u=e;u>=o;C=o+=1)l.push(V[C]);for(s=0,r=l.length;r>s;s++)B=l[s],a.rowEnabledLookup(B)&&a.rowSelectableLookup(B)&&(i=a.rowIDLookup(B),c._.selectedRows[n?"add":"delete"](i),c.emit("selectedrowschange",{row:B,rowValue:c._.selectedRows.has(i),value:c.selectedRows(),cause:"user"}));return c.updateSelected()},q=function(t,e,n){var i,r;if(a.singleSelection&&e!==c._.lastSelected)c._.selectedRows.clear();else if(n&&null!=c._.lastSelected&&e!==c._.lastSelected)return i=c._.selectedRows.has(a.rowIDLookup(V[c._.lastSelected])),void(e>c._.lastSelected?Y(c._.lastSelected+1,e,i):Y(e,c._.lastSelected,i));return c._.lastSelected=e,a.rowSelectableLookup(t)&&(r=a.rowIDLookup(t),c._.selectedRows[c._.selectedRows.has(r)?"delete":"add"](r),c.emit("selectedrowschange",{row:t,rowValue:c._.selectedRows.has(r),value:c.selectedRows(),cause:"user"})),c.updateSelected()},g=function(){var t,e,i;return e=hx.detached("tr")["class"]("hx-data-table-collapsible-content-row"),i=hx.detached("tr")["class"]("hx-data-table-collapsible-row-spacer"),e.append("td")["class"]("hx-data-table-collapsible-cell hx-data-table-collapsible-cell-empty"),t=e.append("td")["class"]("hx-data-table-collapsible-cell").attr("colspan",n).append("div")["class"]("hx-data-table-collapsible-content"),{contentRow:e,hiddenRow:i,contentDiv:t}},U=function(t,e,n){var i,r,o;return o=a.rowIDLookup(e),i=c._.renderedCollapsibles[o]||g(e),c._.renderedCollapsibles[o]=i,t.insertAfter(i.hiddenRow).insertAfter(i.contentRow),r=null!=n?n:!i.contentRow.classed("hx-data-table-collapsible-row-visible"),i.contentRow.classed("hx-data-table-collapsible-row-visible",r),i.hiddenRow.classed("hx-data-table-collapsible-row-visible",r),t.classed("hx-data-table-collapsible-row-visible",r),t.select(".hx-data-table-collapsible-toggle").select("i")["class"](r?"fa fa-minus":"fa fa-plus"),r?a.collapsibleRenderer(i.contentDiv.node(),e):delete c._.renderedCollapsibles[o],c._.expandedRows[r?"add":"delete"](o),c._.stickyHeaders.render(),r},void 0===w||w>0?V.forEach(function(t,e){var n,i,r,s,h,p,f,x,g,v,m,y;for(y=u.append("tr")["class"]("hx-data-table-row").classed("hx-data-table-row-selected",c._.selectedRows.has(a.rowIDLookup(t))).classed("hx-data-table-row-disabled",!a.rowEnabledLookup(t)),y.on("click","hx.data-table",function(e){return c.emit("rowclick",t)}),m=a.rowCollapsibleLookup(t),y.classed("hx-data-table-row-select-enabled",a.selectEnabled),(a.selectEnabled||null!=a.collapsibleRenderer)&&(p=y.append("th")["class"]("hx-data-table-control"),a.selectEnabled&&(r=p.append("div")["class"]("hx-data-table-checkbox"),r.append("i")["class"]("fa fa-check"),a.rowEnabledLookup(t)&&r.on("click","hx.data-table",function(n){return n.stopPropagation(),q(t,e,n.shiftKey)})),null!=a.collapsibleRenderer&&(s=p.append("div")["class"]("hx-data-table-collapsible-toggle").classed("hx-data-table-collapsible-disabled",!m),s.append("i")["class"]("fa fa-plus")),m&&(c._.expandedRows.has(a.rowIDLookup(t))&&U(y,t,!0),s.on("click","hx.data-table.collapse-row",function(e){var n;return n=U(y,t),c.emit("expandedrowschange",{value:c._.expandedRows.values(),row:t,rowValue:n,cause:"user"})}))),g=l(d,t),v=[],h=x=0,f=g.length;f>x;h=++x)n=g[h],i=y.append("td")["class"]("hx-data-table-cell").add(hx.detached("div")["class"]("hx-data-table-cell-key").text(d[h].name)).append("div")["class"]("hx-data-table-cell-value").node(),v.push(o("cellRenderer",d[h].id)(i,n,t));return v}):u.append("tr")["class"]("hx-data-table-row-no-data").append("td").attr("colspan",n).text(a.noDataMessage),c.updateSelected(),c.page()===c._.oldPage&&(G=h.select(".hx-data-table-content .hx-sticky-table-wrapper").node(),a.retainHorizontalScrollOnRender&&(F=G.scrollLeft),a.retainVerticalScrollOnRender&&(W=G.scrollTop)),c._.oldPage=c.page(),h.select(".hx-data-table-content").insertAfter(i),h.select(".hx-data-table-content").remove(),h.classed("hx-data-table-compact","auto"===a.compact&&h.width()<e||a.compact===!0),Z=a.selectEnabled||null!=a.collapsibleRenderer,c._.stickyHeaders=new hx.StickyTableHeaders(i.node(),{stickFirstColumn:Z&&(void 0===w||w>0),
alwaysSticky:!0}),null!=F&&(h.select(".hx-data-table-content .hx-sticky-table-wrapper").node().scrollLeft=F),null!=W&&(h.select(".hx-data-table-content .hx-sticky-table-wrapper").node().scrollTop=W),h.select(".hx-data-table-loading").style("display","none"),c.emit("render"),"function"==typeof t?t():void 0})})}}(this)),this)},i}(hx.EventEmitter),i=function(t,e){var n,i,r,o,s;return e=hx.merge({filter:function(t,e){var n,i,r,o,s,a,l;for(a=function(){var t,n;t=e.cells,n=[];for(i in t)l=t[i],n.push(l);return n}().join(" ").toLowerCase(),s=t.toLowerCase().split(" "),n=0,r=s.length;r>n;n++)if(o=s[n],-1===a.indexOf(o))return!1;return!0},compare:function(t,e){return t>e?1:-1}},e),i=void 0,n=void 0,s=void 0,o={},r=void 0,{data:t,headers:function(e){return e(t.headers)},totalCount:function(e){return e(t.rows.length)},rows:function(r,a){var l,h,c,u,d,p,f;return(null!=(c=r.sort)?c.column:void 0)!==o.column&&(i=void 0),(void 0===i||n!==r.filter)&&(i=r.filter?t.rows.filter(function(t){return e.filter(r.filter,t)}):t.rows.slice(),n=r.filter,s=void 0),(void 0===s||o.column!==(null!=(u=r.sort)?u.column:void 0)||o.direction!==(null!=(d=r.sort)?d.direction:void 0))&&(s=r.sort&&r.sort.column?(h="asc"===r.sort.direction?1:-1,l=r.sort.column,i.sort(function(t,n){return h*e.compare(t.cells[l],n.cells[l])}),i.sort(function(t,n){return h*e.compare(t.cells[l],n.cells[l])}),i):i,o.column=null!=(p=r.sort)?p.column:void 0,o.direction=null!=(f=r.sort)?f.direction:void 0),a({rows:s.slice(r.start,+r.end+1||9e9),filteredCount:s.length})},rowsForIds:function(e,n,i){var o,s,a,l,h;if(void 0===r)for(r={},l=t.rows,s=0,a=l.length;a>s;s++)h=l[s],r[n(h)]=h;return i(function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)o=e[t],i.push(r[o]);return i}())}}},r=function(t,e){var n;return e=hx.merge({extra:void 0,cache:!1},e),n=function(t){var n;return e.cache?(n=void 0,function(e){return n?e(n):t(function(t){return n=t,e(n)})}):function(e){return t(e)}},{url:t,headers:n(function(n){return hx.json(t,{type:"headers",extra:e.extra},n)}),totalCount:n(function(n){return hx.json(t,{type:"totalCount",extra:e.extra},function(t){return n(t.count)})}),rows:function(n,i){return hx.json(t,{type:"rows",range:n,extra:e.extra},i)},rowsForIds:function(n,i,r){return hx.json(t,{type:"rowsForIds",ids:n,extra:e.extra},r)}}},hx.DataTable=t,hx.dataTable={},hx.dataTable.objectFeed=i,hx.dataTable.urlFeed=r}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var i,r;this.selector=t,n.__super__.constructor.apply(this,arguments),this.options=hx.merge({datePickerOptions:{},timePickerOptions:{}}),delete this.options.datePickerOptions.selectRange,hx.component.register(this.selector,this),this.suppressCallback=!1,this.selection=hx.select(this.selector).classed("hx-date-time-picker",!0),i=this.selection.append("div").node(),r=this.selection.append("div").node(),this.datePicker=new hx.DatePicker(i,this.options.datePickerOptions),this.timePicker=new hx.TimePicker(r,this.options.timePickerOptions),this.datePicker.pipe(this,"date",["show","hide"]),this.timePicker.pipe(this,"time",["show","hide"]),this.datePicker.on("change","hx.date-time-picker",function(t){return function(e){return t.timePicker.suppressed("change",!0),t.timePicker.date(new Date(t.datePicker.date().getTime()),!0),t.timePicker.suppressed("change",!1),t.emit("date.change",e),t.emit("change",t.date())}}(this)),this.timePicker.on("change","hx.date-time-picker",function(t){return function(e){return t.datePicker.suppressed("change",!0),t.datePicker.date(new Date(t.date().getTime())),t.datePicker.suppressed("change",!1),t.emit("time.change",e),t.emit("change",t.date())}}(this))}return e(n,t),n.prototype.date=function(t,e){return arguments.length>0?(this.timePicker.date(t,e),this):this.timePicker.date()},n.prototype.year=function(t){return arguments.length>0?(this.datePicker.year(t),this):this.datePicker.year()},n.prototype.month=function(t){return arguments.length>0?(this.datePicker.month(t),this):this.datePicker.month()},n.prototype.day=function(t){return arguments.length>0?(this.datePicker.day(t),this):this.datePicker.day()},n.prototype.hour=function(t){return arguments.length>0?(this.timePicker.hour(t),this):this.timePicker.hour()},n.prototype.minute=function(t){return arguments.length>0?(this.timePicker.minute(t),this):this.timePicker.minute()},n.prototype.second=function(t){return arguments.length>0?(this.timePicker.second(t),this):this.timePicker.second()},n.prototype.getScreenDate=function(){return this.datePicker.getScreenDate()},n.prototype.getScreenTime=function(){return this.timePicker.getScreenTime()},n.prototype.locale=function(t){return arguments.length>0?(this.timePicker.locale(t),this.datePicker.locale(t),this):this.timePicker.locale()},n.prototype.disable=function(){return this.datePicker.disable(),this.timePicker.disable(),this},n.prototype.enable=function(){return this.datePicker.enable(),this.timePicker.enable(),this},n}(hx.EventEmitter),hx.DateTimePicker=t}(),function(){var t,e,n,i;n=function(t,e,n,i,r,o){return t>=n&&r>=t&&e>=i&&o>=e},e=function(t,e,n,i,r,o,s,a){var l,h,c,u,d,p;return h=n-t,u=i-e,c=s-r,d=a-o,l=(-u*(t-r)+h*(e-o))/(-c*u+h*d),p=(c*(e-o)-d*(t-r))/(-c*u+h*d),l>=0&&1>=l&&p>=0&&1>=p},t=function(t,e,n,i,r,o,s){var a;return e===i?s===e&&(t>=r&&o>=t||n>=r&&o>=n||r>t&&n>o):(a=t+(s-e)*(n-t)/(i-e),a>=r&&o>=a)},i=function(t,e,n,i,r,o,s){var a;return t===n?s===t&&(e>=r&&o>=e||i>=r&&o>=i||r>e&&i>o):(a=e+(s-t)*(i-e)/(n-t),a>=r&&o>=a)};var r;r=function(){function t(){this.c=hx.color()}return t.prototype.set=function(t,e){switch(t){case"color":return this.c=hx.color(e);case"color.red":return this.c.r=hx.clamp(0,255,e);case"color.green":return this.c.g=hx.clamp(0,255,e);case"color.blue":return this.c.b=hx.clamp(0,255,e);case"color.alpha":return this.c.a=hx.clampUnit(e)}},t}();var o;o=function(){function t(t){this.id=null!=t?t:hx.randomId(),this.attr=new hx.Map,this.properties=new hx.Map,this.selectable=this.addDiscreteProperty("selectable"),this.selected=!1}return t.prototype.addDiscreteProperty=function(t,e){var n;return null==e&&(e=!1),n=new a(e),this.properties.set(t,n),n},t.prototype.addNumberProperty=function(t,e){var n;return null==e&&(e=0),n=new l(e),this.properties.set(t,n),n},t.prototype.addColorProperty=function(t,e){var n;return null==e&&(e="#FFF"),n=new s(e),this.properties.set(t,n),n},t.prototype.addStringProperty=function(t,e){var n;return null==e&&(e=""),n=new h(e),this.properties.set(t,n),n},t.prototype.set=function(t,e,n,i){return this.properties.has(t)?this.properties.get(t).set(e,n,i):hx.startsWith(t,"attr.")?this.attr.set(t.substring(5),e):console.warn("unknown property: ",t,Error().stack),this},t.prototype.get=function(t){return this.properties.has(t)?this.properties.get(t).value:hx.startsWith(t,"attr.")?this.attr.get(t.substring(5)):void 0},t.prototype.drawBoundingBox=function(t,e){var n,i;return n=this.getBoundingBox(t),n?(e.setStrokeColor(hx.color("rgba(64, 64, 64, 1)")),i=2,e.setStrokeWidth(Math.min(1,.95/e.camera.actualZoom)),t.strokeRect(n[0]-i,n[1]-i,n[2]-n[0]+2*i,n[3]-n[1]+2*i),e.setFillColor(hx.color("rgba(128, 128, 128, 0.1)")),t.fillRect(n[0]-i,n[1]-i,n[2]-n[0]+2*i,n[3]-n[1]+2*i)):void 0},t.prototype.pointInBoundingBox=function(t,e){var i;return i=this.getBoundingBox(e),n(t.x,t.y,i[0],i[1],i[2],i[3])},t}();var s,a,l,h;s=function(){function t(t){this.value=hx.color(),hx.defined(t)&&this.set(t)}return t.prototype.set=function(t,e,n){var i,r,o,s,a,l,h,c,u,d,p;return hx.defined(this.stop)&&(this.stop(),this.stop=void 0),hx.defined(e)?(d=this.value.r,u=this.value.g,c=this.value.b,h=this.value.a,i=hx.color(t),l=i.r,a=i.g,s=i.b,o=i.a,r=n?function(t){return function(e){return t.stop=void 0,n(!e,t.value)}}(this):void 0,p=function(t){return function(e,n){return n?void 0:(t.value.r=d+(l-d)*e,t.value.g=u+(a-u)*e,t.value.b=c+(s-c)*e,t.value.a=h+(o-h)*e)}}(this),this.stop=hx.transition(e,p,hx.ease.linear,r)):this.value=hx.color(t)},t}(),l=function(){function t(t){this.value=t,this.stop=void 0}return t.prototype.set=function(t,e,n){var i,r,o;return hx.defined(this.stop)&&(this.stop(),this.stop=void 0),hx.defined(e)?(r=this.value,i=n?function(t){return function(e){return t.stop=void 0,n(!e,t.value)}}(this):void 0,o=function(e){return function(n,i){return i?void 0:e.value=r+(t-r)*n}}(this),this.stop=hx.transition(e,o,hx.ease.linear,i)):this.value=t},t}(),h=function(){function t(t){this.value=t,this.stop=void 0}return t.prototype.set=function(t,e,n){var i,r,o;return hx.defined(this.stop)&&(this.stop(),this.stop=void 0),hx.defined(e)?(r=hx.interpolate(this.value,t),i=n?function(t){return function(e){return t.stop=void 0,n(!e,t.value)}}(this):void 0,o=function(t){return function(e,n){return n?void 0:t.value=r(e)}}(this),this.stop=hx.transition(e,o,hx.ease.linear)):this.value=t},t}(),a=function(){function t(t){this.value=t}return t.prototype.set=function(t){return this.value=t},t}();var c;c=function(){function t(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0}return t.prototype.set=function(t){return this.x=t.x,this.y=t.y},t.prototype.tweenTo=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e},t.prototype.distanceTo=function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},t.prototype.distanceToSquared=function(t){return(this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y)},t}();var u,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;u=function(t){function e(t){var n,i,d,p;this.drawing=t,e.__super__.constructor.apply(this,arguments),this.position=new c,this.zoom=1,this.actualPosition=new c,this.actualZoom=1,this.smoothPosition=!1,this.positionSmoothingFactor=.15,this.smoothZoom=!0,this.zoomSmoothingFactor=.15,this.zoomMax=null,this.zoomMin=null,this.xMin=null,this.yMin=null,this.xMax=null,this.yMax=null,this.mode=null,this.followContinualZoom=!1,this.smoothToNextTargetPosition=!1,this.lastx1=0,this.lasty1=0,this.lastx2=0,this.lasty2=0,this.lastZoom=1,this.isZoomTouch=!1,this.moving=!1,this.panEnabled=!1,this.zoomEnabled=!1,this.selectionEnabled=!1,n={selection:hx.select(this.drawing.canvasNode),positionLast:new c,touchStart:new c,mouseDown:!1,moveThreshold:5*this.drawing.dpr,longPressTime:1e3,longPressTimer:null,didLongPress:!1},i=function(t){return function(e){return s.call(t,e,n)}}(this),p=function(t){return function(e){return l.call(t,e,n)}}(this),d="drawing-"+hx.randomId(),hx.select(document).on("mouseup",d,i),hx.select(document).on("touchend",d,p),hx.select(this.drawing.canvasNode).on("mousemove","hx.drawing",function(t){return function(e){return o.call(t,e,n)}}(this)),n.selection.on("mousedown","hx.drawing",function(t){return function(e){return r.call(t,e,n)}}(this)),n.selection.on("wheel","hx.drawing",function(t){return function(e){return a.call(t,e,n)}}(this)),hx.select(this.drawing.canvasNode).on("touchstart","hx.drawing",function(t){return function(e){return u.call(t,e,n)}}(this)),n.selection.on("touchmove","hx.drawing",function(t){return function(e){return h.call(t,e,n)}}(this)),n.selection.on("touchcancel","hx.drawing",function(t){return function(e){return l.call(t,e,n)}}(this))}var n,i,r,o,s,a,l,h,u,p,f;return d(e,t),f=function(t){return this.zoom=t,this.emit("zoom",{zoom:t})},r=function(t,e){var n,i;return t.preventDefault(),this.mouseDown=!0,n=t.clientX,i=t.clientY,e.touchStart.x=n,e.touchStart.y=i,this.emit("pointerdown",{x:n,y:i})},o=function(t,e){var n,i,r,o;return this.panEnabled&&this.mouseDown&&t.preventDefault(),r=t.clientX,o=t.clientY,this.mouseDown&&(!this.moving&&(e.touchStart.x-r)*(e.touchStart.x-r)+(e.touchStart.y-o)*(e.touchStart.y-o)>e.moveThreshold*e.moveThreshold&&(this.moving=!0,e.positionLast.set(e.touchStart),this.panEnabled&&e.selection.style("cursor","move")),this.moving)?(n=r-e.positionLast.x,i=o-e.positionLast.y,e.positionLast.x=t.clientX,e.positionLast.y=t.clientY,p.call(this,n,i)):void 0},s=function(t,e){return this.mouseDown?(t.preventDefault(),this.mouseDown=!1,this.moving?this.moving=!1:n.call(this,e.touchStart.x-e.selection.box().left,e.touchStart.y-e.selection.box().top),e.selection.style("cursor","default"),this.emit("pointerup",{x:e.touchStart.x,y:e.touchStart.y})):void 0},p=function(t,e,n){return this.panEnabled?(this.mode=void 0,this.smoothToNextTargetPosition=!1,this.position.x-=t*this.drawing.dpr/this.actualZoom,this.position.y-=e*this.drawing.dpr/this.actualZoom,this.emit("move",{dx:t,dy:e})):void 0},a=function(t,e){var n,i,r,o,s,a;return this.zoomEnabled?(t.preventDefault(),t.stopPropagation(),n=-t.deltaY,1===t.deltaMode&&(n*=20),i=Math.min(.99,Math.abs(n/120*.2)),r=t.clientX,o=t.clientY,s=this.getWorldX(r),a=this.getWorldY(o),f.call(this,n>0?this.zoom/(1-i):this.zoom*(1-i))):void 0},u=function(t,e){var n,r,o,s,a,l,h;if(t.preventDefault(),this.mouseDown=!0,n=t.changedTouches,n.length>0)for(o=s=0,a=n.length-1;a>=s;o=s+=1)l=n[o].clientX,h=n[o].clientY,this.emit("pointerdown",{x:l,y:h});return 1===t.targetTouches.length?(l=t.targetTouches[0].clientX,h=t.targetTouches[0].clientY,e.touchStart.x=l,e.touchStart.y=h,r=!1,e.longPressTimer=setTimeout(function(t){return function(){return i.call(t,e.touchStart.x-e.selection.box().left,e.touchStart.y-e.selection.box().top),r=!0}}(this),e.longPressTime)):2===t.targetTouches.length?(e.longPressTimer&&(clearTimeout(e.longPressTimer),e.longPressTimer=null),this.isZoomTouch=!0,this.lastx1=t.targetTouches[0].clientX,this.lasty1=t.targetTouches[0].clientY,this.lastx2=t.targetTouches[1].clientX,this.lasty2=t.targetTouches[1].clientY,this.startPinchDistance=Math.sqrt((this.lastx1-this.lastx2)*(this.lastx1-this.lastx2)+(this.lasty1-this.lasty2)*(this.lasty1-this.lasty2)),this.lastZoom=this.zoom):void 0},h=function(t,e){var n,i,r,o,s,a,l,h,c;if(t.preventDefault(),1!==t.targetTouches.length||this.isZoomTouch){if(2===t.targetTouches.length&&this.zoomEnabled)return s=t.targetTouches[0].clientX,h=t.targetTouches[0].clientY,a=t.targetTouches[1].clientX,c=t.targetTouches[1].clientY,n=Math.sqrt((s-a)*(s-a)+(h-c)*(h-c)),f.call(this,this.lastZoom*n/this.startPinchDistance)}else if(o=t.targetTouches[0].clientX,l=t.targetTouches[0].clientY,!this.moving&&(e.touchStart.x-o)*(e.touchStart.x-o)+(e.touchStart.y-l)*(e.touchStart.y-l)>e.moveThreshold*e.moveThreshold&&(this.moving=!0,e.positionLast.set(e.touchStart),e.longPressTimer&&(clearTimeout(e.longPressTimer),e.longPressTimer=null)),this.moving&&(i=o-e.positionLast.x,r=l-e.positionLast.y,e.positionLast.x=o,e.positionLast.y=l,this.mouseDown))return p.call(this,i,r)},l=function(t,e){var i,r,o,s,a,l,h;if(this.mouseDown){if(t.preventDefault(),i=t.changedTouches,i.length>0)for(o=s=0,a=i.length-1;a>=s;o=s+=1)l=i[o].clientX,h=i[o].clientY,this.emit("pointerup",{x:l,y:h});return 0===t.targetTouches.length?(this.isZoomTouch=!1,e.longPressTimer&&(clearTimeout(e.longPressTimer),e.longPressTimer=null),this.moving?this.moving=!1:r||n.call(this,e.touchStart.x-e.selection.box().left,e.touchStart.y-e.selection.box().top),r=!1):void 0}},n=function(t,e){var n,i,r;return r=this.screenPointToWorldPoint(new c(t,e)),this.selectionEnabled&&(n=this.drawing.ctx,i=this.drawing.findBy(function(t){return t.selectable.value&&t.pointInBoundingBox(r,n)}),i?this.drawing.select(i):this.drawing.unselectAll()),this.emit("click",{x:t,y:e,wx:r.x,wy:r.y})},i=function(t,e){return this.emit("longpress",{x:t,y:e})},e.prototype.setupBounds=function(t,e,n,i,r,o){return this.zoomMin=t,this.zoomMax=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=o},e.prototype.clearTransform=function(t){return t.setTransform(1,0,0,1,0,0)},e.prototype.applyTransform=function(t){return t.translate(this.drawing.width/2,this.drawing.height/2),t.scale(this.actualZoom,this.actualZoom),t.translate(-this.actualPosition.x,-this.actualPosition.y)},e.prototype.update=function(){var t;switch(this.mode){case"follow":t=this.followObject.getBoundingBox(this.drawing.ctx),t&&(this.followContinualZoom&&(this.zoom=this.calculateZoomForBoundingBox(t,this.followZoomOut)),this.position.x=(t[0]+t[2])/2,this.position.y=(t[1]+t[3])/2)}return this.zoomMin&&this.zoom<this.zoomMin&&(this.zoom=this.zoomMin),this.zoomMax&&this.zoom>this.zoomMax&&(this.zoom=this.zoomMax),this.xMin&&this.position.x<this.xMin&&(this.position.x=this.xMin),this.yMin&&this.position.y<this.yMin&&(this.position.y=this.yMin),this.xMax&&this.position.x>this.xMax&&(this.position.x=this.xMax),this.yMax&&this.position.y>this.yMax&&(this.position.y=this.yMax),this.smoothPosition||this.smoothToNextTargetPosition?(this.actualPosition.tweenTo(this.position,this.positionSmoothingFactor),this.actualPosition.distanceTo(this.position)<1&&(this.smoothToNextTargetPosition=!1)):this.actualPosition.set(this.position),this.smoothZoom?this.actualZoom=hx.tween(this.actualZoom,this.zoom,this.zoomSmoothingFactor):this.actualZoom=this.zoom},e.prototype.getWorldRect=function(){return[this.actualPosition.x-this.drawing.width/(2*this.actualZoom),this.actualPosition.y-this.drawing.height/(2*this.actualZoom),this.actualPosition.x+this.drawing.width/(2*this.actualZoom),this.actualPosition.y+this.drawing.height/(2*this.actualZoom)]},e.prototype.getWorldX=function(t){return(t*this.drawing.dpr-this.drawing.width/2)/this.actualZoom+this.actualPosition.x},e.prototype.getWorldY=function(t){return(t*this.drawing.dpr-this.drawing.height/2)/this.actualZoom+this.actualPosition.y},e.prototype.screenPointToWorldPoint=function(t){var e;return e={x:(t.x*this.drawing.dpr-this.drawing.width/2)/this.actualZoom+this.actualPosition.x,y:(t.y*this.drawing.dpr-this.drawing.height/2)/this.actualZoom+this.actualPosition.y}},e.prototype.worldPointToScreenPoint=function(t){var e;return e={x:(t.x*this.drawing.dpr-this.actualPosition.x)*this.actualZoom+this.drawing.width/2,y:(t.y*this.drawing.dpr-this.actualPosition.y)*this.actualZoom+this.drawing.height/2}},e.prototype.calculateZoomForBoundingBox=function(t,e){return Math.min(this.drawing.width/((t[2]-t[0])*e),this.drawing.height/((t[3]-t[1])*e))},e.prototype.follow=function(t,e,n){var i;return this.smoothToNextTargetPosition=!0,t&&(this.mode="follow",this.followObject=t,this.followZoomOut=e,this.followContinualZoom=n,i=this.followObject.getBoundingBox(this.drawing.ctx))?this.zoom=this.calculateZoomForBoundingBox(i,e):void 0},e.prototype.stopFollowing=function(){return this.mode=null,this.followObject=null},e.prototype.show=function(t,e){var n;return this.smoothToNextTargetPosition=!0,t&&(n=t.getBoundingBox(this.drawing.ctx))?(this.zoom=this.calculateZoomForBoundingBox(n,e),this.position.x=(n[0]+n[2])/2,this.position.y=(n[1]+n[3])/2):void 0},e}(hx.EventEmitter);var f,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;f=function(t){function e(t,n){var r,o;null==n&&(n=!0),e.__super__.constructor.apply(this,arguments),hx.component.register(t,this),r=hx.select(t),r.classed("hx-drawing",!0),this.canvas=r.append("canvas"),this.overlay=r.append("div")["class"]("hx-drawing-overlay"),o=r.node(),i.call(this,o),r.on("resize",function(t){return function(){return i.call(t,o)}}(this)),this.canvasNode=this.canvas.node(),this.ctx=this.canvasNode.getContext("2d"),this.defaultLayer=new x(this),this.layers=[this.defaultLayer],this.camera=new u(this),this.camera.pipe(this),this.globalAlpha=1,this.stats=null,this.selectedObjects=new hx.List,this.frame=0,n&&this.resume()}var n,i;return d(e,t),n=function(){var t;return t=!1,hx.loop(function(e){return function(){var n,i,r,o;for(e.stats&&e.stats.start(),e.camera.clearTransform(e.ctx),e.ctx.clearRect(0,0,e.width,e.height),e.camera.update(),e.camera.applyTransform(e.ctx),o=e.layers,n=0,r=o.length;r>n;n++)i=o[n],i.render(e.ctx);return e.stats&&(e.camera.clearTransform(e.ctx),e.stats.end(),e.stats.update(),e.stats.render()),e.emit("update",e.frame),e.frame++,t}}(this)),function(){return t=!0}},i=function(t){var e,n;return n=t.clientWidth,e=t.clientHeight,this.dpr=null!=window.devicePixelRatio?window.devicePixelRatio:1,this.canvas.prop("width",n*this.dpr),this.canvas.prop("height",e*this.dpr),this.canvas.style("width",n+"px"),this.canvas.style("height",e+"px"),this.canvas.style("position","relative"),this.width=n*this.dpr,this.height=e*this.dpr,this.overlay.style("width",n+"px"),this.overlay.style("height",e+"px"),this.state={height:n,width:e}},e.prototype.resume=function(){return this.stopFunc?void 0:this.stopFunc=n.call(this)},e.prototype.stop=function(){return this.stopFunc?(this.stopFunc(),this.stopFunc=void 0):void 0},e.prototype.find=function(t){var e,n,i,r,o;for(r=this.layers,e=0,i=r.length;i>e;e++)if(n=r[e],o=n.find(t))return o},e.prototype.findBy=function(t){var e,n,i,r,o;for(r=this.layers,e=0,i=r.length;i>e;e++)if(n=r[e],o=n.findBy(t))return o},e.prototype.createLayer=function(){var t;return t=new x(this),this.layers.push(t),t},e.prototype.showLayer=function(t){var e,n,i,r,o;for(r=this.layers,o=[],e=0,i=r.length;i>e;e++)n=r[e],o.push(n.visible=n===t);return o},e.prototype.follow=function(t,e,n){return null==e&&(e=1),null==n&&(n=!1),this.camera.follow(t,e,n)},e.prototype.stopFollowing=function(){return this.camera.stopFollowing},e.prototype.show=function(t,e){return null==e&&(e=1),this.camera.show(t,e)},e.prototype.enablePan=function(){return this.camera.panEnabled=!0},e.prototype.enableZoom=function(){return this.camera.zoomEnabled=!0},e.prototype.enableSelection=function(){return this.camera.selectionEnabled=!0},e.prototype.enablePerformanceGauge=function(){return this.stats=new v(this)},e.prototype.enableSearchbox=function(){var t;return this.searchbox=this.overlay.append("div").classed("hx-drawing-searchbox",!0),t=this.searchbox.append("input").attr("placeholder","Search"),t.on("keypress",function(e){return function(n){return 13===n.which?e.emit("search",t.prop("value")):void 0}}(this))},e.prototype.enableSidebar=function(t,e,n){return 2===arguments.length&&(n=e,e=null),this.sidebar=new g(this.overlay,t,e,n),this.showSidebar=function(t){return function(){return t.sidebar.show()}}(this),this.hideSidebar=function(t){return function(){return t.sidebar.hide()}}(this),this.toggleSidebar=function(t){return function(){return t.sidebar.toggle()}}(this)},e.prototype.create=function(t,e){return this.defaultLayer.create(t,e)},e.prototype["delete"]=function(t){var e,n,i,r,o;for(r=this.layers,o=[],e=0,i=r.length;i>e;e++)n=r[e],o.push(n["delete"](t));return o},e.prototype.deleteAll=function(){var t,e,n,i;for(i=this.layers,t=0,n=i.length;n>t;t++)e=i[t],e.deleteAll();return void 0},e.prototype.setGlobalAlpha=function(t){return this.globalAlpha=t},e.prototype.setFillColor=function(t){var e,n,i,r;return r=t.r,i=t.g,n=t.b,e=t.a*this.globalAlpha,this.ctx.fillStyle="rgba("+Math.floor(r)+","+Math.floor(i)+","+Math.floor(n)+","+e+")"},e.prototype.setStrokeColor=function(t){var e,n,i,r;return r=t.r,i=t.g,n=t.b,e=t.a*this.globalAlpha,this.ctx.strokeStyle="rgba("+Math.floor(r)+","+Math.floor(i)+","+Math.floor(n)+","+e+")"},e.prototype.setStrokeWidth=function(t){return this.ctx.lineWidth=t},e.prototype.setStrokeCap=function(t){return this.ctx.lineCap=t},e.prototype.getBoundingBox=function(){var t,e,n,i,r;if(this.layers.length>0){if(r=this.layers[0].getBoundingBox(this.ctx),this.layers.length>1)for(e=n=1,i=this.layers.length-1;i>=n;e=n+=1)t=this.layers[e].getBoundingBox(this.ctx),t&&(r?(t[0]<r[0]&&(r[0]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[2]>r[2]&&(r[2]=t[2]),t[3]>r[3]&&(r[3]=t[3])):r=t);return r}return null},e.prototype.select=function(t,e){var n,i,r,o;if(null==e&&(e=!1),e)this.selectedObjects.add(t);else{for(o=this.selectedObjects.values(),n=0,i=o.length;i>n;n++)r=o[n],r!==t&&(r.selected=!1,this.emit("unselect",r));this.selectedObjects=new hx.List([t])}return t.selected=!0,this.emit("select",t)},e.prototype.unselect=function(t){return this.selectedObjects.remove(t)?(t.selected=!1,this.emit("unselect",t)):void 0},e.prototype.unselectAll=function(){var t,e,n,i;for(i=this.selectedObjects.values(),t=0,e=i.length;e>t;t++)n=i[t],n.selected=!1,this.emit("unselect",n);return this.selectedObjects.clear()},e.prototype.selected=function(){return this.selectedObjects.values()},e}(hx.EventEmitter),hx.Drawing=f;var x;x=function(){function t(t){this.drawing=t,this.objects=[],this.visible=!0,this.alpha=1,this.alphaCurveFunction=null}var e,n;return n=function(t,e){return function(n){return 1-Math.abs(2*(Math.log(n)-t)/(e-t)-1)}},e=function(t,e){return function(n){return 1+Math.min(2*(Math.log(n)-t)/(e-t)-1,0)}},t.prototype.render=function(){var t,e,n,i,r;if(this.alphaCurveFunction&&(this.alpha=hx.clampUnit(this.alphaCurveFunction(this.drawing.camera.actualZoom)),this.visible=this.alpha>.01),this.visible){for(this.drawing.setGlobalAlpha(this.alpha),i=this.objects,r=[],t=0,e=i.length;e>t;t++)n=i[t],r.push(n.render(this.drawing.ctx,this.drawing,0,0));return r}},t.prototype.create=function(t,e){var n;return n=function(){switch(t){case"circle":return new m(e);case"rectangle":return new k(e);case"line":return new w(e);case"grid":return new b(e);case"text":return new S(e);case"shape":return new _(e);case"composite":return new y(e)}}(),n&&this.objects.push(n),n},t.prototype["delete"]=function(t){var e;return e=this.objects.indexOf(t),-1!==e?this.objects.splice(e,1):void 0},t.prototype.deleteAll=function(){return void(this.objects=[])},t.prototype.find=function(t){var e,n,i,r;for(r=this.objects,e=0,n=r.length;n>e;e++)if(i=r[e],i.id===t)return i},t.prototype.findBy=function(t){var e,n,i,r;for(r=this.objects,e=0,n=r.length;n>e;e++)if(i=r[e],t(i))return i},t.prototype.getBoundingBox=function(){var t,e,n,i,r;if(this.objects.length>0){if(r=this.objects[0].getBoundingBox(this.drawing.ctx),this.objects.length>1)for(e=n=1,i=this.objects.length-1;i>=n;e=n+=1)t=this.objects[e].getBoundingBox(this.drawing.ctx),t&&(r?(t[0]<r[0]&&(r[0]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[2]>r[2]&&(r[2]=t[2]),t[3]>r[3]&&(r[3]=t[3])):r=t);return r}return null},t.prototype.setAlphaCurve=function(t,i,r){return this.alphaCurveFunction=function(){switch(t){case"triangle":return n(i,r);case"ramp":return e(i,r)}}()},t}();var g,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;g=function(t){function e(t,n,i,r){switch(null==n&&(n="l"),e.__super__.constructor.apply(this,arguments),this.visible=!1,this.selection=t.append("div")["class"]("hx-drawing-sidebar hx-drawing-sidebar-"+n),n){case"t":case"b":this.selection.style("height","0px"),this.expandEvt="expandv",this.collapseEvt="collapsev";break;default:this.selection.style("width","0px"),this.expandEvt="expandh",this.collapseEvt="collapseh"}i&&(i.split(""),this.toggleBtn=t.append("div")["class"]("hx-btn hx-drawing-sidebar-toggle").classed("hx-drawing-sidebar-toggle-"+i[0],!0).classed("hx-drawing-sidebar-toggle-"+i[1],!0).on("click",function(t){return function(){return t.toggle()}}(this)).append("i")["class"]("fa fa-bars")),"function"==typeof r&&r(this.selection.node())}return d(e,t),e.prototype.toggle=function(){return this.visible?this.hide():this.show()},e.prototype.show=function(){return this.visible||(this.visible=!0,this.selection.morph()["with"](this.expandEvt,100).and("fadein",100).go(!0)),this},e.prototype.hide=function(){return this.visible&&(this.visible=!1,this.selection.morph()["with"]("fadeout",100).and(this.collapseEvt,100).go(!0)),this},e}(hx.EventEmitter);var v;v=function(){function t(t){this.drawing=t,this.position=new c(3,3),this.fps=void 0,this.ms=void 0,this.lastEnd=void 0,this.frameStart=void 0,this.frameEnd=void 0}return t.prototype.start=function(){return this.frameStart=(new Date).getTime()},t.prototype.end=function(){return this.lastEnd=this.frameEnd,this.frameEnd=(new Date).getTime()},t.prototype.update=function(){var t,e;return t=1e3/(this.frameEnd-this.lastEnd),isNaN(t)||(this.fps?this.fps=hx.tween(this.fps,t,.05):this.fps=t),e=this.frameEnd-this.frameStart,this.ms?this.ms=hx.tween(this.ms,e,.05):this.ms=e},t.prototype.render=function(){return this.drawing.ctx.fillStyle="rgba(0, 0, 40, 1)",this.drawing.ctx.strokeStyle="#ffffff",this.drawing.ctx.lineCap="square",this.drawing.ctx.lineWidth=1,this.drawing.ctx.fillRect(this.position.x,this.position.y,70,42),this.drawing.ctx.strokeRect(this.position.x,this.position.y,70,42),this.drawing.ctx.font="10pt Helvetica,Arial",this.drawing.ctx.fillStyle="#ffffff",this.drawing.ctx.fillText("FPS: "+Math.round(this.fps),8+this.position.x,18+this.position.y),this.ms<17?this.drawing.ctx.fillStyle="#ffffff":this.drawing.ctx.fillStyle="#ff5555",this.drawing.ctx.fillText("MS: "+Math.round(this.ms),8+this.position.x,33+this.position.y)},t}();var m,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;m=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.fill={enabled:this.addDiscreteProperty("fill.enabled",!0),color:this.addColorProperty("fill.color")},this.outline={enabled:this.addDiscreteProperty("outline.enabled",!1),width:this.addNumberProperty("outline.width"),color:this.addColorProperty("outline.color")},this.radius=this.addNumberProperty("radius",10)}return d(e,t),e.prototype.render=function(t,e,n,i){var r;return r=e.camera.getWorldRect(),r[0]-=n,r[1]-=i,r[2]-=n,r[3]-=i,this.position.x.value+this.radius.value>r[0]&&this.position.x.value-this.radius.value<r[2]&&this.position.y.value+this.radius.value>r[1]&&this.position.y.value-this.radius.value<r[3]&&(t.beginPath(),t.arc(this.position.x.value,this.position.y.value,this.radius.value,0,2*Math.PI,!0),t.closePath(),this.fill.enabled.value&&(e.setFillColor(this.fill.color.value),t.fill()),this.outline.enabled.value&&(e.setStrokeColor(this.outline.color.value),e.setStrokeWidth(this.outline.width.value),t.stroke()),this.selected)?this.drawBoundingBox(t,e):void 0},e.prototype.getBoundingBox=function(){return[this.position.x.value-this.radius.value,this.position.y.value-this.radius.value,this.position.x.value+this.radius.value,this.position.y.value+this.radius.value]},e}(o);var y,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;y=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.angle=this.addNumberProperty("angle"),this.scale=this.addNumberProperty("scale",1),this.objectList=new hx.List,this.objectMap=new hx.Map}return d(e,t),e.prototype.set=function(t,n,i,r){var o,s,a,l;return this.properties.has(t)||hx.startsWith(t,"attr.")?e.__super__.set.call(this,t,n,i,r):(o=t.split("."),o.length>1?(a=o[0],l=o.slice(1).join("."),s=this.objectMap.get(a),s?s.set(l,n):console.warn("unknown property: ",t,Error().stack)):console.warn("unknown property: ",t,Error().stack)),this},e.prototype.get=function(t){var n,i,r,o;return this.properties.has(t)||hx.startsWith(t,"attr.")?e.__super__.get.call(this,t):(n=t.split("."),n.length>1&&(r=n[0],o=n.slice(1).join("."),i=this.objectMap.get(r))?i.get(o):void 0)},e.prototype.create=function(t,n){var i;return i=function(){switch(t){case"circle":return new m;case"rectangle":return new k;case"line":return new w;case"grid":return new b;case"text":return new S;case"shape":return new _;case"composite":return new e}}(),i&&(this.objectList.add(i),this.objectMap.set(n,i)),this},e.prototype["delete"]=function(t){return this.objectList["delete"](object),this.objectMap["delete"](t)},e.prototype.render=function(t,e,n,i){var r,o,s,a,l,h;if(this.objectList.size>0&&(r=this.getBoundingBox(t),
o=e.camera.getWorldRect(),o[0]-=n,o[1]-=i,o[2]-=n,o[3]-=i,!r||r[2]>o[0]&&r[0]<o[2]&&r[3]>o[1]&&r[1]<o[3]))for(h=this.objectList.values(),s=0,a=h.length;a>s;s++)l=h[s],t.save(),t.translate(this.position.x.value,this.position.y.value),t.scale(this.scale.value,this.scale.value),t.rotate(this.angle.value),l.render(t,e,this.position.x.value+n,this.position.y.value+i),t.restore();return this.selected?this.drawBoundingBox(t,e):void 0},e.prototype.getBoundingBox=function(t){var e,n,i,r,o;if(this.objectList.size>0){if(o=this.objectList.get(0).getBoundingBox(t),this.objectList.size>1)for(n=i=1,r=this.objectList.size-1;r>=i;n=i+=1)e=this.objectList.get(n).getBoundingBox(t),e&&(o?(e[0]<o[0]&&(o[0]=e[0]),e[1]<o[1]&&(o[1]=e[1]),e[2]>o[2]&&(o[2]=e[2]),e[3]>o[3]&&(o[3]=e[3])):o=e);return o[0]+=this.position.x.value,o[1]+=this.position.y.value,o[2]+=this.position.x.value,o[3]+=this.position.y.value,o}},e}(o);var b,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;b=function(t){function e(){var t,n;e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.cellSize={x:this.addNumberProperty("cellSize.x"),y:this.addNumberProperty("cellSize.y")},this.gridSize={x:this.addNumberProperty("gridSize.x"),y:this.addNumberProperty("gridSize.y")},this.gridLines={color:this.addColorProperty("gridLines.color"),width:this.addNumberProperty("gridLines.width"),enabled:this.addDiscreteProperty("gridLines.enabled",!1)},n=function(){var e,n;for(n=[],t=e=0;15>=e;t=e+=1)n.push(new r(Math.random(),Math.random()/2,0,.5));return n}(),this.cells={enabled:this.addDiscreteProperty("cells.enabled",!1),states:this.addDiscreteProperty("cells.states",void 0),palette:this.addDiscreteProperty("cells.palette",n)}}return d(e,t),e.prototype.render=function(t,e,n,i){var r,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y,b,w,k,_,S,M,C,P,T,D,A;if(o=e.camera.getWorldRect(),o[0]-=n,o[1]-=i,o[2]-=n,o[3]-=i,P=Math.max(0,Math.floor((o[0]-this.position.x.value)/this.cellSize.x.value)),T=Math.max(0,Math.floor((o[1]-this.position.y.value)/this.cellSize.y.value)),l=Math.min(this.gridSize.x.value-1,Math.ceil((o[2]-this.position.x.value)/this.cellSize.x.value)),h=Math.min(this.gridSize.y.value-1,Math.ceil((o[3]-this.position.y.value)/this.cellSize.y.value)),l>=P&&h>=T){if(this.cells.enabled.value)for(A=d=m=T,y=h;y>=d;A=d+=1)for(C=this.cells.states.value[A],D=p=b=P,w=l;w>=p;D=p+=1)r=C[D],e.setFillColor(this.cells.palette.value[r]),t.fillRect(this.position.x.value+D*this.cellSize.x.value+1,this.position.y.value+A*this.cellSize.y.value+1,this.cellSize.x.value-1,this.cellSize.y.value-1);if(this.gridLines.enabled){for(t.beginPath(),e.setStrokeColor(this.gridLines.color.value),e.setStrokeWidth(this.gridLines.width.value),e.setStrokeCap("square"),g=this.position.x.value,v=this.position.y.value,s=this.cellSize.x.value,a=this.cellSize.y.value,c=this.gridSize.x.value,u=this.gridSize.y.value,D=f=k=P,_=l+1;_>=f;D=f+=1)t.moveTo(g+D*s+.5,v+.5),t.lineTo(g+D*s+.5,v+a*u+.5);for(A=x=S=T,M=h+1;M>=x;A=x+=1)t.moveTo(g+.5,v+A*a+.5),t.lineTo(g+s*c+.5,v+A*a+.5);t.closePath(),t.stroke()}if(this.selected)return this.drawBoundingBox(t,e)}},e.prototype.getBoundingBox=function(){return[this.position.x.value,this.position.y.value,this.position.x.value+this.gridSize.x.value*this.cellSize.x.value,this.position.y.value+this.gridSize.y.value*this.cellSize.y.value]},e}(o);var w,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;w=function(e){function r(){r.__super__.constructor.apply(this,arguments),this.start={x:this.addNumberProperty("start.x"),y:this.addNumberProperty("start.y")},this.end={x:this.addNumberProperty("end.x"),y:this.addNumberProperty("end.y")},this.color=this.addColorProperty("color"),this.width=this.addNumberProperty("width")}return d(r,e),r.prototype.render=function(e,r,o,s){var a,l;return a=r.camera.getWorldRect(),a[0]-=o,a[1]-=s,a[2]-=o,a[3]-=s,l=0===this.width.value?Math.min(1,.95/r.camera.actualZoom):this.width.value,(n(this.start.x.value,this.start.y.value,a[0]-l,a[1]-l,a[2]+l,a[3]+l)||n(this.end.x.value,this.end.y.value,a[0]-l,a[1]-l,a[2]+l,a[3]+l)||t(this.start.x.value,this.start.y.value,this.end.x.value,this.end.y.value,a[0]-l,a[2]+l,a[1]-l)||t(this.start.x.value,this.start.y.value,this.end.x.value,this.end.y.value,a[0]-l,a[2]+l,a[3]+l)||i(this.start.x.value,this.start.y.value,this.end.x.value,this.end.y.value,a[1]-l,a[3]+l,a[0]-l)||i(this.start.x.value,this.start.y.value,this.end.x.value,this.end.y.value,a[1]-l,a[3]+l,a[2]+l))&&(e.beginPath(),r.setStrokeColor(this.color.value),r.setStrokeWidth(l),e.moveTo(this.start.x.value,this.start.y.value),e.lineTo(this.end.x.value,this.end.y.value),e.closePath(),e.stroke(),this.selected)?this.drawBoundingBox(e,r):void 0},r.prototype.getBoundingBox=function(){return[Math.min(this.start.x.value,this.end.x.value),Math.min(this.start.y.value,this.end.y.value),Math.max(this.start.x.value,this.end.x.value),Math.max(this.start.y.value,this.end.y.value)]},r}(o);var k,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;k=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.fill={enabled:this.addDiscreteProperty("fill.enabled",!0),color:this.addColorProperty("fill.color")},this.outline={enabled:this.addDiscreteProperty("outline.enabled",!1),width:this.addNumberProperty("outline.width"),color:this.addColorProperty("outline.color")},this.width=this.addNumberProperty("width",10),this.height=this.addNumberProperty("height",10)}return d(e,t),e.prototype.render=function(t,e,n,i){var r;return r=e.camera.getWorldRect(),r[0]-=n,r[1]-=i,r[2]-=n,r[3]-=i,this.position.x.value+this.width.value>r[0]&&this.position.x.value<r[2]&&this.position.y.value+this.height.value>r[1]&&this.position.y.value<r[3]&&(this.fill.enabled.value&&(e.setFillColor(this.fill.color.value),t.fillRect(this.position.x.value,this.position.y.value,this.width.value,this.height.value)),this.outline.enabled.value&&(e.setStrokeColor(this.outline.color.value),e.setStrokeWidth(this.outline.width.value),t.strokeRect(this.position.x.value,this.position.y.value,this.width.value,this.height.value)),this.selected)?this.drawBoundingBox(t,e):void 0},e.prototype.getBoundingBox=function(){return[this.position.x.value,this.position.y.value,this.position.x.value+this.width.value,this.position.y.value+this.height.value]},e}(o);var _,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;_=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.fill={enabled:this.addDiscreteProperty("fill.enabled",!0),color:this.addColorProperty("fill.color")},this.outline={enabled:this.addDiscreteProperty("outline.enabled",!1),width:this.addNumberProperty("outline.width"),color:this.addColorProperty("outline.color")},this.curve=this.addDiscreteProperty("curve",[]),this.type=""}return d(e,t),e.prototype.set=function(t,n,i,r){return"curve"===t&&(this.type="curve"),"polygon"===t&&(this.type="polygon",t="curve"),e.__super__.set.call(this,t,n,i,r)},e.prototype.get=function(t){return"polygon"===t&&(t="curve"),e.__super__.get.call(this,t)},e.prototype.render=function(t,e,n,i){var r,o,s,a,l,h,c,u,d,p,f;if(r=this.getBoundingBox(t),o=e.camera.getWorldRect(),o[0]-=n,o[1]-=i,o[2]-=n,o[3]-=i,r&&r[2]>o[0]&&r[0]<o[2]&&r[3]>o[1]&&r[1]<o[3]){if(t.beginPath(),"polygon"===this.type)for(p=this.curve.value,s=a=0,h=p.length;h>a;s=++a)d=p[s],0===s?t.moveTo(this.position.x.value+d[0],this.position.y.value+d[1]):t.lineTo(this.position.x.value+d[0],this.position.y.value+d[1]);if("curve"===this.type)for(f=this.curve.value,s=l=0,c=f.length;c>l;s=++l)u=f[s],0===s?t.moveTo(this.position.x.value+u[0],this.position.y.value+u[1]):t.quadraticCurveTo(this.position.x.value+this.curve.value[s-1][2],this.position.y.value+this.curve.value[s-1][3],this.position.x.value+u[0],this.position.y.value+u[1]);if(t.closePath(),this.outline.enabled.value&&(e.setStrokeColor(this.outline.color.value),e.setStrokeWidth(this.outline.width.value),t.stroke()),this.fill.enabled.value&&(e.setFillColor(this.fill.color.value),t.fill()),this.selected)return this.drawBoundingBox(t,e)}},e.prototype.getBoundingBox=function(){var t,e,n,i,r,o,s,a,l,h,c,u;if("polygon"===this.type){for(l=h=this.curve.value[0][0],c=u=this.curve.value[0][1],s=this.curve.value,t=e=0,i=s.length;i>e;t=++e)o=s[t],o[0]<l&&(l=o[0]),o[1]<c&&(c=o[1]),o[0]>h&&(h=o[0]),o[1]>u&&(u=o[1]);return[this.position.x.value+l,this.position.y.value+c,this.position.x.value+h,this.position.y.value+u]}if("curve"===this.type){for(l=h=this.curve.value[0][0],c=u=this.curve.value[0][1],a=this.curve.value,t=n=0,r=a.length;r>n;t=++n)o=a[t],o[0]<l&&(l=o[0]),o[1]<c&&(c=o[1]),o[0]>h&&(h=o[0]),o[1]>u&&(u=o[1]),o[2]<l&&(l=o[2]),o[3]<c&&(c=o[3]),o[2]>h&&(h=o[2]),o[3]>u&&(u=o[3]);return[this.position.x.value+l,this.position.y.value+c,this.position.x.value+h,this.position.y.value+u]}},e}(o);var S,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;S=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.color=this.addColorProperty("color"),this.size=this.addNumberProperty("size",12),this.align={x:this.addDiscreteProperty("align.x","start"),y:this.addDiscreteProperty("align.y","top")},this.font=this.addDiscreteProperty("font","Helvetica,Arial"),this.text=this.addStringProperty("text")}return d(e,t),e.prototype.render=function(t,e,n,i){var r,o;return r=this.getBoundingBox(t),o=e.camera.getWorldRect(),o[0]-=n,o[1]-=i,o[2]-=n,o[3]-=i,r[2]>o[0]&&r[0]<o[2]&&r[3]>o[1]&&r[1]<o[3]&&(t.font="12px "+this.font.value,e.setFillColor(this.color.value),t.save(),t.scale(this.size.value/12,this.size.value/12),t.textAlign=this.align.x.value,t.textBaseline=this.align.y.value,t.fillText(this.text.value,this.position.x.value/(this.size.value/12),this.position.y.value/(this.size.value/12)),t.restore(),this.selected)?this.drawBoundingBox(t,e):void 0},e.prototype.getWidth=function(t){return void 0===this.textWidth&&(t.font="12px "+this.font.value,t.save(),t.setTransform(1,0,0,1,0,0),this.textWidth=t.measureText(this.text.value).width,t.restore()),this.textWidth},e.prototype.getBoundingBox=function(t){var e,n,i,r;switch(n=this.getWidth(t)*(this.size.value/12),e=this.size.value,this.align.x.value){case"start":i=0;break;case"end":i=n;break;case"center":i=n/2;break;default:i=0}switch(this.align.y.value){case"top":r=0;break;case"end":r=e;break;case"middle":r=e/2;break;default:r=0}return[this.position.x.value-i,this.position.y.value-r,this.position.x.value+n-i,this.position.y.value+e-r]},e}(o)}(),function(){var t,e,n,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e=function(t){function e(t,n,i){var r;switch(this.modifiers=n,this.extra=i,e.__super__.constructor.apply(this,arguments),r=this,this.sortedData=void 0,this.filteredData=void 0,!1){case!hx.isFunction(t):this.source=t;break;case!hx.isString(t):this.source=function(e,n){return hx.json(t,e,function(t,i){if(t)return n(void 0),r.emit("error",t);switch(e.type){case"header":return n(i.head);case"rowCount":return n(i.count);case"rows":return n(i.rows,i.processedSize)}})};break;default:this.source=function(e,n){switch(e.type){case"header":return n(t.head);case"rowCount":return n(t.body.length);case"rows":return r.getProcessedData(function(t){return n(t.slice(e.startRow,e.endRow),t.length)});case"data":return n(t)}}}this.modifiers.on("sort-change","hx.extended-table",function(t){return function(e){return t.sortedData=void 0,t.emit("sort-change",e)}}(this)),this.modifiers.on("filter-change","hx.extended-table",function(t){return function(e){return t.filteredData=void 0,t.emit("filter-change",e)}}(this)),this.modifiers.pipe(this,void 0,["change"])}var n;return i(e,t),n=function(t){return t.slice()},e.prototype.getFilteredData=function(t){return void 0===this.filteredData&&this.source({type:"data"},function(t){return function(e){var i,r,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y;v=e.body,c=e.head,l=function(t){var e,n,i,r,o,s;for(o=t.toLowerCase(),s=c.columns,n=i=0,r=s.length;r>i;n=++i)if(e=s[n],e.value.toLowerCase()===o)return n;return void 0},h=!1,p={};for(o in t.modifiers.filters){r=t.modifiers.cellFilterValueLookup[o]||t.modifiers.cellValueLookup[o]||t.modifiers.defaultCellFilterValueLookup||t.modifiers.defaultCellValueLookup||function(t){return t},s=l(o),f=t.modifiers.filters[o];for(y in f)m=f[y],void 0!==m&&(h=!0,"string"==typeof m&&(m=m.split(" ").map(function(t){return t.trim()}).filter(function(t){return t})),null==p[y]&&(p[y]=[]),p[y].push({columnIndex:s,terms:m,cellLookup:r}))}if(h){for(a=function(t,e){var n,i,o,s,a,l,h,c,u,d;for(c=p[e],o=0,a=c.length;a>o;o++)if(i=c[o],n=i.columnIndex,r=i.cellLookup,h={caseSensitive:!1,searchValues:function(t){return t.columns?[r(t.columns[n])]:[r(t[n])]},sort:!1},hx.isArray(m))for(u=i.terms,s=0,l=u.length;l>s;s++)d=u[s],t=hx.filter[e](t,d,h);else t=hx.filter[e](t,m,h);return t},i=Object.keys(hx.filter),t.filteredData=n(v),g=[],u=0,d=i.length;d>u;u++)y=i[u],(null!=(x=p[y])?x.length:void 0)>0?g.push(t.filteredData=a(t.filteredData,y)):g.push(void 0);return g}return t.filteredData=v}}(this)),t(this.filteredData)},e.prototype.getSortedData=function(t){return void 0===this.filteredData&&(this.sortedData=void 0),this.getFilteredData(function(e){return function(i){var r,o;return void 0===e.sortedData&&(void 0!==e.modifiers.sortColumn&&void 0!==e.modifiers.sortDirection?(o=e.modifiers.sortColumn.toLowerCase(),r=e.modifiers.cellSortValueLookup[o]||e.modifiers.cellValueLookup[o]||e.modifiers.defaultCellSortValueLookup||e.modifiers.defaultCellValueLookup||function(t){return t},e.getColumnIndex(e.modifiers.sortColumn,function(t){var s,a;return a=e.modifiers.sortDirection?1:-1,e.sortedData=n(i),s=e.modifiers.columnCompare[o]||e.modifiers.defaultCompare,e.sortedData.sort(function(e,n){return s(r((e.columns||e)[t]),r((n.columns||n)[t]))*a})})):e.sortedData=i),t(e.sortedData)}}(this))},e.prototype.getProcessedData=function(t){return this.getSortedData(t)},e.prototype.getHeader=function(t){return this.source({type:"header",extra:this.extra},t)},e.prototype.getRows=function(t,e,n){return this.source({type:"rows",startRow:t,endRow:e,filters:this.modifiers.filters,sortColumn:this.modifiers.sortColumn,sortDirection:this.modifiers.sortDirection,extra:this.extra},n)},e.prototype.getRowCount=function(t){return this.source({type:"rowCount",extra:this.extra},t)},e.prototype.getColumnIndex=function(t,e){return this.getHeader(function(n){var i,r,o,s,a,l;for(a=t.toLowerCase(),l=n.columns,r=o=0,s=l.length;s>o;r=++o)if(i=l[r],i.value.toLowerCase()===a)return void e(r);return e(void 0)})},e}(hx.EventEmitter),n=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),t=this,this.filters={},this.sortDirection=void 0,this.sortColumn=void 0,this.defaultCellValueLookup=void 0,this.defaultCellFilterValueLookup=void 0,this.defaultCellSortValueLookup=void 0,this.cellValueLookup={},this.cellFilterValueLookup={},this.cellSortValueLookup={},this.columnCompare={},this.defaultCompare=void 0}var n;return i(e,t),n=function(t){switch(t){case"ascending":case"asc":case!0:return!0;case"descending":case"desc":case!1:return!1;default:return void 0}},e.prototype.sort=function(t,e,i){var r;return e=n(e),r=!1,1===arguments.length?(this.sortDirection=function(){switch(!1){case this.sortColumn===t:return!0;case this.sortDirection!==!0:return!1;case this.sortDirection!==!1:return void 0;default:return!0}}.call(this),this.sortColumn=t,r=!0):(this.sortDirection!==e||this.sortColumn!==t)&&(this.sortDirection=e,this.sortColumn=t,void 0===this.sortColumn&&(this.sortDirection=void 0),r=!0),r?(this.emit("sort-change",{column:this.sortColumn,direction:this.sortDirection}),this.emit("change",{callback:i})):void 0},e.prototype.filter=function(t,e,n,i){var r,o,s;return null==n&&(n="contains"),void 0!==t&&(null==(r=this.filters)[t]&&(r[t]={}),o=this.filters[t][n]!==e,o&&(s=this.filters[t][n],this.filters[t][n]=e,this.emit("filter-change",{column:t,type:n,filter:e,oldFilter:s}),this.emit("change",{callback:i}))),this},e.prototype.addFilter=function(t,e,n,i){var r,o,s,a,l;for(null==n&&(n="contains"),a=e.split(" "),o=0,s=a.length;s>o;o++)r=a[o],void 0!==(null!=(l=this.filters[t])?l[n]:void 0)?-1===this.filters[t][n].indexOf(r)&&this.filter(t,this.filters[t][n]+" "+r,n,i):this.filter(t,r,n,i);return this},e.prototype.removeFilter=function(t,e,n,i){var r,o,s,a,l,h,c,u;if(r=function(t){var n,i,r,o,s;for(o=t.split(" ").map(function(t){return t.toLowerCase()}),s=e.split(" ").map(function(t){return t.toLowerCase()}),i=0,r=s.length;r>i;i++)n=s[i],o=o.filter(function(t){return t!==n});return o=o.join(" "),""===o?void 0:o},0===arguments.length)for(s in this.filters){a=this.filters[s];for(o in a)u=a[o],this.filter(s,void 0,o,i)}else if(2===arguments.length||void 0!==n)if(null==n&&(n="contains"),void 0===t){l=this.filters;for(s in l)u=l[s],this.filter(s,r(u[n]),n,i)}else void 0!==this.filters[t]&&this.filters[t][n]&&this.filter(t,r(this.filters[t][n]),n,i);else if(void 0===t)for(s in this.filters){h=this.filters[s];for(n in h)u=h[n],this.filter(s,r(u),n,i)}else if(void 0!==this.filters[t]){c=this.filters[t];for(n in c)u=c[n],this.filter(t,r(u),n,i)}return this},e}(hx.EventEmitter),t=function(t){function o(t,e){var i,r,s;null==e&&(e={}),o.__super__.constructor.apply(this,arguments),hx.component.register(t,this),this.options=hx.merge.defined({rowsPerPage:100,userSelectRowsPerPage:!1,showSorts:!0,showFilters:!0,showSelection:!1,rowSelectable:!0,singleSelectionMode:!1,rowSelectableLookup:function(t,e){return e(!0)},cellRenderers:{},alwaysMobile:!1,useResponsive:!0,allowHeaderWrap:!1,noDataMessage:"No Data",defaultCellValueLookup:void 0,defaultCellFilterValueLookup:void 0,defaultCellSortValueLookup:void 0,cellValueLookup:{},cellFilterLookup:{},cellSortValueLookup:{},defaultCompare:hx.sort.localeCompare(),columnCompare:{},enabledFilters:["exact","startsWith","less","greater","excludes"]},e),i=this._={selectedRows:[]},isNaN(this.options.rowsPerPage)&&(this.options.rowsPerPage=100),this.options.rowsPerPage=Math.max(this.options.rowsPerPage,1),i.container=hx.select(t).classed("hx-table-widget hx-layout hx-group hx-vertical",!0),i.tableWrapper=i.container.append("div")["class"]("hx-section hx-table-wrapper hx-no-margin"),i.tableMessage=i.container.append("div")["class"]("hx-section hx-table-message"),i.rowCountMessage=hx.select(document.createElement("div")),i.rowCountMessage.append("span"),i.rowCountMessage.append("a").text("(clear selection)").on("click","hx.extended-table",function(t){return function(e){return e.preventDefault(),t.clearSelection()}}(this)),i.controlContainer=i.container.append("div")["class"]("hx-group hx-horizontal hx-table-control-container"),i.rowsPerPageContainer=i.controlContainer.append("div")["class"]("hx-table-control-rows"),i.controlContainer.append("div")["class"]("hx-section hx-no-margin"),i.pageSelectContainer=i.controlContainer.append("div")["class"]("hx-table-control-page"),i.rowsPerPageContainer.append("div").text("Rows per page: "),i.initialRowsPerPage=this.options.rowsPerPage,s=i.rowsPerPageContainer.append("button")["class"]("hx-btn hx-btn-invisible").node(),i.rowsPerPageSelect=new hx.Picker(s,{ddClass:"hx-table-row-select-dropdown"}),i.rowsPerPageSelect.items([10,25,50,100,150,200,250,500,1e3]),i.rowsPerPageSelect.on("change","hx.extended-table",function(t){return function(e){return t.options.rowsPerPage=e,i.currentPage=1,i.pageSelect.value(1),l(t)}}(this)),r=i.pageSelectContainer.append("button")["class"]("hx-btn hx-btn-invisible").node(),i.pageSelect=new hx.Picker(r,{ddClass:"hx-table-page-select-dropdown"}),i.pageSelect.renderer(function(t,e){return hx.select(t).text(e.text).node()}),i.pageSelect.on("change","hx.extended-table",function(t){return function(e){return i.currentPage=e.value,l(t)}}(this)),i.pageSelectTotalRows=i.pageSelectContainer.append("span"),i.pageSelectBack=i.pageSelectContainer.append("button")["class"]("hx-btn hx-btn-invisible"),i.pageSelectBack.append("i")["class"]("fa fa-chevron-left"),i.pageSelectBack.on("click","hx.extended-table",function(t){return function(){var e;return e=i.currentPage,i.currentPage-=1,i.currentPage=Math.max(1,i.currentPage),e!==i.currentPage?l(t):void 0}}(this)),i.pageSelectForward=i.pageSelectContainer.append("button")["class"]("hx-btn hx-btn-invisible"),i.pageSelectForward.append("i")["class"]("fa fa-chevron-right"),i.pageSelectForward.on("click","hx.extended-table",function(t){return function(){var e;return e=i.currentPage,i.currentPage+=1,-1!==i.numPages&&(i.currentPage=Math.min(i.currentPage,i.numPages)),e!==i.currentPage?l(t):void 0}}(this)),i.modifiers=new n,i.modifiers.defaultCellValueLookup=this.options.defaultCellValueLookup,i.modifiers.defaultCellFilterValueLookup=this.options.defaultCellFilterValueLookup,i.modifiers.defaultCellSortValueLookup=this.options.defaultCellSortValueLookup,i.modifiers.cellValueLookup=a(this.options.cellValueLookup),i.modifiers.cellFilterValueLookup=a(this.options.cellFilterValueLookup),i.modifiers.cellSortValueLookup=a(this.options.cellSortValueLookup),i.modifiers.defaultCompare=this.options.defaultCompare,i.modifiers.columnCompare=this.options.columnCompare,i.feedChange=function(t){return function(e){return l(t,e),t.emit("change")}}(this),i.sortChange=function(t){return function(e){var n,r,o,s;return i.rendered&&(i.useMobileView||(s=i.header.columns.map(function(t){return t.value.toLowerCase()}),r=s.indexOf(e.column.toLowerCase()),-1!==r&&(h(i.tableWrapper.selectAll(".hx-table-sort-icon")),n=i.tableWrapper.select(".hx-table-header-sticky").selectAll(".hx-table-sort-icon"),o=n.node(r),h(hx.select(o),e.direction))),t.clearSelection()),i.pageSelect.value(1),t.emit("sort-change",e)}}(this),i.filterChange=function(t){return function(e){return i.pageSelect.value(1),t.clearSelection(),t.emit("filter-change",e)}}(this)}var s,a,l,h,c;return i(o,t),a=function(t){var e,n,i;n={};for(e in t)r.call(t,e)&&(i=t[e],n[e.toLowerCase()]=i);return n},o.prototype.setData=function(t,n,i,r,o){var s,a;return s=this._,null!=(a=s.feed)&&a.off(),s.modifiers.off(),i&&s.modifiers.sort(),r&&s.modifiers.removeFilter(),s.feed=new e(t,s.modifiers,n),s.feed.on("change","hx.extended-table",function(t){return s.feedChange(t.callback)}),s.feed.on("sort-change","hx.extended-table",s.sortChange),s.feed.on("filter-change","hx.extended-table",s.filterChange),s.newSource=!0,s.selectedRows=[],s.currentPage=1,s.rowsPerPageSelect.value(this.options.rowsPerPage),s.pageSelect.value(1),l(this,o),this},o.prototype.render=function(t){return l(this,t)},o.prototype.filter=function(t,e,n,i){return this._.modifiers.filter(t,e,n,i)},o.prototype.addFilter=function(t,e,n,i){return this._.modifiers.addFilter(t,e,n,i)},o.prototype.removeFilter=function(t,e,n,i){return this._.modifiers.removeFilter(t,e,n,i)},o.prototype.sort=function(t,e,n){return this._.modifiers.sort(t,e,n)},o.prototype.page=function(t,e){return this._.currentPage=hx.clamp(1,this._.numPages||t,t),this.render(e)},o.prototype.restoreSelected=function(t){var e,n,i;for(this.clearSelection(),e=0,i=t.length;i>e;e++)n=t[e],this._.selectedRows[n.index]=n.data;return l(this)},o.prototype.getSelected=function(){var t,e,n,i,r,o;for(i=this._.selectedRows,r=[],o=t=0,n=i.length;n>t;o=++t)e=i[o],e&&r.push({index:o,data:e});return r},o.prototype.clearSelection=function(){var t;return t=this._,t.tableWrapper.selectAll(".hx-table-row-selected").classed("hx-table-row-selected",!1),t.selectedRows=t.selectedRows.map(function(t){return!1}),c(this),this.emit("clearselection")},h=function(t,e){return t.classed("fa-sort-asc",e===!0).classed("fa-sort-desc",e===!1).classed("fa-unsorted",void 0===e)},c=function(t){var e,n,i,r,o,s,a,l,h,c;for(e=t._,c=e.selectedRows.filter(function(t){return t}).length,c>0?(void 0!==e.rowCount?e.rowCountMessage.select("span").text(c+" of "+e.rowCount+" rows selected "):(l=c>1?"s":"",e.rowCountMessage.select("span").text(c+" row"+l+" selected ")),e.tableMessage.node().appendChild(e.rowCountMessage.node())):e.tableMessage.text(""),o=0,h=e.startRowIndex,n=h+e.rows.length,i=r=s=h,a=n;a>=r;i=r+=1)e.selectedRows[i]&&o++;return e.tableWrapper.selectAll("thead").select(".hx-table-header-row").classed("hx-table-row-selected",o>0)},s=function(t,e,n,i){var r,o,s,a,l,h,c;return r=i._,a={},l={},h={},c=function(t){var e,o,s,c,u,d,p,f,x,g,v,m,y,b;if(o=this,s=hx.select(t).classed("hx-table-filter-dropdown",!0),e=function(t,e){var s,c,u,d,p,f;return d=void 0,f=function(t){return h[e]=a[e].value(),r.modifiers.filter(n,t,e)},"contains"!==e?(p="greater"===e||"less"===e?e+" than":"startsWith"===e?"Starts with":e,p=p.charAt(0).toUpperCase()+p.slice(1),c=p+" filters..."):c="Filters...",l[e]=t.append("div").classed("hx-table-input-group hx-input-group",!0),a[e]=l[e].append("input").attr("placeholder",c).value(h[e]||(null!=(u=r.modifiers.filters[n])?u[e]:void 0)||""),"regex"===e?a[e].on("input","hx.extended-table",function(t){return function(){return clearTimeout(d),d=setTimeout(function(){var t,n,i,r;if(r=a[e].value(),a[e].style("border-color",""),r.length>0){try{i=new RegExp(r)}catch(n){t=n}return t?a[e].style("border-color","red"):f(i)}return f()},200)}}(this)):a[e].on("input","hx.extended-table",function(t){return clearTimeout(d),d=setTimeout(function(){return f(a[e].value())},200)}).on("keydown","hx.extended-table",function(t){var e;return e=t.keyCode?t.keyCode:t.which,27===e&&f(),13===e||27===e?o.hide():void 0}),s=l[e].append("button").attr("type","button")["class"]("hx-btn hx-negative"),s.append("i")["class"]("fa fa-times"),s.on("click","hx.extended-table",function(){return a[e].value(""),f(""),0===i.options.enabledFilters.length?o.hide():void 0})},e(s,"contains"),i.options.enabledFilters.length>0){for(g=!1,x=function(t,e){var n;return n=t?"Less":"More",f.text(n),e?p.style("display",t?"block":"none"):p.morph()["with"](t?"expandv":"collapsev",150).go(),g=t},f=s.append("div")["class"]("hx-table-more-filters-link").append("a"),p=s.append("div")["class"]("hx-table-more-filters"),x(!1,!0),f.on("click","hx.extended-table",function(){return x("none"===p.style("display"))}),v=r.modifiers.filters[n],m=i.options.enabledFilters,b=[],u=0,d=m.length;d>u;u++)c=m[u],"contains"!==c?((null!=(y=h[c])?y.length:void 0)>0&&g===!1&&x(!0,!0),b.push(e(p,c))):b.push(void 0);return b}},o=r.useMobileView?"lblt":"rbrt",s=new hx.Dropdown(t,c,{align:o,spacing:0}),s.on("show","hx.extended-table",function(){return r.filterDropdown=s,a.contains.node().focus()}),hx.select(t).off("click","hx.dropdown"),hx.select(e).on("click","hx.extended-table",function(t){return t.stopPropagation(),s.toggle()})},l=function(t,e){var n,i,r,o,l,u,d,p,f,x,g,v,m,y,b,w,k,_,S,M,C,P,T,D,A;return n=t._,n.modifiers.defaultCellValueLookup=t.options.defaultCellValueLookup,n.modifiers.defaultCellFilterValueLookup=t.options.defaultCellFilterValueLookup,n.modifiers.defaultCellSortValueLookup=t.options.defaultCellSortValueLookup,n.modifiers.cellValueLookup=a(t.options.cellValueLookup),n.modifiers.cellFilterValueLookup=a(t.options.cellFilterValueLookup),n.modifiers.cellSortValueLookup=a(t.options.cellSortValueLookup),n.modifiers.defaultCompare=t.options.defaultCompare,n.modifiers.columnCompare=t.options.columnCompare,n.lastRowSelected,n.shiftWasDown=!1,S=t.options.showSelection,w=null!=t.options.collapsibleRow,_=t.options.rowSelectable&&S&&!w,T=t.options.showSorts,r=t.options.showFilters,P=t.options.singleSelectionMode,t.options.alwaysMobile?n.useMobileView=!0:t.options.useResponsive?(n.useMobileView=n.container.width()<480,n.currentView=n.useMobileView,n.responsiveListenerAdded||(n.responsiveListenerAdded=!0,n.container.on("resize","hx.extended-table.responsive",function(e){return function(){return n.container.width()>0&&n.currentView!==n.container.width()<480?(n.newSource=!0,t.render()):void 0}}(this)))):n.useMobileView=!1,n.container.on("resize","hx.extended-table.header",function(){return o(function(){})}),i=function(t){return n.container.classed("hx-table-loading",!0),setTimeout(t,0)},u=function(t){var e;return"function"==typeof n.getHeaderCbCanceller&&n.getHeaderCbCanceller(),e=!1,n.getHeaderCbCanceller=function(t){return function(){return e=!0}}(this),n.feed.getHeader(function(i){return function(i){return e?void 0:(n.getHeaderCbCanceller=void 0,n.header=i,t())}}(this))},d=function(t){var e;return"function"==typeof n.getRowCountCbCanceller&&n.getRowCountCbCanceller(),e=!1,n.getRowCountCbCanceller=function(t){return function(){return e=!0}}(this),n.feed.getRowCount(function(i){return e?void 0:(n.getRowCountCbCanceller=void 0,n.rowCount=i,0===i&&(S=!1,w=!1,_=!1,T=!1,r=!1),t())})},A=function(e){var i,r,o,s,a,l,h,c;if(c=t._.rowsPerPageSelect.items(),-1===c.indexOf(t.options.rowsPerPage)&&(c.push(t.options.rowsPerPage),c=c.sort(function(t,e){return t-e})),t._.rowsPerPageSelect.items(c),t._.rowsPerPageSelect.value(t.options.rowsPerPage),n.pageSelectContainer.classed("hx-no-rows",null==n.processedSize),n.numPages=-1,a="",n.processedSize>0){for(a="of "+n.processedSize,r=[],n.numPages=Math.ceil(n.processedSize/t.options.rowsPerPage),i=o=1,h=n.numPages;h>=1?h>=o:o>=h;i=h>=1?++o:--o)s=i*t.options.rowsPerPage,r.push({text:s+1-t.options.rowsPerPage+" - "+Math.min(s,n.processedSize),value:i});t._.pageSelect.items(r),t._.pageSelect.value(n.currentPage||1)}else l=n.currentPage*t.options.rowsPerPage,a=l+1-t.options.rowsPerPage+" - "+l;return n.pageSelectTotalRows.text(a),n.pageSelectBack.classed("hx-table-btn-disabled",1===n.currentPage),n.pageSelectForward.classed("hx-table-btn-disabled",n.currentPage===n.numPages),n.controlContainer.classed("hx-table-control-display-rows",t.options.userSelectRowsPerPage&&(n.processedSize>0||null==n.processedSize)),n.controlContainer.classed("hx-table-control-display-page",n.currentPage>1||n.numPages>1||-1===n.numPages&&n.rows.length>0),e()},l=function(e){var i,r,o;return"function"==typeof n.getRowsCbCanceller&&n.getRowsCbCanceller(),i=!1,n.getRowsCbCanceller=function(t){return function(){return i=!0}}(this),r=n.currentPage-1||0,o=t.options.rowsPerPage,n.feed.getRows(r*o,(r+1)*o,function(t,r){return i?void 0:(n.getRowsCbCanceller=void 0,n.rows=t,n.processedSize=r,e())})},f=function(t){var e;return n.newSource&&(n.tableWrapper.selectAll("table").remove(),e=n.tableWrapper.append("table")["class"]("hx-table hx-table-non-sticky"),e.append("thead").append("tr")["class"]("hx-table-header-row"),e.append("tbody"),e=n.tableWrapper.append("table")["class"]("hx-table hx-table-header-sticky"),e.append("thead").append("tr")["class"]("hx-table-header-row")),t()},k=function(t){var e;return e=t.append("th")["class"]("hx-table-cell hx-table-selection"),e.append("i")["class"]("fa fa-check"),e.node()},p=function(t,e){var n,i;return!P&&0===e&&S?k(this):e>0&&S||!S?(n=this.append("th"),i=n.append("div"),i.append("span")["class"]("hx-table-header-name"),i.append("i")["class"]("hx-table-sort-icon fa fa-unsorted"),i.append("i")["class"]("hx-table-filter-icon fa fa-search"),n.node()):this.append("th").node()},g=function(e){var i,o,s,a,l,c,u,d;return c=function(e,i,o){return 0!==o&&S||!S?(this.select(".hx-table-header-name").text(e.value),
this.classed("hx-table-header-allow-wrap",null!=e.allowWrap?e.allowWrap:t.options.allowHeaderWrap),e.value===n.modifiers.sortColumn&&h(this.select(".hx-table-sort-icon"),n.modifiers.sortDirection),this.classed("hx-table-header-sort",T),this.classed("hx-table-header-filter",r)):void 0},l=function(t,e,n,i,r){return S&&t.unshift(void 0),hx.select(e).view("th","th").update(function(t,e,i){var r;return this.select(".hx-table-header-grouped-cell").remove(),null!=t&&(r=t[1]?t[1]:0===n?t[0]:void 0,this.attr("colspan",t[2]),null!=r&&r.length>0&&this.append("div")["class"]("hx-table-header-grouped-cell").text(r)),t}).apply(t),e},n.header.columns.some(function(t){return null!=(null!=t?t.groups:void 0)})&&(a=n.header.columns,o=a.map(function(t){var e;return 1*((null!=t&&null!=(e=t.groups)?e.length:void 0)||0)}),i=hx.max(o),s=function(){d=[];for(var t=0;i>=0?i>t:t>i;i>=0?t++:t--)d.push(t);return d}.apply(this).map(function(t){return a.map(function(e){var n,r;if(null!=(null!=e?e.groups:void 0)){for(n=e.groups.slice(0),r=n[0];n.length<i;)n.unshift("");return[n.slice(0,+t+1||9e9).toString(),n[t]]}return["",""]})}),u=s.map(function(t){var e,n;return t.reduce(function(t,e){return e[0]===t[t.length-1][0]?(t[t.length-1][2]+=1,t):t.concat([[e[0],e[1],1]])},[[null!=(e=t[0])?e[0]:void 0,null!=(n=t[0])?n[1]:void 0,0]])}),n.tableWrapper.select("table").select("thead").view(".hx-table-header-group-row","tr").update(function(t,e,n){return l(t,e,n,i,u)}).apply(u)),a=S?[void 0].concat(n.header.columns):n.header.columns,n.tableWrapper.select("table").select("thead").select(".hx-table-header-row").view("th").enter(p).update(c).apply(a),e()},b=function(e){var i,o,a,l,u;return l=function(e,n){var i,o;return i=p.call(this,e,n),!P&&0===n&&S?hx.select(i).on("click","hx.extended-table",function(e){var n,r;return e.stopPropagation(),r=hx.select(i.parentNode),n=r.classed("hx-table-row-selected"),t._.lastRowSelected=void 0,M(0,t._.rows.length-1,!n),c(t)}):(r&&n>0&&S||!S)&&(o=hx.select(i).select(".hx-table-filter-icon").node(),null!=o&&s(i,o,e.value.toLowerCase(),t)),i},u=function(e,i,o){var s;return 0===o&&S&&S||(this.select(".hx-table-header-name").text(e.value),this.classed("hx-table-header-allow-wrap",null!=e.allowWrap?e.allowWrap:t.options.allowHeaderWrap),e.value===n.modifiers.sortColumn&&h(this.select(".hx-table-sort-icon"),n.modifiers.sortDirection),this.classed("hx-table-header-sort",T),this.classed("hx-table-header-filter",r)),s=function(t){return T?(t.stopPropagation(),n.modifiers.sort(e.value)):void 0},this.select(".hx-table-header-name").on("click","hx.extended-table",s),this.select(".hx-table-sort-icon").on("click","hx.extended-table",s)},a=n.tableWrapper.select(".hx-table-header-sticky"),a.style("top",n.tableWrapper.node().scrollTop+"px"),o=S?[void 0].concat(n.header.columns):n.header.columns,a.select("thead").select(".hx-table-header-row").view("th").enter(l).update(u).apply(o),a.selectAll(".hx-table-header-group-row").remove(),i=n.tableWrapper.selectAll(".hx-table-header-group-row"),i.empty()||i.forEach(function(t){return a.select(".hx-table-header-row").insertBefore(t.node().cloneNode(!0))}),n.tableWrapper.on("scroll","hx.extended-table",function(t){return a.style("top",n.tableWrapper.node().scrollTop+"px")}),e()},y=function(t){return n.useMobileView?(n.tableWrapper.selectAll("thead").remove(),t()):g(function(){return b(function(){return t()})})},C=function(e,i,r,o,s,a){var l,h,u;if(!P&&o&&null!=n.lastRowSelected)n.shiftWasDown=!0,M(n.lastRowSelected,r),n.lastRowSelected=r;else{if(P&&n.lastRowSelected!==r&&t.clearSelection(),n.shiftWasDown=!1,l=e.classed("hx-table-row-selected"),null!=r&&(n.lastRowSelected=r),h=null!=s?!s:e.classed("hx-table-row-selected"),!h!==l){if(u=n.rows[r],!h)return void(u.unselectable||t.options.rowSelectableLookup(u,function(r){return!r||(n.selectedRows[i]=u,t.has("rowselect")&&t.emit("rowselect",{rowData:u,selected:!h}),e.classed("hx-table-row-selected",!h),a||P)?void 0:c(t)}));delete n.selectedRows[i],t.has("rowselect")&&t.emit("rowselect",{rowData:u,selected:!h})}else n.selectedRows[i]=void 0;e.classed("hx-table-row-selected",!h)}return void(a||P||c(t))},M=function(e,i,r){var o,s,a,l,h,u,d,p,f,x,g,v;for(h=i,e>i&&(i=e,e=h,h=i),g=function(t){return!hx.select(t).classed("hx-table-collapsible-content-row-hidden")&&!hx.select(t).classed("hx-table-collapsible-content-row")},x=n.tableWrapper.select("tbody").selectAll("tr").nodes.filter(g).map(hx.select),o=[],s=a=d=e,p=i;p>=a;s=a+=1)f=n.startRowIndex+s,o.push({row:x[s],index:f,isSelected:void 0!==n.selectedRows[f]});for(null==r&&o.some(function(t){return!t.isSelected&&t.index!==n.lastRowSelected})&&(r=!0),null==r&&n.shiftWasDown&&(r=!1),l=0,u=o.length;u>l;l++)v=o[l],(v.index!==n.lastRowSelected||n.shiftWasDown)&&C(v.row,v.index,v.index-n.startRowIndex,!1,r,!0);return void c(t)},x=function(e){var i,r,o,s,a,l,h,u,d,p,f,x;s=t.options.defaultCellRenderer||function(t,e,n){return this.text(t)},p=function(e,i,r,o,s){var a,l;return a=n.startRowIndex+o,l=hx.select(i.parentNode),l.classed("hx-table-row-selected",!!n.selectedRows[a]),this.on("click",function(e){return e.stopPropagation(),s.unselectable?void 0:t.options.rowSelectableLookup(s,function(t){return t?C(l,a,o,e.shiftKey):void 0})})},l={},h=t.options.cellRenderers;for(a in h)x=h[a],l[a.toLowerCase()]=x;return u=n.header.columns.map(function(t){return l[t.value.toLowerCase()]||s}),S&&(u=[p].concat(u)),r=function(t,e){return 0===e&&S?k(this,t,e):this.append("td")["class"]("hx-table-cell").node()},o=function(t,e,n,i,r){return u[n].call(this,t,e,n,i,r)},d=function(e,i,s){var a,l,h,c,u,d,p;return d=s,n.startRowIndex=(n.currentPage-1)*t.options.rowsPerPage,c=e.columns?e.columns:e,u=S?[void 0].concat(c):c,this.view(".hx-table-cell").enter(r).update(function(t,n,i){return o.call(this,t,n,i,d,e)}).apply(u),this.on("click","rowclick",function(n){return function(){return t.emit("rowclick",{data:e,node:n.node()})}}(this)),this.classed("hx-table-row-unselectable",_&&e.unselectable),this.classed("hx-table-row-collapsible",w),_&&this.on("click",function(i){return function(r){return r.stopPropagation(),e.unselectable?void 0:t.options.rowSelectableLookup(e,function(t){return t?C(i,n.startRowIndex+s,d,r.shiftKey):void 0})}}(this)),w?(h=!1,a=function(n){var i,r,o,s,a;return r=hx.select(document.createElement("tr")).classed("hx-table-collapsible-content-row",!0),o=hx.select(document.createElement("tr")).classed("hx-table-collapsible-content-row-hidden",!0),i=r.append("td").attr("colspan","99").style("padding","10px").append("div").classed("hx-table-collapsible-content",!0),s=n.nextElementSibling,a=n.parentNode,s?(a.insertBefore(o.node(),s),a.insertBefore(r.node(),s)):(h=!0,r.classed("hx-lastrow",!0),a.appendChild(o.node()),a.appendChild(r.node())),t.options.collapsibleRow(i.node(),e),{contentRow:r,hiddenRow:o,visible:!1}},p=function(){var t;return t=l,h&&hx.select(i).classed("hx-lastrow",t.visible),t.visible?(t.visible=!1,t.contentRow.style("display","none"),t.hiddenRow.style("display","none")):(t.visible=!0,t.contentRow.style("display",""),t.hiddenRow.style("display",""))},l=void 0,this.on("click",function(n){return function(i){return null==l&&(l=a(n.node())),p(),t.has("rowcollapsible")?t.emit("rowcollapsible",{rowData:e,isOpen:l.visible}):void 0}}(this))):void 0},n.tableWrapper.select(".hx-table-non-sticky").classed("hx-table-mobile",!1),n.tableWrapper.selectAll(".hx-table-collapsible-content-row").remove(),n.tableWrapper.selectAll(".hx-table-collapsible-content-row-hidden").remove(),n.rows.length>0?(i=n.tableWrapper.select(".hx-table-non-sticky").select("tbody"),i.select(".hx-table-no-data").remove(),i.view("tr","tr").update(d).apply(n.rows)):(f=n.tableWrapper.select(".hx-table-non-sticky"),f.select("tbody").remove(),f.append("tbody").append("tr")["class"]("hx-table-no-data").append("td").attr("colspan",99).text(t.options.noDataMessage)),c(t),e()},v=function(e){var i,o,a,l,u,d,p,f,x;return o=t.options.defaultCellRenderer||function(t,e,n){return this.text(t)},a=n.header.columns.map(function(e){return t.options.cellRenderers[e.value.toLowerCase()]||o}),i=function(t,e,n,i){return a[n].call(this,t,e,n,i)},l=function(e,n,i){var r,o,a,l;return a=this.append("tr")["class"]("hx-table-responsive-row"),0===n&&a.classed("hx-table-responsive-row-first",!0),l=a.append("th"),r=l.append("div"),o=r.append("i")["class"]("hx-table-filter-icon fa fa-search").node(),s(o,o,e[0].toLowerCase(),t),r.append("i")["class"]("hx-table-sort-icon fa"),r.append("span")["class"]("hx-table-header-name"),a.append("td"),a.node()},u=function(e,o,s,a){var l,c,u,d,p;return d=this.select("td"),d.attr("rowspan",""),d.style("display",""),i.call(d,e[1],d.node(),s,a),p=this.select("th"),this.select(".hx-table-header-name").text(e[0]),l=n.header.columns[s].allowWrap,p.classed("hx-table-header-allow-wrap",null!=l?l:t.options.allowHeaderWrap),p.classed("hx-table-header-sort",T&&0===a),p.classed("hx-table-header-filter",r&&0===a),u=function(t){return T?(t.stopPropagation(),n.modifiers.sort(e[0])):void 0},p.select(".hx-table-header-name").on("click","hx.extended-table",u),p.select(".hx-table-sort-icon").on("click","hx.extended-table",u),c=n.modifiers.sortColumn===e[0]?n.modifiers.sortDirection:void 0,h(this.select(".hx-table-sort-icon"),c)},d=function(e,i,o,s){var a,l,c,u;return c=this.select("td"),0===o?(c.text(t.options.noDataMessage),c.style("display",""),c.attr("rowspan",n.header.columns.length+1)):(c.text(""),c.style("display","none")),u=this.select("th"),this.select(".hx-table-header-name").text(e),a=n.header.columns[o].allowWrap,u.classed("hx-table-header-allow-wrap",null!=a?a:t.options.allowHeaderWrap),u.classed("hx-table-header-sort",T&&0===s),u.classed("hx-table-header-filter",r&&0===s),l=n.modifiers.sortColumn===e[0]?n.modifiers.sortDirection:void 0,h(this.select(".hx-table-sort-icon"),l)},p=function(){var t,e;return t=this.append("tbody"),S&&(e=t.append("tr").append("th")["class"]("hx-table-selection").attr("rowspan",n.header.columns.length+1),e.append("i")["class"]("fa fa-check")),t.node()},f=function(e,i,r){var o,s,a,h,c,p,f;return h=n.header.columns.map(function(t){return t.value}),p=r,n.startRowIndex=(n.currentPage-1)*t.options.rowsPerPage,a=(null!=e?e.columns:void 0)?e.columns:e,this.classed("hx-table-no-data",void 0===a),void 0===a?this.view(".hx-table-responsive-row").enter(function(t,e){return l.call(this,t,e,p)}).update(function(t,e,n){return d.call(this,t,e,n,p)}).apply(h):this.view(".hx-table-responsive-row").enter(function(t,e){return l.call(this,t,e,p)}).update(function(t,e,n){return u.call(this,t,e,n,p)}).apply(hx.zip([h,a])),this.on("click","rowclick",function(n){return function(){return t.emit("rowclick",{data:e,node:n.node()})}}(this)),c=function(i){return function(o){return void 0===a||(o.stopPropagation(),e.unselectable)?void 0:t.options.rowSelectableLookup(e,function(t){return t?C(i,n.startRowIndex+r,p,o.shiftKey):void 0})}}(this),this.classed("hx-table-row-unselectable",e.unselectable),S&&this.select(".hx-table-selection").on("click","hx.extended-table",c),_&&this.on("click",c),w?(o=function(n){var i,r,o;return r=hx.select(document.createElement("tr")).classed("hx-table-collapsible-content-row",!0),o=hx.select(document.createElement("tr")).classed("hx-table-collapsible-content-row-hidden",!0),i=r.append("td").attr("colspan","99").style("padding","10px").append("div").classed("hx-table-collapsible-content",!0),r.classed("hx-lastrow",!0),n.appendChild(o.node()),n.appendChild(r.node()),t.options.collapsibleRow(i.node(),e),{contentRow:r,hiddenRow:o,visible:!1}},f=function(t){return function(){var e,n;return e=s,n=t.selectAll(".hx-table-responsive-row"),hx.select(n.node(n.size()-1)).classed("hx-lastrow",e.visible),e.visible?(e.visible=!1,e.contentRow.style("display","none"),e.hiddenRow.style("display","none")):(e.visible=!0,e.contentRow.style("display",""),e.hiddenRow.style("display",""))}}(this),s=void 0,this.on("click",function(n){return function(i){var r;return null!=s&&(r=s.contentRow.node().contains(i.target)),!r&&(null==s&&(s=o(n.node())),f(),t.has("rowcollapsible"))?t.emit("rowcollapsible",{rowData:e,isOpen:s.visible}):void 0}}(this))):void 0},n.tableWrapper.select(".hx-table-non-sticky").classed("hx-table-mobile",!0),x=n.rows.length>0?n.rows:[void 0],n.tableWrapper.on("scroll","hx.extended-table",function(t){return null!=n.filterDropdown?(n.filterDropdown.hide(),n.filterDropdown=void 0):void 0}),n.tableWrapper.select(".hx-table-non-sticky").select("tbody").remove(),n.tableWrapper.select(".hx-table-non-sticky").view("tbody").enter(p).update(f).apply(x),c(t),e()},m=function(t){return n.useMobileView?v(t):x(t)},o=function(t){var e,i;return i=n.tableWrapper.select(".hx-table-non-sticky").style("width"),n.tableWrapper.select(".hx-table-header-sticky").style("width",i),e=n.tableWrapper.select(".hx-table-non-sticky").select("thead").select(".hx-table-header-row").selectAll("th").style("width"),n.tableWrapper.select(".hx-table-header-sticky").select("thead").select(".hx-table-header-row").selectAll("th").forEach(function(t,n){return t.style("width",e[n])}),t()},D=function(t){return n.newSource=!1,n.container.classed("hx-table-loading",!1),n.rendered=!0,t()},i(function(){return u(function(){return d(function(){return l(function(){return A(function(){return f(function(){return m(function(){return y(function(){return o(function(){return D(function(){return t.emit("render"),"function"==typeof e?e():void 0})})})})})})})})})}),t},o}(hx.EventEmitter),hx.Table=t}(),function(){var t,e,n=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};hx.supports("touch")&&(t=["INPUT","TEXTAREA","SELECT","LABEL"],e=function(e,i){var r,o,s,a,l,h,c,u,d,p;return c=r=s=null,a=10,o=function(t){var e,n;return e=t.originalEvent||t,n=e.touches||e.targetTouches,n?[n[0].pageX,n[0].pageY]:void 0},l=void 0,h=void 0,p=function(t){var e;return t.touches&&t.touches.length>1||t.targetTouches&&t.targetTouches.length>1?!1:(e=o(t),l=e[0],h=e[1],e)},d=function(t){var e;return!r&&(e=o(t),e&&(Math.abs(h-e[1])>a||Math.abs(l-e[0])>a))?r=!0:void 0},u=function(o){var a;return clearTimeout(s),s=setTimeout(function(){return c=!1,r=!1},1e3),o.which&&o.which>1||o.shiftKey||o.altKey||o.metaKey||o.ctrlKey?void 0:r||c&&c!==o.type?void(r=!1):(!e.contains(o.target)||(a=o.target.nodeName,n.call(t,a)>=0)||o.preventDefault(),c=o.type,i.emit("click",o))},e.addEventListener("touchstart",p),e.addEventListener("touchmove",d),e.addEventListener("touchend",u),function(){return e.removeEventListener("touchstart",p),e.removeEventListener("touchmove",d),e.removeEventListener("touchend",u)}},hx.select.addEventAugmenter({name:"click",setup:e}))}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function i(t){this.selector=t,i.__super__.constructor.apply(this,arguments),hx.component.register(this.selector,this),this.formId="form-"+hx.randomId()+"-",this.properties=new hx.Map,hx.select(this.selector).classed("hx-form",!0).on("keypress","hx.form-builder",function(t){var e;return e=hx.select(t.target||t.srcElement),13===t.keyCode&&"submit"!==e.attr("type")&&"textarea"!==e.attr("type")?t.preventDefault():void 0})}return e(i,t),i.prototype.add=function(t,e,n,i){var r,o,s,a,l;return s=this.formId+t.split(" ").join("-"),r=hx.select(this.selector).append("div"),r.append("label").attr("for",s).text(t),l=r.append(n).attr("id",s),o=i.call(l)||{},null!=o.key?(a=o.key,delete o.key,this.properties.set(a,{type:e,node:l.node(),extras:o})):this.properties.set(t,{type:e,node:l.node(),extras:o}),this},i.prototype.addText=function(t,e){return null==e&&(e={}),null==e.type&&(e.type="text"),null==e.attrs&&(e.attrs=[]),this.add(t,"text","input",function(){var t,n,i,r,o;for(o=this.attr("type",e.type),null!=e.autoCompleteData&&"password"!==e.type&&"number"!==e.type&&new hx.AutoComplete(o.node(),e.autoCompleteData,null!=e.autoCompleteOptions?e.autoCompleteOptions:e.autoCompleteOptions=void 0),null!=e.placeholder&&o.attr("placeholder",e.placeholder),e.required&&o.attr("required",e.required),e.disabled&&o.attr("disabled",""),r=e.attrs,n=0,i=r.length;i>n;n++)t=r[n],o.attr(t.type,t.value);return null!=e.validator&&(o.node().oninput=function(t){return function(t){return t.target.setCustomValidity(e.validator(t)||"")}}(this)),{required:e.required,key:e.key}})},i.prototype.addTextArea=function(t,e){return null==e&&(e={}),null==e.type&&(e.type="textarea"),null==e.attrs&&(e.attrs=[]),this.add(t,"textarea","textarea",function(){var t,n,i,r,o;for(o=this.attr("type",e.type),null!=e.placeholder&&o.attr("placeholder",e.placeholder),e.required&&o.attr("required",e.required),e.disabled&&o.attr("disabled",""),r=e.attrs,n=0,i=r.length;i>n;n++)t=r[n],o.attr(t.type,t.value);return null!=e.validator&&(o.node().oninput=function(t){return function(t){return t.target.setCustomValidity(e.validator(t)||"")}}(this)),{required:e.required,key:e.key}})},i.prototype.addEmail=function(t,e){return null==e&&(e={}),e.type="email",this.addText(t,e)},i.prototype.addUrl=function(t,e){return null==e&&(e={}),e.type="url",this.addText(t,e)},i.prototype.addNumber=function(t,e){return null==e&&(e={}),e.type="number",e.attrs=[{type:"step",value:e.step}],null!=e.min&&e.attrs.push({type:"min",value:e.min}),null!=e.max&&e.attrs.push({type:"max",value:e.max}),this.addText(t,e)},i.prototype.addPassword=function(t,e){return null==e&&(e={}),e.type="password",this.addText(t,e)},i.prototype.addSelect=function(t,e,n){return null==n&&(n={}),hx.deprecatedWarning("Form.addSelect","use Form.addPicker instead"),this.add(t,"select","div",function(){var t,i,r,o,s;return t="hx-btn",i=this.append("button"),n.disabled?i.attr("disabled",""):null!=n.buttonClass&&(t+=" "+n.buttonClass),s=hx.merge({},n.selectOptions),e.length>0&&(s.items=e),o=new hx.Select(i.node(),s),i.classed(t,!0).on("click","hx.form-builder",function(t){return t.preventDefault()}),"boolean"!=typeof n.required&&o.value(e[0]),n.required&&(r=this.append("input").style("margin","0.25em 0 0 0").style("padding",0).style("width","1.5em").style("height","1.5em").style("position","absolute").style("left","0.5em").style("top","13px").style("z-index",-1).attr("size",0),r.node().setCustomValidity("Please select a value from the list"),this.style("position","relative"),o.on("change","hx.form-builder",function(){return r.node().setCustomValidity("")})),{required:n.required,componentNode:i.node(),select:o,key:n.key}})},i.prototype.addPicker=function(t,e,n){return null==n&&(n={}),this.add(t,"select","div",function(){var t,i,r,o,s;return t="hx-btn",i=this.append("button"),n.disabled?i.attr("disabled",""):null!=n.buttonClass&&(t+=" "+n.buttonClass),o=hx.merge({},n.pickerOptions),e.length>0&&(o.items=e),s=new hx.Picker(i.node(),o),i.classed(t,!0).on("click","hx.form-builder",function(t){return t.preventDefault()}),"boolean"!=typeof n.required&&s.value(e[0]),n.required&&(r=this.append("input").style("margin","0.25em 0 0 0").style("padding",0).style("width","1.5em").style("height","1.5em").style("position","absolute").style("left","0.5em").style("top","13px").style("z-index",-1).attr("size",0),r.node().setCustomValidity("Please select a value from the list"),this.style("position","relative"),s.on("change","hx.form-builder",function(){return r.node().setCustomValidity("")})),{required:n.required,componentNode:i.node(),select:s,key:n.key}})},i.prototype.addCheckbox=function(t,e){return null==e&&(e={}),this.add(t,"checkbox","input",function(){return this.attr("type","checkbox"),null!=e.required&&this.attr("required",e.required),e.disabled&&this.attr("disabled",""),{required:e.required,key:e.key}})},i.prototype.addRadio=function(t,e,n){var i;return null==n&&(n={}),i=this,this.add(t,"radio","div",function(){var r,o,s,a,l,h,c;for(s=i.formId+t.split(" ").join("-"),r=0,o=0,l=e.length;l>o;o++)c=e[o],h=this.append("div")["class"]("hx-radio-container"),a=h.append("input").attr("type","radio").attr("name",s).attr("id",s+"-"+r).value(c),null!=n.required&&a.attr("required",n.required),n.disabled&&a.attr("disabled",""),h.append("label").attr("for",s+"-"+r).text(c),r+=1;return{required:n.required,key:n.key}})},i.prototype.addDatePicker=function(t,e){return null==e&&(e={}),this.add(t,"datepicker","div",function(){var t,n,i,r;return n=this.append("div").node(),t=new hx.DatePicker(n,e.datePickerOptions),e.disabled&&t.disable(),(null!=e.validStart||null!=e.validEnd)&&t.validRange(e.validStart,e.validEnd),null!=e.selectRange?(i=function(){return t.range()},r=function(e){return t.range(e.startDate,e.endDate,!1,!0)},null!=e.startDate&&null!=e.endDate&&t.range(e.startDate,e.endDate,!1,!0)):(i=function(){return t.date()},r=function(e){return t.date(e)}),{key:e.key,componentNode:n,getValue:i,setValue:r}}),this},i.prototype.addTimePicker=function(t,e){return null==e&&(e={}),this.add(t,"timepicker","div",function(){var t,n,i,r;return t=this.append("div").node(),r=new hx.TimePicker(t,e.timePickerOptions),e.disabled&&r.disable(),n=function(){return r.date()},i=function(t){return r.date(t)},{key:e.key,componentNode:t,getValue:n,setValue:i}}),this},i.prototype.addDateTimePicker=function(t,e){return null==e&&(e={}),this.add(t,"datetimepicker","div",function(){var t,n,i,r;return n=this.append("div").node(),t=new hx.DateTimePicker(n,e.dateTimePickerOptions),e.disabled&&t.disable(),i=function(){return t.date()},r=function(e){return t.date(e)},{key:e.key,componentNode:n,getValue:i,setValue:r}}),this},i.prototype.addSubmit=function(t,e){return hx.select(this.selector).append("button").attr("type","submit")["class"]("hx-btn hx-positive hx-form-submit").add(hx.detached("i")["class"](e)).add(hx.detached("span").text(" "+t)).on("click","hx.form-builder",function(t){return function(e){return e.preventDefault(),t.submit()}}(this)),this},i.prototype.addTagInput=function(t,e){var n;return null==e&&(e={}),n=this,this.add(t,"tagInput","div",function(){return new hx.TagInput(this.node(),e.tagInputOptions),{key:e.key}}),this},i.prototype.submit=function(){var t,e,n;return e=hx.validateForm(this.selector),n=e.valid,t=e.errors,n&&this.emit("submit",this.data()),this},i.prototype.data=function(t){var e,i,r,o,s,a;if(arguments.length>0){for(i in t)if(n.call(t,i)&&(a=t[i],this.properties.has(i)))switch(e=this.properties.get(i),r=e.node,e.type){case"checkbox":hx.select(r).prop("checked",a);break;case"radio":hx.select(r).selectAll("input").filter(function(t){return hx.select(t).value()===a}).prop("checked",!0);break;case"tagInput":s=hx.component(e.extras.componentNode||r),a.forEach(function(t){return s.add(t)});break;case"select":hx.component(e.extras.componentNode||r).value(a);break;case"datepicker":case"timepicker":case"datetimepicker":e.extras.setValue(a);break;default:hx.select(r).value(a)}return this}return o={},this.properties.forEach(function(t,e){return a=function(){switch(e.type){case"checkbox":return hx.select(e.node).prop("checked");case"radio":return hx.select(e.node).select("input:checked").value();case"tagInput":return hx.component(e.extras.componentNode||e.node).items();case"select":return hx.component(e.extras.componentNode||e.node).value();case"datepicker":case"timepicker":case"datetimepicker":return e.extras.getValue();default:return hx.select(e.node).value()}}(),o[t]=a}),o},i.prototype.component=function(t){var e,n;return null!=(n=this.properties.get(t))&&(e=n.extras.componentNode||n.node,null!=e)?hx.component(e):void 0},i}(hx.EventEmitter),hx.Form=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t){var e,r;this.selector=t,e=hx.select(this.selector),r=e.text(),e.text(""),this.textSelection=e.append("a")["class"]("hx-morph-toggle").text(r),e.append("div")["class"]("hx-morph-content hx-input-group").add(hx.detached("input")["class"]("hx-name")).add(hx.detached("button")["class"]("hx-btn hx-positive hx-confirm").add(hx.detached("i")["class"]("fa fa-check"))),n.__super__.constructor.call(this,this.selector,i,function(){})}var i;return e(n,t),i=function(t,e){return hx.select(e).select(".hx-name").value(hx.select(t).text()),hx.select(e).select(".hx-confirm").on("click","hx.inline-editable",function(t){return function(){var n;return n=hx.select(e).select(".hx-name").value(),t.textSelection.text(n),t.emit("change",{api:!1,value:n}),t.hide()}}(this))},n.prototype.value=function(t){return void 0!==t?(this.textSelection.text(t),this.emit("change",{api:!1,value:t})):this.textSelection.text()},n}(hx.InlineMorphSection),hx.InlineEditable=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var o,s;this.selector=t,e=hx.merge({renderer:void 0,items:[],contextClass:"hx-compliment",ddClass:void 0,noValueText:void 0,startValue:void 0},e),this.current=void 0,s=hx.select(this.selector),o=hx.detached("button")["class"]("hx-btn hx-inline-select "+e.contextClass).node(),this.textSelection=s.append("a")["class"]("hx-morph-toggle"),s.append("div")["class"]("hx-morph-content hx-input-group").add(o).add(hx.detached("button")["class"]("hx-btn hx-positive hx-confirm").add(hx.detached("i")["class"]("fa fa-check"))),this.select=new hx.Picker(o,{renderer:e.renderer,items:e.items,ddClass:e.ddClass,noValueText:e.noValueText}),null==e.renderer&&(e.renderer=this.select.renderer()),this.select.menu.dropdown.on("showstart","hx.inline-select",function(t){return function(){return t.detector.addException(t.select.menu.dropdown.dropdown.node())}}(this)),n.__super__.constructor.call(this,this.selector,i,r,e),null!=this.options.startValue&&this.value(this.options.startValue)}var i,r;return e(n,t),i=function(t,e){var n;return this.select.value((null!=(n=this.current)?n.value:void 0)||this.current),hx.select(e).select(".hx-confirm").on("click","hx.inline-select",function(t){return function(){return t.current=t.select.value(),t.textSelection.text(t.current.text||t.current),t.emit("change",{api:!1,value:t.current}),t.hide()}}(this))},r=function(t,e){},n.prototype.renderer=function(t){return null!=t?(this.options.renderer=t,this.select.renderer(this.options.renderer),this):this.options.renderer},n.prototype.items=function(t){return null!=t?(this.options.items=t,this.select.items(this.options.items),this):this.options.items},n.prototype.value=function(t){return arguments.length>0?(this.select.value(t),this.current=this.select.value(),this.textSelection.text(this.current.text||this.current),this.emit("change",{api:!0,value:this.current}),this):this.current},n}(hx.InlineMorphSection),hx.InlineSelect=t}(),function(){var t;t=function(){function t(t,e){var n,i,r,o,s,a;hx.component.register(t,this),this._=n={},n.data={total:0,completed:0},this.options=hx.merge({useMarker:!0,useTracker:!0,trackerWidth:.03,progressWidth:.175,markerSize:.01,markerInnerExtend:.01,markerOuterExtend:-.01,arcPadding:.02,markerPadding:.1,progressBackgroundCol:hx.color(hx.theme.palette.contrastCol).alpha(.05).toString(),progressCol:hx.theme.plot.positiveCol,trackerCol:hx.color(hx.theme.plot.positiveCol).alpha(.5).toString(),trackerBackgroundCol:hx.color(hx.theme.palette.contrastCol).alpha(.05).toString(),markerCol:hx.theme.palette.contrastCol},e),o=hx.randomId(),n.selection=s=hx.select(t).classed("hx-meter",!0).on("resize",function(t){return function(){return t.render()}}(this)),n.container=i=s.append("div")["class"]("hx-meter-container"),n.svg=a=i.append("svg").style("width","100%").style("height","100%"),n.progressBackgroundArc=a.append("path"),n.progressArc=a.append("path"),n.trackerBackgroundArc=a.append("path"),n.trackerArc=a.append("path"),n.markerArc=a.append("path"),n.markerTextCurve=a.append("defs").append("path").attr("id",o),n.markerText=a.append("g").append("text")["class"]("hx-meter-marker-text").append("textPath").attr("xlink:href","#"+o),r=i.append("div")["class"]("hx-meter-inner-text"),n.completedText=r.append("div")["class"]("hx-meter-completed"),n.totalText=r.append("div")["class"]("hx-meter-total"),n.typeText=r.append("div")["class"]("hx-meter-type")}return t.prototype.value=function(t){return arguments.length>0?(this._.data=hx.merge(this._.data,t),this.render(),this):this._.data},t.prototype.render=function(){var t,e,n,i,r,o,s,a,l,h,c,u,d,p,f,x,g,v,m,y,b,w,k,_,S,M,C;return t=this._,h=this.options,n=t.data,g=t.selection,e=t.container,y=t.svg,d=Math.max(0,Math.min(1,n.completed/n.total||0)),w=Math.max(0,Math.min(1,n.tracker/n.total||0)),o=Math.max(0,Math.min(1,n.marker/n.total||0)),t.completedText.text(n.completed),t.totalText.text("of "+n.total),t.typeText.text(n.unitText),v=Math.min(g.width(),2*g.height()),e.style("font-size",Math.round(14/150*(v/2))+"px"),b=10*(v/2)/150,M=v/2,C=v/2,a=1+h.markerOuterExtend,_=h.useMarker?1-h.markerPadding:1,k=_-h.trackerWidth,f=h.useTracker?k-h.arcPadding:h.useMarker?1-h.markerPadding:1,p=f-h.progressWidth,s=p-h.markerInnerExtend,l=h.markerWidth,S=function(t,e,n,i,r,o){var s,a,l,h,c,u,d;return a=v/2*i,l=v/2*r,d=Math.PI+Math.PI*e,s=Math.PI+Math.PI*n,h=0,u=1,c=hx.plot.arcCurve(M,C,a,l,d,s,h,u),t.attr("d",c).attr("fill",o).style("visibility",void 0)},e.style("width",v+"px"),e.style("height",v/2+"px"),S(t.progressArc,0,d,p,f,h.progressCol),S(t.progressBackgroundArc,d,1,p,f,h.progressBackgroundCol),h.useTracker?(S(t.trackerArc,0,w,k,_,h.trackerCol),S(t.trackerBackgroundArc,w,1,k,_,h.trackerBackgroundCol)):(t.trackerArc.style("visibility","hidden"),t.trackerBackgroundArc.style("visibility","hidden")),h.useMarker?(m=Math.PI,i=2*Math.PI,x=v/2-b,u=function(){var t,e;for(e=[],r=t=0;100>=t;r=++t)e.push({x:M+x*Math.cos((r/100+1)*Math.PI),y:C+x*Math.sin((r/100+1)*Math.PI)});return e}(),c=hx.plot.svgCurve(u,!1),t.markerTextCurve.attr("d",c),.5>o?t.markerText.attr("startOffset",100*o+1+"%").attr("text-anchor","start"):t.markerText.attr("startOffset",100*o-1+"%").attr("text-anchor","end"),t.markerText.style("visibility",void 0).text(n.markerText),S(t.markerArc,o-h.markerSize/2,o+h.markerSize/2,s,a,this.options.markerCol)):(t.markerArc.style("visibility","hidden"),t.markerText.style("visibility","hidden")),this},t}(),hx.Meter=t}(),function(){var t,e,n,i,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=function(t,e,n){var i,r;return r=Math.max(1,t-Math.floor(e/2)),i=Math.min(r+e,n+1),r=Math.max(1,i-e),{start:r,end:i}},n=function(t){var n,i,r,o,s,a,l,h,c,u;return void 0===t._.pageCount?r=[{value:t.selected,selected:!0,dataLength:t.selected.toString().length}]:(l=e(t.selected,t._.visibleCount,t._.pageCount),c=l.start,o=l.end,a=Math.max(c.toString().length,(o-1).toString().length),n=30+5*Math.max(0,a-2),i=t.container.width()-81,s=Math.floor(i/n),u=Math.min(s,t._.visibleCount),u=Math.max(u,1),h=e(t.selected,u,t._.pageCount),c=h.start,o=h.end,r=hx.range(o-c).map(function(e){return{value:c+e,selected:t.selected===c+e,dataLength:a}})),t.view.apply(r)},i=function(t,e,i){var r;return r=void 0===t._.pageCount?Math.max(e,1):hx.clamp(1,t._.pageCount,e),r!==t.selected?(t.selected=r,n(t),t.emit("change",{cause:i,selected:t.selected})):void 0},t=function(t){function e(t){var r,o;e.__super__.constructor.apply(this,arguments),hx.component.register(t,this),this.container=hx.select(t).classed("hx-paginator",!0),this._={selector:t},o=this,this.container.append("button").attr("type","button")["class"]("hx-btn "+hx.theme.paginator.arrowButton).html('<i class="fa fa-step-backward"></i>').on("click","hx.paginator",function(){return void 0===o._.pageCount?i(o,o.selected-1,"user"):i(o,0,"user")}),r=this.container.append("span")["class"]("hx-input-group"),this.view=r.view(".hx-btn","button").update(function(t,e,n){return this.text(t.value).attr("type","button").classed("hx-paginator-three-digits",3===t.dataLength).classed("hx-paginator-more-digits",t.dataLength>3).classed(hx.theme.paginator.defaultButton,!t.selected).classed(hx.theme.paginator.selectedButton,t.selected).classed("hx-no-border",!0).on("click","hx.paginator",function(){
return i(o,t.value,"user")})}),this.container.append("button").attr("type","button")["class"]("hx-btn "+hx.theme.paginator.arrowButton).html('<i class="fa fa-step-forward"></i>').on("click","hx.paginator",function(){return void 0===o._.pageCount?i(o,o.selected+1,"user"):i(o,o._.pageCount,"user")}),this.container.on("resize","hx.paginator",function(){return n(o)}),this._.visibleCount=10,this._.pageCount=10,this.selected=1,n(this)}return r(e,t),e.prototype.page=function(t){return arguments.length>0?(i(this,t,"api"),this):this.selected},e.prototype.pageCount=function(t){return null!=t?(this._.pageCount=t,n(this),this):this._.pageCount},e.prototype.visibleCount=function(t){return null!=t?(this._.visibleCount=t,n(this),this):this._.visibleCount},e}(hx.EventEmitter),hx.Paginator=t}(),function(){var t,e,n,i,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=function(t,e,n){var i,r;return r=n||hx.isFunction(t)?"th":"td",i=this.append(r)["class"]("hx-pivot-table-cell"),n&&i.classed("hx-pivot-table-head-cell",!0),i.node()},n=function(t,e,n,i,r){var o;return o=hx.select(e),hx.isFunction(t)?t(e):null==t?o.text(""):i(t,e,r,n)},i=function(t,i,r,o,s,a){return hx.select(i).view(".hx-pivot-table-cell").enter(function(t,n){return e.call(this,t,n,s||a&&0===n)}).update(function(t,e,i){return n(t,e,i,o,s||a&&0===i)}).apply(t)},t=function(t){function e(t,n){var i;this.selector=t,e.__super__.constructor.apply(this,arguments),i=this,hx.component.register(this.selector,this),this.options=hx.merge.defined({stickyHeaders:!0,topLeftCellRender:void 0,cellRender:function(t,e,n,i){return hx.select(e).text(t)},useResponsive:!0},n),this._={},this.selection=hx.select(this.selector).classed("hx-pivot-table",!0),this.table=this.selection.append("table")["class"]("hx-table"),this.tableHead=this.table.append("thead"),this.tableBody=this.table.append("tbody")}return r(e,t),e.prototype.data=function(t){var e,n,r,o,s,a,l;return null!=t?(s=this,this._.data=t,l=(null!=(r=t.topHead)?r.length:void 0)>0?t.topHead:[],n=(null!=(o=t.leftHead)?o.length:void 0)>0?t.leftHead:[],l.length>0&&t.body.length>0&&l.length!==t.body[0].length&&hx.consoleWarning("hx.PivotTable - "+this.selector,"The number of columns in the dataset is not equal to the number of headers provided in data.topHead"),n.length>0&&(n.length!==t.body.length&&hx.consoleWarning("hx.PivotTable - "+this.selector,"The number of rows in the dataset is not equal to the number of headers provided in data.leftHead"),e=t.body.map(function(t,e){return t.unshift(n[e]),t}),a=!0),l.length>0&&a&&null!=l&&l.unshift(this.options.topLeftCellRender||void 0),null==e&&(e=t.body),this.tableHeadView=this.tableHead.view("tr","tr").update(function(t,e,n){return i(t,e,n,s.options.cellRender,!0)}),this.tableBodyView=this.tableBody.view("tr","tr").update(function(t,e,n){return i(t,e,n,s.options.cellRender,!1,a)}),(null!=l?l.length:void 0)>0&&this.tableHeadView.apply([l]),this.tableBodyView.apply(e),this.options.stickyHeaders&&(this.stickyTableHeaders?this.stickyTableHeaders.render():this.stickyTableHeaders=new hx.StickyTableHeaders(this.selector,{stickTableHead:l.length>0,stickFirstColumn:n.length>0,useResponsive:this.options.useResponsive})),this):this._.data},e}(hx.EventEmitter),hx.PivotTable=t}(),function(){var t,e,n,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=[{value:"af",full:"Afrikaans"},{value:"sq",full:"Albanian"},{value:"ar",full:"Arabic"},{value:"ar-MA",full:"Arabic (Morocco)"},{value:"ar-SA",full:"Arabic (Saudi Arabia)"},{value:"ar-TN",full:"Arabic (Tunisia)"},{value:"hy-AM",full:"Armenian"},{value:"az",full:"Azerbaijani"},{value:"id",full:"Bahasa Indonesia"},{value:"ms-MY",full:"Bahasa Malayu"},{value:"eu",full:"Basque"},{value:"be",full:"Belarusian"},{value:"bn",full:"Bengali"},{value:"bs",full:"Bosnian"},{value:"br",full:"Breton"},{value:"bg",full:"Bulgarian"},{value:"my",full:"Burmese"},{value:"ca",full:"Catalan"},{value:"zh-CN",full:"Chinese"},{value:"zh-TW",full:"Chinese (Traditional)"},{value:"cv",full:"Chuvash"},{value:"hr",full:"Croatian"},{value:"cs",full:"Czech"},{value:"da",full:"Danish"},{value:"nl",full:"Dutch"},{value:"en",full:"English"},{value:"en-US",full:"English (US)"},{value:"en-AU",full:"English (Australia)"},{value:"en-CA",full:"English (Canada)"},{value:"en-GB",full:"English (UK) "},{value:"eo",full:"Esperanto"},{value:"et",full:"Estonian"},{value:"fo",full:"Farose"},{value:"fi",full:"Finnish"},{value:"fr",full:"French"},{value:"fr-CA",full:"French (Canada)"},{value:"fy",full:"Frisian"},{value:"gl",full:"Galician"},{value:"ka",full:"Georgian"},{value:"de",full:"German"},{value:"de-AT",full:"German (Austria)"},{value:"el",full:"Greek"},{value:"he",full:"Hebrew"},{value:"hi",full:"Hindi"},{value:"hu",full:"Hungarian"},{value:"is",full:"Icelandic"},{value:"it",full:"Italian"},{value:"ja",full:"Japanese"},{value:"km",full:"Khmer (Cambodia)"},{value:"ko",full:"Korean"},{value:"lv",full:"Latvian"},{value:"lt",full:"Lithuanian"},{value:"lb",full:"Luxembourgish"},{value:"mk",full:"Macedonian"},{value:"ml",full:"Malayalam"},{value:"mr",full:"Marathi"},{value:"ne",full:"Nepalese"},{value:"nb",full:"Norwegian"},{value:"nn",full:"Norwegian Nynorsk"},{value:"fa",full:"Persian"},{value:"pl",full:"Polish"},{value:"pt",full:"Portuguese"},{value:"pt-BR",full:"Portuguese (Brazil)"},{value:"ro",full:"Romanian"},{value:"ru",full:"Russian"},{value:"sr",full:"Serbian"},{value:"sr-CYRL",full:"Serbian Cyrillic"},{value:"sk",full:"Slovak"},{value:"sl",full:"Slovenian"},{value:"es",full:"Spanish"},{value:"sv",full:"Swedish"},{value:"tl-PH",full:"Tagalog (Filipino)"},{value:"tzm",full:"Tamazit"},{value:"tzm-LATN",full:"Tamazit Latin"},{value:"ta",full:"Tamil"},{value:"th",full:"Thai"},{value:"bo",full:"Tibetan"},{value:"tr",full:"Turkish"},{value:"uk",full:"Ukrainian"},{value:"uz",full:"Uzbek"},{value:"vi",full:"Vietnamese"},{value:"cy",full:"Welsh"}],t={save:function(t,e){return localStorage.setItem("hx_preferences",t),e()},load:function(t){return t(void 0,localStorage.getItem("hx_preferences"))}},e=function(e){function r(){var e,i;r.__super__.constructor.apply(this,arguments),i=function(t){return function(i){var r,s,a,l,h,c,u,d,p;return r=t.locale(),u=t.timezone(),s=hx.detached("input"),s.value(null!=(l=n.filter(function(t){return t.value===r})[0])?l.full:void 0),c=null!=t._.supportedLocales?n.map(function(e){var n;return{value:e.value,full:e.full,disabled:(n=e.value,!(o.call(t._.supportedLocales,n)>=0))}}):n,new hx.AutoComplete(s.node(),c,{renderer:function(t,e){return hx.select(t).text(e.full)},inputMap:function(t){return t.full},showOtherResults:!0,mustMatch:!0}).on("change",function(t){return r=t.value}),a=hx.detached("div").add(hx.detached("label").text("Locale")).add(s),d=hx.detached("input"),d.value(u),new hx.AutoComplete(d.node(),("undefined"!=typeof moment&&null!==moment?moment.tz.names():void 0)||[],{showOtherResults:!0,mustMatch:!0}).on("change",function(t){return u=t}),p=hx.detached("div").add(hx.detached("label").text("Time Zone")).add(d),h=hx.detached("button")["class"]("hx-btn hx-positive").add(hx.detached("i")["class"]("fa fa-check")).add(hx.detached("span").text(" Save")).on("click",function(){return t.locale(r),t.timezone(u),t.save(function(t){return t?hx.notify.negative(t):(hx.notify.positive("Preferences Saved"),e.close())})}),hx.select(i).append("div")["class"]("hx-form").add(a).add(p).add(h)}}(this),e=new hx.Modal("Preferences",i),this._={backingStore:t,preferences:{},modal:e}}return i(r,e),r.prototype.timezone=function(t){return arguments.length>0?(this._.preferences.timezone!==t&&(this._.preferences.timezone=t,this.emit("timezonechange",t)),this):this._.preferences.timezone},r.prototype.locale=function(t){var e;return arguments.length>0?(void 0===t?void 0!==this._.preferences.locale&&(this._.preferences.locale=void 0,this.emit("localechange",void 0)):(e=n.filter(function(e){return e.value.toLowerCase()===t.toLowerCase()})[0])?this._.preferences.locale!==e.value&&(this._.preferences.locale=e.value,this.emit("localechange",e.value)):hx.consoleWarning("preferences.locale",t+" is not a valid locale. If you think the locale should be added to the list contact the maintainers of hexagon"),this):this._.preferences.locale},r.prototype.supportedLocales=function(t){return arguments.length>0?(this._.supportedLocales=t,this):this._.supportedLocales},r.prototype.backingStore=function(t){return null!=t&&(this._.backingStore=t),this},r.prototype.save=function(t){var e,n;try{return this._.backingStore.save(JSON.stringify(this._.preferences),function(e){return"function"==typeof t?t(e):void 0})}catch(n){return e=n,"function"==typeof t?t(e):void 0}},r.prototype.load=function(t){var e,n;try{return this._.backingStore.load(function(e){return function(n,i){return null!=i&&(e._.preferences=JSON.parse(i)),"function"==typeof t?t(n):void 0}}(this))}catch(n){return e=n,"function"==typeof t?t(e):void 0}},r.prototype.show=function(){return this._.modal.show(),this},r}(hx.EventEmitter),hx.preferences=new e,hx.preferences.localStorageStore=t}(),function(){var t;t=function(){function t(t,e){this.selector=t,hx.component.register(this.selector,this),e=hx.merge.defined({segments:void 0,value:0,animate:!1},e),this.selection=hx.select(this.selector).classed("hx-progress-bar",!0),this.innerBars=this.selection.append("div").attr("class","hx-progress-bar-inner"),this.value(e.value),null!=e.segments&&this.segments(e.segments,!0),e.animate&&this.selection.classed("hx-animate",!0)}return t.prototype.value=function(t){return arguments.length>0?(isNaN(t)||(this.progress=Math.max(0,Math.min(1,t)),this.innerBars.style("width",100*this.progress+"%")),this):this.progress},t.prototype.segments=function(t,e){var n,i;return arguments.length>0?(null!=t?(this.progressSegments=t.filter(function(t){return null!=t.value||null!=t.ratio||null!=t["class"]}),this.progressSegments.length>0&&(this.selection.selectAll(".hx-progress-bar-inner").remove(),this.progressSegments.some(function(t){return null!=t.value})?this.progressSegments=this.progressSegments.sort(function(t,e){return(t.value||1)-(e.value||1)}):(n=0,i=this.progressSegments.map(function(t){return t.ratio||1}).reduce(function(t,e){return t+e})),this.progressSegments.forEach(function(t){return function(e,r){var o,s;return o=t.selection.append("div").attr("class","hx-progress-bar-inner"),null!=e["class"]&&o.classed(e["class"],!0),s=null==n?100*(e.value||1):(n+=e.ratio||1,n/i*100),o.style("max-width",s+"%").style("z-index",t.progressSegments.length-r)}}(this)))):(this.progressSegments=void 0,this.selection.selectAll(".hx-progress-bar-inner").remove(),this.selection.append("div").attr("class","hx-progress-bar-inner")),this.innerBars=this.selection.selectAll(".hx-progress-bar-inner"),e?this.value(this.progress):this.progress=0,this):this.progressSegments},t}(),hx.ProgressBar=t}(),function(){var t,e;e=function(t,e,n,i){var r,o,s,a,l,h,c,u,d,p;return null==t&&(t="body"),null==i&&(i={}),a=function(t){return p.selectAll(".hx-opened").forEach(function(t){var e;return null!=(e=hx.component(t.node()))?e.hide(!1):void 0}),"function"==typeof t?t():void 0},l=function(t){return o+=1,'<span class="hx-highlight-selected">'+t+"</span>"},d=function(t,e){return t.selectAll(".hx-highlighted-content").forEach(function(t){var e,n;return t=t.node(),e=t.childNodes,n=document.createTextNode(t.textContent),t.parentNode.replaceChild(n,t)}),"function"==typeof e?e():void 0},h=function(t,e){var n;return null==e&&(e=t),null===t.offsetParent&&null!=(null!=e?e.parentNode:void 0)?(null!=(n=hx.component(e))&&"function"==typeof n.show&&n.show(!1,t),h(t,e.parentNode)):void 0},c=function(t,e){var n;for(n=t,t=s.length<50?s.length:1*t+10;t>n&&n<s.length;)h(s[n]),n+=1;return void(n<s.length&&setTimeout(function(){return c(n)},150))},r=function(t){var e,n,o,a,h,c,d;if(d=(null!=(c=t.textContent)?c.search(u):void 0)>-1){if("#text"===t.nodeName)h=hx.detached("span")["class"]("hx-highlighted-content").node(),h.innerHTML=t.data.replace(u,l),t.parentNode.replaceChild(h,t),null===h.offsetParent&&null!=(null!=h?h.parentNode:void 0)&&s.push(h);else if("function"==typeof i.elemMatch&&i.elemMatch(t,!0),n=t.childNodes,n.length>0)for(o=0,a=n.length;a>o;o++)e=n[o],r(e)}else"#text"!==t.nodeName&&"function"==typeof i.elemMatch&&i.elemMatch(t,!1);return void 0},p=hx.select(t),p.style("min-height",p.style("height")),s=[],o=0,null!=e&&e.length>0?(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),u=new RegExp(e,"ig"),a(function(){return d(p,function(){return e.length>=(i.minLength||2)?(r(p.node()),"function"==typeof n&&n(o)):"function"==typeof n&&n(),s.length>0?setTimeout(function(){return c(0)},0):void 0})})):a(function(){return d(p,function(){return"function"==typeof n?n():void 0})}),void setTimeout(function(){return p.style("min-height","")},10)},t=function(t){return null==t&&(t="body"),e(t)},hx.searchDOM=e,hx.clearSearch=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var i,r,o,s,a;n.__super__.constructor.apply(this,arguments),hx.component.register(t,this),this.options=hx.merge.defined({position:"left",animate:!0,visible:!1,rotateHeading:!0},e),this.selection=hx.select(t).classed("hx-side-collapsible",!0),this.openHeading=this.selection.select(".hx-side-collapsible-heading-open").classed("hx-side-collapsible-heading",!0),this.closedHeading=this.selection.select(".hx-side-collapsible-heading-closed").classed("hx-side-collapsible-heading",!0).classed("hx-side-collapsible-heading-"+this.options.position,!0).classed("hx-side-collapsible-heading-no-rotate",!this.options.rotateHeading),this.content=this.selection.select(".hx-side-collapsible-content"),o=Number(this.closedHeading.style("padding").replace("px","")),a=this.options.rotateHeading?"height":"width",s=this.options.rotateHeading?"width":"height",this.closedSize=Number(this.closedHeading.style(a).replace("px",""))+2+2*o,this.selection.style("min-height",this.closedSize+"px"),this.closedHeading.style("min-"+s,Math.ceil(this.selection.style("height").replace("px","")-2*o)+"px"),(i=this.closedHeading.select(".hx-side-collapsible-toggle")).empty()?this.closedHeading.on("click","hx.side-collapsible",function(t){return function(){return t.show()}}(this)):(this.closedHeading.classed("hx-side-collapsible-heading-no-hover",!0),i.on("click","hx.side-collapsible",function(t){return function(){return t.show()}}(this))),(r=this.openHeading.select(".hx-side-collapsible-toggle")).empty()?this.openHeading.on("click","hx.side-collapsible",function(t){return function(){return t.hide()}}(this)):(this.openHeading.classed("hx-side-collapsible-heading-no-hover",!0),r.on("click","hx.side-collapsible",function(t){return function(){return t.hide()}}(this))),this.visible=!this.options.visible,this.options.visible?this.show(!1):this.hide(!1)}return e(n,t),n.prototype.show=function(t,e){return t=null!=t?t:this.options.animate,this.visible||(this.visible=!0,t?(this.selection.style("width",this.closedSize+"px"),this.openHeading.style("width",this.closedSize+"px"),this.content.style("width",this.closedSize+"px"),this.openHeading.style("opacity",0).style("display","block"),this.content.style("opacity",0).style("display","block"),this.closedHeading.morph()["with"]("fadeout",100).then(function(t){return function(){return t.selection.style("width",""),t.content.morph()["with"]("expandh",100).and("fadein",100).and(function(){return t.openHeading.morph()["with"]("expandh",100).and("fadein",100).go(!0)}).go(!0),t.emit("showend"),"function"==typeof e?e():void 0}}(this)).go(!0)):(this.selection.style("width",""),this.closedHeading.style("display","none"),this.openHeading.style("display","block"),this.content.style("display","block"),this.emit("showend"))),this.emit("showstart"),this.emit("change",!0),this},n.prototype.hide=function(t,e){var n;return t=null!=t?t:this.options.animate,this.visible&&(this.visible=!1,t?(n=this,this.closedHeading.style("opacity",0).style("display","block"),this.content.morph()["with"]("collapseh",100).and("fadeout",100).and(function(t){return function(){return t.openHeading.morph()["with"]("collapseh",100).and("fadeout",100).go(!0)}}(this)).then(function(t){return function(){return t.selection.style("width",t.closedSize+"px"),t.openHeading.style("width",t.closedSize+"px"),t.content.style("width",t.closedSize+"px"),t.closedHeading.morph()["with"]("fadein",100).go(!0),t.emit("hideend"),"function"==typeof e?e():void 0}}(this)).go(!0)):(this.selection.style("width",this.closedSize+"px"),this.closedHeading.style("display","block"),this.openHeading.style("display","none"),this.content.style("display","none"),this.emit("hideend"))),this.emit("hidestart"),this.emit("change",!1),this},n.prototype.toggle=function(t){return t=null!=t?t:this.options.animate,this.visible?this.show(t):this.hide(t),this},n}(hx.EventEmitter),hx.SideCollapsible=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var i,r;n.__super__.constructor.apply(this,arguments),hx.component.register(t,this),e=hx.merge.defined({headerSelector:".hx-titlebar-header",contentSelector:".hx-content",autoAddSidebarClass:!0},e),this.selection=hx.select(t),r=hx.select("body").width()>560,this.selection.classed("hx-sidebar",!0).classed("hx-openable",!0).classed("hx-opened",r),hx.select("body").classed("hx-sidebar-opened",r).node().offsetHeight,e.autoAddSidebarClass&&hx.select("body").classed("hx-sidebar-page",!0),this.selection.classed("hx-animate",!0),hx.select(e.contentSelector).classed("hx-animate",!0),i=hx.select(e.headerSelector).prepend("button").attr("type","button")["class"]("hx-titlebar-sidebar-button").html('<i class="fa fa-bars"></i>'),i.on("click","hx.sidebar",function(t){return function(){return t.toggle()}}(this))}return e(n,t),n.prototype.toggle=function(){return this.selection.classed("hx-opened")?this.hide():this.show(),this},n.prototype.hide=function(){return this.selection.classed("hx-opened",!1),hx.select("body").classed("hx-sidebar-opened",!1),this.emit("hide"),this},n.prototype.show=function(){return this.selection.classed("hx-opened",!0),hx.select("body").classed("hx-sidebar-opened",!0),this.emit("show"),this},n}(hx.EventEmitter),hx.Sidebar=t}(),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=function(t,e,n){return t.selected=n,hx.select(t.selector).selectAll(".hx-tab").classed("hx-tab-active",!1),hx.select(e).classed("hx-tab-active",!0),hx.select(t.selector).selectAll(".hx-tab-content").classed("hx-tab-content-hidden",!0),hx.select("#"+hx.select(e).attr("data-content")).classed("hx-tab-content-hidden",!1),t.emit("change",{id:n})},t=function(t){function i(t){var n;this.selector=t,i.__super__.constructor.apply(this,arguments),hx.component.register(this.selector,this),this.selected=-1,n=this,hx.select(this.selector).selectAll(".hx-tab").forEach(function(t,i){return t.on("click","hx.tabs",function(){return e(n,t.node(),i)})}),this.select(0)}return n(i,t),i.prototype.select=function(t,n){var i;return this.selected!==t||n?(i=hx.select(this.selector).selectAll(".hx-tab").nodes[t],e(this,i,t)):void 0},i}(hx.EventEmitter),hx.Tabs=t}(),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=hx.format.zeroPad(2),t=function(t){function i(t,n){var o,s,a,l;null==n&&(n={}),s=null!=n.min?r(n.min):(l=new Date,l.setMilliseconds(0),l.setSeconds(0),l.setMinutes(0),l.setHours(0),new Date(l.getTime()).getTime()),o=null!=n.max?r(n.max):s+864e5-1,a=hx.merge({renderer:function(t,e,n){return hx.select(e).text(t.options.formatter(new Date(n)))}},n),a.min=s,a.max=o,"undefined"!=typeof moment&&null!==moment?null==a.formatter&&(a.formatter=function(t){return moment(t).format("HH:mm")}):null==a.formatter&&(a.formatter=function(t){return e(t.getHours())+":"+e(t.getMinutes())}),i.__super__.constructor.call(this,t,a)}var r;return n(i,t),r=function(t){return t instanceof Date?t.getTime():t},i.prototype.value=function(t){var e,n;return arguments.length>0?("range"===this.options.type?(n=null!=t.start?r(t.start):void 0,e=null!=t.end?r(t.end):void 0,i.__super__.value.call(this,{start:n,end:e})):i.__super__.value.call(this,r(t)),this):"range"===this.options.type?{start:new Date(this.values.start),end:new Date(this.values.end)}:new Date(this.values.value)},i.prototype.min=function(t){return arguments.length>0?i.__super__.min.call(this,r(t)):new Date(i.__super__.min.call(this))},i.prototype.max=function(t){return arguments.length>0?i.__super__.max.call(this,r(t)):new Date(i.__super__.max.call(this))},i}(hx.Slider),hx.TimeSlider=t}(),function(){var t,e,n,i;n=function(t){return function(t,e,n){var i,r;return i=hx.select(t).select(".hx-tree-node-children"),!i.selectAll(".hx-tree-node").empty()&&(r="block"===i.style("display"),hx.select(t).classed("hx-tree-node-open",r),n)?hx.select(e).select("i").morph().then(r?"rotate-90":"rotate-0").go(!0):void 0}}(this),e=function(t,e,i){var r,o,s,a,l,h,c,u;return u=function(i){return function(i){var r,o;return o=hx.select(e).select(".hx-tree-node-children"),r="none"===o.style("display")?"block":"none",o.style("display",r),n(e,i,t.options.animate)}}(this),a=function(i){return function(i){var r,o,s;return s=hx.select(e).selectAll(".hx-tree-node-children"),r=hx.select(e).select(".hx-tree-node-children"),o=r.node(),"block"===r.style("display")?s.forEach(function(e){var r;return e!==o&&"block"!==e.style("display")?(r=e.node().parentNode,i=hx.select(r).select(".hx-tree-node-parent-icon").node(),e.style("display","block"),n(r,i,t.options.animate)):void 0}):u(i)}}(this),c=hx.select(e.parentNode).selectAll(".hx-tree-node").select(".hx-tree-node-children").selectAll(".hx-tree-node").size()>0,c=t.options.hideDisabledButtons?!1:c,hx.select(e).select(".hx-tree-node-children").selectAll(".hx-tree-node").size()>0||c?(o=hx.select(e).select(".hx-tree-node-parent"),o.size()>0?o.view(".hx-tree-node-parent-icon").enter(function(){var t;return t=this.append("div"),t.attr("class","hx-tree-node-parent-icon").append("i").attr("class","fa fa-chevron-right hx-tree-node-state-icon"),t.node()}).update(function(t,e){var r,o;return o=!1,r=function(){return o=!1},this.on("click",function(){return o?a(e):u(e),setTimeout(r,250),o=!0}),n(e.parentNode.parentNode,e,i)}).apply(this):(l=hx.select(e),r=l.select(".hx-tree-node-content").node(),s=l.append("div").attr("class","hx-tree-node-parent").node(),s.appendChild(r),h=hx.select(s).append("div"),h.attr("class","hx-tree-node-parent-icon hx-tree-node-parent-icon-disabled").append("i").attr("class","fa fa-chevron-right"))):void 0},i=function(t){var e,n;return n=hx.select(t),n.classed("hx-tree-node")&&(t=t.parentNode,n.select(":scope > .hx-tree-node-children").style("display","block")),e=t.parentNode,null!=e&&this.selection.node().contains(t)?i.call(this,e):void 0},t=function(){function t(t,e){this.selector=t,hx.component.register(this.selector,this),this.options=hx.merge.defined({hideDisabledButtons:!1,animate:!0,renderer:function(t,e){return hx.select(t).html(e)},items:[]},e),this.selection=hx.select(this.selector).classed("hx-openable",!0),null!=this.options.items&&this.options.items.length>0&&this.items(this.options.items),this.refresh(!1)}return t.prototype.refresh=function(t){return t=null!=t?t:this.options.animate,this.selection.selectAll(".hx-tree-node").forEach(function(n){return function(i){return e(n,i.node(),t)}}(this)),this},t.prototype.renderer=function(t){return null!=t?(this.options.renderer=t,this):this.options.renderer},t.prototype.items=function(t){var e,n,i;return null!=t?(e=this,this.options.items=t,n=function(t,n){var r,o;return null!=n.children&&n.children.length>0?(o=hx.select(t).append("div").attr("class","hx-tree-node-parent").append("div").attr("class","hx-tree-node-content"),e.options.renderer(o.node(),n),r=hx.select(t).append("div").attr("class","hx-tree-node-children"),i(r,n.children)):(r=hx.select(t).append("div").attr("class","hx-tree-node-content"),e.options.renderer(r.node(),n))},i=function(t,e){var i;return i=t.view(".hx-tree-node").enter(function(t){var e;return e=this.append("div").attr("class","hx-tree-node").node(),n(e,t),e}).apply(e)},this.selection.selectAll(".hx-tree-node").remove(),i(this.selection,t),this.refresh(!1),this):this.options.items},t.prototype.show=function(t,e){return t=null!=t?t:this.options.animate,null!=e?i.call(this,e):this.selection.selectAll(".hx-tree-node-children").style("display","block"),this.selection.classed("hx-opened",!0),this.refresh(t),this},t.prototype.hide=function(t,e){var n,i;return null!=e?(i=hx.select(e),i.classed("hx-tree-node")||(i=i.closest(".hx-tree-node")),i.select(":scope > .hx-tree-node-children").style("display","none"),n=this.selection.selectAll(".hx-tree-node-children").style("display"),n.some(function(t){return"block"===t})||this.selection.classed("hx-opened",!1)):(this.selection.classed("hx-opened",!1),this.selection.selectAll(".hx-tree-node-children").style("display","none")),t=null!=t?t:this.options.animate,this.refresh(t),this},t}(),hx.Tree=t,hx.initializeTrees=function(e){return hx.selectAll(e).map(function(e){return new t(e)})}}()}();